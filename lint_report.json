[{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/commands/FileCreationCommands.ts","messages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":127,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":129,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3348,3348],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":131,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":133,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[3477,3477],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":166,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":168,"endColumn":9,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[4455,4455],"text":"void "},"desc":"Add void operator to ignore."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from \"vscode\";\nimport * as path from \"path\";\n\nconst IP_CORE_TEMPLATE = `apiVersion: 1.0\nvlnv:\n  vendor: my_vendor\n  library: my_library\n  name: New_IP_Core\n  version: 1.0.0\n\ndescription: A new IP Core definition\n\n`;\n\nconst MEMORY_MAP_TEMPLATE = `- name: NEW_MEMORY_MAP\n  description: Description of this memory map\n  addressBlocks:\n    - name: BLOCK_0\n      offset: 0\n      usage: register\n      defaultRegWidth: 32\n      registers:\n        - name: CTRL\n          offset: 0\n          access: read-write\n          description: Control register\n          fields:\n            - name: ENABLE\n              bits: \"[0:0]\"\n              access: read-write\n              description: Enable bit\n`;\n\n/**\n * Generate IP Core template with memory map reference\n */\nfunction generateIpCoreWithMemoryMapTemplate(\n  memoryMapFileName: string,\n): string {\n  return `apiVersion: 1.0\nvlnv:\n  vendor: my_vendor\n  library: my_library\n  name: New_IP_Core\n  version: 1.0.0\n\ndescription: A new IP Core definition\n\n# Memory maps - linked from external file\nmemoryMaps:\n  import: ${memoryMapFileName}\n`;\n}\n\nexport async function createIpCoreCommand(): Promise<void> {\n  await createFileWithTemplate(\"new_ip_core.ip.yml\", IP_CORE_TEMPLATE);\n}\n\nexport async function createMemoryMapCommand(): Promise<void> {\n  await createFileWithTemplate(\"new_memory_map.mm.yml\", MEMORY_MAP_TEMPLATE);\n}\n\nexport async function createIpCoreWithMemoryMapCommand(): Promise<void> {\n  const workspaceFolders = vscode.workspace.workspaceFolders;\n  let defaultUri: vscode.Uri | undefined;\n\n  if (workspaceFolders && workspaceFolders.length > 0) {\n    defaultUri = vscode.Uri.joinPath(\n      workspaceFolders[0].uri,\n      \"new_ip_core.ip.yml\",\n    );\n  }\n\n  // Prompt user for IP Core file location\n  const ipCoreUri = await vscode.window.showSaveDialog({\n    defaultUri,\n    saveLabel: \"Create IP Core\",\n    title: \"Create IP Core with Memory Map\",\n    filters: {\n      \"YAML Files\": [\"yml\", \"yaml\"],\n    },\n  });\n\n  if (!ipCoreUri) {\n    return;\n  }\n\n  try {\n    // Derive memory map filename from IP Core filename\n    // e.g., my_core.ip.yml -> my_core.mm.yml\n    const ipCoreBaseName = path.basename(ipCoreUri.fsPath);\n    const ipCoreDir = path.dirname(ipCoreUri.fsPath);\n\n    // Remove .ip.yml or .yml suffix and add .mm.yml\n    let memoryMapBaseName: string;\n    if (ipCoreBaseName.endsWith(\".ip.yml\")) {\n      memoryMapBaseName =\n        ipCoreBaseName.slice(0, -\".ip.yml\".length) + \".mm.yml\";\n    } else if (ipCoreBaseName.endsWith(\".yml\")) {\n      memoryMapBaseName = ipCoreBaseName.slice(0, -\".yml\".length) + \".mm.yml\";\n    } else {\n      memoryMapBaseName = ipCoreBaseName + \".mm.yml\";\n    }\n\n    const memoryMapUri = vscode.Uri.file(\n      path.join(ipCoreDir, memoryMapBaseName),\n    );\n\n    // Create memory map file\n    await vscode.workspace.fs.writeFile(\n      memoryMapUri,\n      new Uint8Array(Buffer.from(MEMORY_MAP_TEMPLATE)),\n    );\n\n    // Create IP Core file with reference to memory map\n    const ipCoreContent =\n      generateIpCoreWithMemoryMapTemplate(memoryMapBaseName);\n    await vscode.workspace.fs.writeFile(\n      ipCoreUri,\n      new Uint8Array(Buffer.from(ipCoreContent)),\n    );\n\n    // Open the IP Core file\n    const document = await vscode.workspace.openTextDocument(ipCoreUri);\n    await vscode.window.showTextDocument(document);\n\n    vscode.window.showInformationMessage(\n      `Created ${ipCoreBaseName} and ${memoryMapBaseName}`,\n    );\n  } catch (error) {\n    vscode.window.showErrorMessage(\n      `Failed to create files: ${error instanceof Error ? error.message : String(error)}`,\n    );\n  }\n}\n\nasync function createFileWithTemplate(\n  defaultFileName: string,\n  template: string,\n): Promise<void> {\n  const workspaceFolders = vscode.workspace.workspaceFolders;\n  let defaultUri: vscode.Uri | undefined;\n\n  if (workspaceFolders && workspaceFolders.length > 0) {\n    defaultUri = vscode.Uri.joinPath(workspaceFolders[0].uri, defaultFileName);\n  }\n\n  const uri = await vscode.window.showSaveDialog({\n    defaultUri,\n    saveLabel: \"Create File\",\n    title: `Create ${defaultFileName}`,\n    filters: {\n      \"YAML Files\": [\"yml\", \"yaml\"],\n    },\n  });\n\n  if (uri) {\n    try {\n      await vscode.workspace.fs.writeFile(\n        uri,\n        new Uint8Array(Buffer.from(template)),\n      );\n      const document = await vscode.workspace.openTextDocument(uri);\n      await vscode.window.showTextDocument(document);\n    } catch (error) {\n      vscode.window.showErrorMessage(\n        `Failed to create file: ${error instanceof Error ? error.message : String(error)}`,\n      );\n    }\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/commands/GenerateCommands.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[799,802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[799,802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[809,812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[809,812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":85,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":88,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2353,2353],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":98,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":100,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2684,2684],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":109,"column":5,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":111,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2954,2954],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":140,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":140,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3814,3816],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"number | undefined\" of template literal expression.","line":168,"column":26,"nodeType":"MemberExpression","messageId":"invalidType","endLine":168,"endColumn":38},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":179,"column":9,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":179,"endColumn":78,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[4823,4823],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"string | undefined\" of template literal expression.","line":179,"column":62,"nodeType":"MemberExpression","messageId":"invalidType","endLine":179,"endColumn":74},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":252,"column":9,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":252,"endColumn":68,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[6924,6924],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":291,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":291,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":292,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":292,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":292,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":292,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .file_sets on an `any` value.","line":292,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":292,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":293,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":293,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .file_sets on an `any` value.","line":295,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":295,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":311,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":313,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .findIndex on an `any` value.","line":311,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":311,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":311,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":311,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":312,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":312,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8616,8619],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8616,8619],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":312,"column":22,"nodeType":"LogicalExpression","messageId":"unsafeReturn","endLine":312,"endColumn":65},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":312,"column":22,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":312,"endColumn":35,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[8624,8637],"text":"fs?.name"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":312,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":312,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":312,"column":57,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":312,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":312,"column":57,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":312,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .push on an `any` value.","line":318,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":318,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":318,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":318,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":323,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":323,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":325,"column":9,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":325,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":325,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":325,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":325,"column":29,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":325,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":328,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":328,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":328,"column":21,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":328,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":329,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":329,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":329,"column":18,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":329,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":331,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":331,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":331,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":331,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":331,"column":38,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":331,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":334,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":334,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .some on an `any` value.","line":334,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":334,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":334,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":334,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":334,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":334,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9235,9238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9235,9238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .path on an `any` value.","line":334,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":334,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .push on an `any` value.","line":336,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":336,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":336,"column":11,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":336,"endColumn":29}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":38,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * VS Code Commands for VHDL Code Generation\n *\n * Provides commands to generate VHDL files from IP core definitions.\n */\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as YAML from \"yaml\";\nimport { Logger } from \"../utils/Logger\";\nimport { TemplateLoader } from \"../generator/TemplateLoader\";\nimport { IpCoreScaffolder } from \"../generator/IpCoreScaffolder\";\nimport { VhdlParser } from \"../parser/VhdlParser\";\n\nconst logger = new Logger(\"GenerateCommands\");\n\n/**\n * Register all generator commands with VS Code\n */\n/**\n * Register a command, ignoring \"already exists\" errors that occur when the\n * extension host restarts without a full deactivation cycle.\n */\nfunction safeRegisterCommand(\n  context: vscode.ExtensionContext,\n  command: string,\n  handler: (...args: any[]) => any,\n): void {\n  try {\n    context.subscriptions.push(\n      vscode.commands.registerCommand(command, handler),\n    );\n  } catch {\n    // Command was already registered by a previous (stale) activation\n  }\n}\n\nexport function registerGeneratorCommands(\n  context: vscode.ExtensionContext,\n): void {\n  // Generate VHDL command (auto-detects bus from YAML)\n  safeRegisterCommand(context, \"fpga-ip-core.generateVHDL\", async () => {\n    await generateVHDL(context);\n  });\n\n  // Legacy command - now just calls main generate\n  safeRegisterCommand(context, \"fpga-ip-core.generateVHDLWithBus\", async () => {\n    // Bus type is now auto-detected from YAML\n    await generateVHDL(context);\n  });\n\n  // Parse VHDL and create IP core YAML\n  safeRegisterCommand(context, \"fpga-ip-core.parseVHDL\", async (uri?: vscode.Uri) => {\n    await parseVHDL(uri);\n  });\n\n  // View bundled bus definitions YAML\n  safeRegisterCommand(context, \"fpga-ip-core.viewBusDefinitions\", async () => {\n    await viewBusDefinitions(context);\n  });\n}\n\n/**\n * Open the bundled bus_definitions.yml in a read-only editor tab\n */\nasync function viewBusDefinitions(\n  context: vscode.ExtensionContext,\n): Promise<void> {\n  const builtInPath = path.join(\n    context.extensionPath,\n    \"dist\",\n    \"resources\",\n    \"bus_definitions.yml\",\n  );\n\n  const uri = vscode.Uri.file(builtInPath);\n\n  try {\n    const doc = await vscode.workspace.openTextDocument(uri);\n    await vscode.window.showTextDocument(doc, {\n      preview: true,\n      preserveFocus: false,\n    });\n  } catch (error) {\n    vscode.window.showErrorMessage(\n      `Failed to open bus definitions: ${error instanceof Error ? error.message : String(error)\n      }`,\n    );\n  }\n}\n\n/**\n * Get IP core file path from active editor\n */\nfunction getActiveIpCoreFile(): vscode.Uri | undefined {\n  const editor = vscode.window.activeTextEditor;\n  if (!editor) {\n    vscode.window.showErrorMessage(\n      \"No active editor. Please open an IP core YAML file.\",\n    );\n    return undefined;\n  }\n\n  const document = editor.document;\n  if (\n    !document.fileName.endsWith(\".ip.yml\") &&\n    !document.fileName.endsWith(\".ip.yaml\")\n  ) {\n    vscode.window.showErrorMessage(\n      \"Active file is not an IP core file (*.ip.yml).\",\n    );\n    return undefined;\n  }\n\n  return document.uri;\n}\n\n/**\n * Main VHDL generation command - requires Python backend\n */\nasync function generateVHDL(context: vscode.ExtensionContext): Promise<void> {\n  const ipCoreUri = getActiveIpCoreFile();\n  if (!ipCoreUri) {\n    return;\n  }\n\n  const sourceDir = path.dirname(ipCoreUri.fsPath);\n  const defaultOutputDir = path.join(sourceDir, \"generated\");\n\n  // Ask user for output directory\n  const outputUri = await vscode.window.showOpenDialog({\n    defaultUri: vscode.Uri.file(defaultOutputDir),\n    canSelectFiles: false,\n    canSelectFolders: true,\n    canSelectMany: false,\n    openLabel: \"Select Output Directory\",\n    title: \"Select directory for generated VHDL files\",\n  });\n\n  const outputDir = outputUri?.[0]?.fsPath || defaultOutputDir;\n\n  await vscode.window.withProgress(\n    {\n      location: vscode.ProgressLocation.Notification,\n      title: \"Generating VHDL files...\",\n      cancellable: false,\n    },\n    async () => {\n      const generator = new IpCoreScaffolder(\n        logger,\n        new TemplateLoader(logger),\n        context,\n      );\n      const result = await generator.generateAll(ipCoreUri.fsPath, outputDir, {\n        updateYaml: true,\n      });\n\n      if (result.success) {\n        if (result.files) {\n          await updateFileSetsInYaml(\n            ipCoreUri,\n            outputDir,\n            Object.keys(result.files),\n          );\n        }\n\n        const action = await vscode.window.showInformationMessage(\n          `✓ Generated ${result.count} files`,\n          \"Open Folder\",\n        );\n\n        if (action === \"Open Folder\") {\n          await vscode.commands.executeCommand(\n            \"revealFileInOS\",\n            vscode.Uri.file(outputDir),\n          );\n        }\n      } else {\n        vscode.window.showErrorMessage(`Generation failed: ${result.error}`);\n      }\n    },\n  );\n}\n\n/**\n * Parse VHDL file and generate IP core YAML\n */\nasync function parseVHDL(resourceUri?: vscode.Uri): Promise<void> {\n  // Get VHDL file URI from context menu or active editor\n  let vhdlUri = resourceUri;\n\n  if (!vhdlUri) {\n    const editor = vscode.window.activeTextEditor;\n    if (\n      editor &&\n      (editor.document.fileName.endsWith(\".vhd\") ||\n        editor.document.fileName.endsWith(\".vhdl\"))\n    ) {\n      vhdlUri = editor.document.uri;\n    }\n  }\n\n  if (!vhdlUri) {\n    // Show file picker\n    const files = await vscode.window.showOpenDialog({\n      canSelectFiles: true,\n      canSelectFolders: false,\n      filters: { \"VHDL Files\": [\"vhd\", \"vhdl\"] },\n      title: \"Select VHDL file to parse\",\n    });\n    vhdlUri = files?.[0];\n  }\n\n  if (!vhdlUri) {\n    return;\n  }\n\n  // Generate output path (.ip.yml next to .vhd)\n  const vhdlPath = vhdlUri.fsPath;\n  const baseName = path.basename(vhdlPath, path.extname(vhdlPath));\n  const outputDir = path.dirname(vhdlPath);\n  const defaultOutput = path.join(outputDir, `${baseName}.ip.yml`);\n\n  await vscode.window.withProgress(\n    {\n      location: vscode.ProgressLocation.Notification,\n      title: \"Creating IP Core from VHDL...\",\n      cancellable: false,\n    },\n    async () => {\n      try {\n        const parser = new VhdlParser();\n        const result = await parser.parseFile(vhdlPath, { detectBus: true });\n\n        const encoder = new TextEncoder();\n        await vscode.workspace.fs.writeFile(\n          vscode.Uri.file(defaultOutput),\n          encoder.encode(result.yamlText),\n        );\n\n        const action = await vscode.window.showInformationMessage(\n          `✓ Created ${path.basename(defaultOutput)}`,\n          \"Open File\",\n        );\n\n        if (action === \"Open File\") {\n          const doc = await vscode.workspace.openTextDocument(defaultOutput);\n          await vscode.window.showTextDocument(doc);\n        }\n      } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        vscode.window.showErrorMessage(`Parse failed: ${message}`);\n      }\n    },\n  );\n}\n\nasync function updateFileSetsInYaml(\n  ipCoreUri: vscode.Uri,\n  outputBaseDir: string,\n  writtenFiles: string[],\n): Promise<void> {\n  try {\n    const document = await vscode.workspace.openTextDocument(ipCoreUri);\n    const baseDir = path.dirname(ipCoreUri.fsPath);\n    const doc = YAML.parseDocument(document.getText());\n    const yamlRelativeFiles = writtenFiles.map((file) => {\n      const absolutePath = path.join(outputBaseDir, file);\n      return path.relative(baseDir, absolutePath);\n    });\n\n    const rtlFiles = yamlRelativeFiles.filter(\n      (file) =>\n        file.endsWith(\".vhd\") &&\n        !file.endsWith(\"_regs.vhd\") &&\n        !file.endsWith(\"_tb.vhd\"),\n    );\n    const simFiles = yamlRelativeFiles.filter(\n      (file) =>\n        file.endsWith(\".py\") ||\n        file.endsWith(\"Makefile\") ||\n        file.endsWith(\"_tb.vhd\"),\n    );\n    const integrationFiles = yamlRelativeFiles.filter(\n      (file) =>\n        file.endsWith(\".tcl\") ||\n        file.endsWith(\".xml\") ||\n        file.endsWith(\"_regs.vhd\"),\n    );\n\n    const currentData = doc.toJSON();\n    let fileSets = currentData.fileSets || currentData.file_sets || [];\n    const key = currentData.fileSets\n      ? \"fileSets\"\n      : currentData.file_sets\n        ? \"file_sets\"\n        : \"fileSets\";\n\n    if (!Array.isArray(fileSets)) {\n      fileSets = [];\n    }\n\n    const updateFileSet = (\n      setNames: string[],\n      setDescription: string,\n      newFiles: string[],\n      fileTypeMap: (filePath: string) => string,\n    ) => {\n      if (newFiles.length === 0) {return;}\n\n      let targetSetIndex = fileSets.findIndex(\n        (fs: any) => fs && fs.name && setNames.includes(fs.name),\n      );\n\n      let usedName = setNames[0];\n\n      if (targetSetIndex === -1) {\n        fileSets.push({\n          name: usedName,\n          description: setDescription,\n          files: [],\n        });\n        targetSetIndex = fileSets.length - 1;\n      } else {\n        usedName = fileSets[targetSetIndex].name;\n      }\n\n      if (!fileSets[targetSetIndex].files) {\n        fileSets[targetSetIndex].files = [];\n      }\n      const existingFiles = fileSets[targetSetIndex].files;\n\n      newFiles.forEach((filePath) => {\n        const exists = existingFiles.some((f: any) => f.path === filePath);\n        if (!exists) {\n          existingFiles.push({\n            path: filePath,\n            type: fileTypeMap(filePath),\n          });\n        }\n      });\n    };\n\n    updateFileSet(\n      [\"RTL_Sources\", \"rtl_sources\", \"rtl\", \"RTL\"],\n      \"RTL Sources\",\n      rtlFiles,\n      () => \"vhdl\",\n    );\n    updateFileSet(\n      [\"Simulation_Resources\", \"simulation\", \"tb\"],\n      \"Simulation Files\",\n      simFiles,\n      (file) => {\n        if (file.endsWith(\"Makefile\")) {return \"unknown\";}\n        if (file.endsWith(\".py\")) {return \"python\";}\n        return \"vhdl\";\n      },\n    );\n    updateFileSet(\n      [\"Integration\", \"integration\"],\n      \"Integration Files\",\n      integrationFiles,\n      (file) => {\n        if (file.endsWith(\".tcl\")) {return \"tcl\";}\n        if (file.endsWith(\".xml\")) {return \"unknown\";}\n        return \"vhdl\";\n      },\n    );\n\n    doc.setIn([key], fileSets);\n    const newText = doc.toString();\n    const edit = new vscode.WorkspaceEdit();\n    const lastLine = document.lineAt(Math.max(0, document.lineCount - 1));\n    edit.replace(\n      document.uri,\n      new vscode.Range(0, 0, lastLine.lineNumber, lastLine.text.length),\n      newText,\n    );\n    await vscode.workspace.applyEdit(edit);\n    await document.save();\n  } catch (error) {\n    logger.error(\"Failed to update fileSets\", error as Error);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/extension.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[699,702],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[699,702],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[709,712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[709,712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from \"vscode\";\nimport { Logger, LogLevel } from \"./utils/Logger\";\nimport { MemoryMapEditorProvider } from \"./providers/MemoryMapEditorProvider\";\nimport { IpCoreEditorProvider } from \"./providers/IpCoreEditorProvider\";\nimport {\n  createIpCoreCommand,\n  createMemoryMapCommand,\n  createIpCoreWithMemoryMapCommand,\n} from \"./commands/FileCreationCommands\";\nimport { registerGeneratorCommands } from \"./commands/GenerateCommands\";\n\n/**\n * Register a command, ignoring \"already exists\" errors that occur when the\n * extension host restarts without a full deactivation cycle.\n */\nfunction safeRegisterCommand(\n  context: vscode.ExtensionContext,\n  command: string,\n  handler: (...args: any[]) => any,\n): void {\n  try {\n    context.subscriptions.push(\n      vscode.commands.registerCommand(command, handler),\n    );\n  } catch {\n    // Command was already registered by a previous (stale) activation\n  }\n}\n\n/**\n * Extension activation entry point\n */\nexport function activate(context: vscode.ExtensionContext): void {\n  // Initialize logging\n  Logger.initialize(\"FPGA Memory Map & IP Core Editor\", LogLevel.INFO);\n  const logger = new Logger(\"Extension\");\n  logger.info(\"Extension activating\");\n\n  // Register Memory Map custom editor provider\n  try {\n    context.subscriptions.push(\n      vscode.window.registerCustomEditorProvider(\n        \"fpgaMemoryMap.editor\",\n        new MemoryMapEditorProvider(context),\n        {\n          webviewOptions: {\n            retainContextWhenHidden: true,\n          },\n          supportsMultipleEditorsPerDocument: false,\n        },\n      ),\n    );\n    logger.info(\"Memory Map editor registered\");\n  } catch (e) {\n    logger.warn(\"fpgaMemoryMap.editor already registered – skipping\");\n  }\n\n  // Register IP Core custom editor provider\n  try {\n    context.subscriptions.push(\n      vscode.window.registerCustomEditorProvider(\n        \"fpgaIpCore.editor\",\n        new IpCoreEditorProvider(context),\n        {\n          webviewOptions: {\n            retainContextWhenHidden: true,\n          },\n          supportsMultipleEditorsPerDocument: false,\n        },\n      ),\n    );\n    logger.info(\"IP Core editor registered\");\n  } catch (e) {\n    logger.warn(\"fpgaIpCore.editor already registered – skipping\");\n  }\n\n  // Register File Creation Commands\n  safeRegisterCommand(context, \"fpga-ip-core.createIpCore\", createIpCoreCommand);\n  safeRegisterCommand(context, \"fpga-ip-core.createMemoryMap\", createMemoryMapCommand);\n  safeRegisterCommand(context, \"fpga-ip-core.createIpCoreWithMemoryMap\", createIpCoreWithMemoryMapCommand);\n\n  // Register VHDL Generator Commands\n  registerGeneratorCommands(context);\n  logger.info(\"Generator commands registered\");\n\n  logger.info(\"Extension activated successfully\");\n}\n\n/**\n * Extension deactivation cleanup\n */\nexport function deactivate(): void {\n  const logger = new Logger(\"Extension\");\n  logger.info(\"Extension deactivating\");\n  Logger.dispose();\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/generator/IpCoreScaffolder.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":54,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":54,"endColumn":58},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":63,"column":37,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":63,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1807,1809],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":67,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":67,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":118,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":118,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":163,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":163,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4795,4798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4795,4798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":173,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":173,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":173,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":173,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5022,5025],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5022,5025],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":176,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5061,5064],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5061,5064],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":177,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":177,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .busInterfaces on an `any` value.","line":177,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":177,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bus_interfaces on an `any` value.","line":177,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":177,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .mode on an `any` value.","line":180,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":180,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":182,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":182,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5492,5495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5492,5495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":195,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":195,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":200,"column":64,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":200,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":200,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":200,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":201,"column":64,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":201,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":201,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":201,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":203,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":203,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .clocks on an `any` value.","line":203,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":203,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":204,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":204,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .resets on an `any` value.","line":204,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":204,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":205,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":205,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [0] on an `any` value.","line":205,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":205,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":206,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":206,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [0] on an `any` value.","line":206,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":206,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [0] on an `any` value.","line":207,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":207,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6422,6425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6422,6425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":212,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6463,6466],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6463,6466],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":216,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":216,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":217,"column":40,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":217,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physical_prefix on an `any` value.","line":217,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":217,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":220,"column":53,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":220,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":220,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":220,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string[]`.","line":223,"column":11,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":223,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .use_optional_ports on an `any` value.","line":223,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":223,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":224,"column":11,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":224,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physical_prefix on an `any` value.","line":224,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":224,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":225,"column":11,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":225,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .mode on an `any` value.","line":225,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":225,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Record<string, number>`.","line":226,"column":11,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":226,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .port_width_overrides on an `any` value.","line":226,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":226,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .ports on an `any` value.","line":228,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":228,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":257,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":257,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":258,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":258,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":259,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":259,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":260,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":260,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":261,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":261,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":262,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":262,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":268,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":268,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8334,8337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8334,8337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":269,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":269,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .parameters on an `any` value.","line":269,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":269,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":270,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":274,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":270,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":270,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":270,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":270,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":270,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8448,8451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8448,8451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":271,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":271,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":271,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":271,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .data_type on an `any` value.","line":272,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":272,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .dataType on an `any` value.","line":272,"column":47,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":272,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":273,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":273,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .value on an `any` value.","line":273,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":273,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":277,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":277,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8629,8632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8629,8632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":278,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":278,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .parameters on an `any` value.","line":278,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":278,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .forEach on an `any` value.","line":280,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":280,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":280,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":280,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":280,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8793,8796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8793,8796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":281,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":281,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .value on an `any` value.","line":281,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":281,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":282,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":282,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .value on an `any` value.","line":282,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":282,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":286,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":286,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .ports on an `any` value.","line":286,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":286,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":287,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":326,"endColumn":8},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":287,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":287,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":287,"column":12,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":287,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":287,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":287,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9010,9013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9010,9013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .direction on an `any` value.","line":288,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":288,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":289,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":289,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .width on an `any` value.","line":289,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":289,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":294,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":294,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":307,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":307,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":318,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":318,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":329,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10210,10213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10210,10213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":329,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":329,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10216,10219],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10216,10219],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":330,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":330,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .busInterfaces on an `any` value.","line":330,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":330,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bus_interfaces on an `any` value.","line":330,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":330,"endColumn":74},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":335,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":335,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10390,10393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10390,10393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":337,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":337,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .array on an `any` value.","line":337,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":337,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":339,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":339,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .indexStart on an `any` value.","line":340,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":340,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .index_start on an `any` value.","line":340,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":340,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":343,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":346,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .namingPattern on an `any` value.","line":344,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":344,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .naming_pattern on an `any` value.","line":345,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":345,"endColumn":36},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":346,"column":16,"nodeType":"MemberExpression","messageId":"invalidType","endLine":346,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":346,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":346,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":347,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":350,"endColumn":83},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physicalPrefixPattern on an `any` value.","line":348,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":348,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physical_prefix_pattern on an `any` value.","line":349,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":349,"endColumn":45},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":350,"column":16,"nodeType":"LogicalExpression","messageId":"invalidType","endLine":350,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physicalPrefix on an `any` value.","line":350,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":350,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physical_prefix on an `any` value.","line":350,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":350,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":354,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":354,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .mode on an `any` value.","line":355,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":355,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":360,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":361,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useOptionalPorts on an `any` value.","line":361,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":361,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .use_optional_ports on an `any` value.","line":361,"column":41,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":361,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":362,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":363,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .portWidthOverrides on an `any` value.","line":363,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":363,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .port_width_overrides on an `any` value.","line":363,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":363,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":364,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":364,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedClock on an `any` value.","line":364,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":364,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associated_clock on an `any` value.","line":364,"column":56,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":364,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":365,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":365,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedReset on an `any` value.","line":365,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":365,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associated_reset on an `any` value.","line":365,"column":56,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":365,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":370,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":370,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":370,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":370,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":371,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":371,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .mode on an `any` value.","line":372,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":372,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":373,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":374,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physicalPrefix on an `any` value.","line":374,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":374,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physical_prefix on an `any` value.","line":374,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":374,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":375,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":376,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useOptionalPorts on an `any` value.","line":376,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":376,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .use_optional_ports on an `any` value.","line":376,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":376,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":377,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":378,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .portWidthOverrides on an `any` value.","line":378,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":378,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .port_width_overrides on an `any` value.","line":378,"column":41,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":378,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":379,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":379,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedClock on an `any` value.","line":379,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":379,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associated_clock on an `any` value.","line":379,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":379,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":380,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":380,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedReset on an `any` value.","line":380,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":380,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associated_reset on an `any` value.","line":380,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":380,"endColumn":76},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":395,"column":69,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":395,"endColumn":71,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12758,12760],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":396,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":396,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12796,12798],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":406,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":406,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13121,13123],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":413,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":413,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13343,13345],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":420,"column":11,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":420,"endColumn":78,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[13535,13602],"text":"portWidthOverrides?.[logicalName] !== undefined"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":474,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15105,15108],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15105,15108],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":476,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":476,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15146,15149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15146,15149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":477,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":477,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMaps on an `any` value.","line":477,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":477,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memory_maps on an `any` value.","line":477,"column":46,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":477,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .import on an `any` value.","line":482,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":482,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":484,"column":48,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":484,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .import on an `any` value.","line":484,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":484,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":488,"column":9,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":488,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":493,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":493,"endColumn":66},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":497,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":497,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15740,15743],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15740,15743],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":499,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":499,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15781,15784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15781,15784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":501,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":501,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15883,15886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15883,15886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":503,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":503,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15930,15933],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15930,15933],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":507,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":507,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressOffset on an `any` value.","line":507,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":507,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":507,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":507,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":509,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":509,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":509,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":509,"endColumn":31},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":511,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":511,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":511,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":511,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":513,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":513,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":514,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":514,"endColumn":41},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":518,"column":37,"nodeType":"Identifier","messageId":"invalidType","endLine":518,"endColumn":44},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":518,"column":67,"nodeType":"Identifier","messageId":"invalidType","endLine":518,"endColumn":74},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":519,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":519,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16642,16645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16642,16645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":526,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":554,"endColumn":9},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":526,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":526,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":526,"column":22,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":526,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fields on an `any` value.","line":526,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":526,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":526,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16821,16824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16821,16824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":527,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":527,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":527,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":527,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bitOffset on an `any` value.","line":527,"column":45,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":527,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":527,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":527,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":528,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":528,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":528,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":528,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bitWidth on an `any` value.","line":528,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":528,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bitWidth on an `any` value.","line":528,"column":61,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":528,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":531,"column":45,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":531,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bits on an `any` value.","line":531,"column":45,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":531,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":541,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":541,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":541,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":541,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":543,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":544,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":544,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":544,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .resetValue on an `any` value.","line":544,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":544,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset on an `any` value.","line":544,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":544,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":547,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":547,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":547,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":547,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":551,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":551,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":552,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":552,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":552,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":552,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":556,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":556,"endColumn":50},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":558,"column":27,"nodeType":"Identifier","messageId":"invalidType","endLine":558,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":561,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":561,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":561,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":561,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":562,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":562,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":567,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":567,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressBlocks on an `any` value.","line":567,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":567,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_blocks on an `any` value.","line":567,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":567,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .forEach on an `any` value.","line":568,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":568,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":568,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":568,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":568,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":568,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18198,18201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18198,18201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .base_address on an `any` value.","line":570,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":570,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .baseAddress on an `any` value.","line":570,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":570,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":570,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":570,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":572,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":572,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":572,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":572,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .forEach on an `any` value.","line":573,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":573,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":573,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":573,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":573,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":573,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18407,18410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18407,18410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":577,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":577,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":577,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":577,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":577,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":577,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":616,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":616,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19643,19646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19643,19646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .value on an `any` value.","line":617,"column":21,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":617,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":617,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":617,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19681,19684],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19681,19684],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":218,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport * as yaml from \"js-yaml\";\nimport * as vscode from \"vscode\";\nimport { Logger } from \"../utils/Logger\";\nimport { BusLibraryService } from \"../services/BusLibraryService\";\nimport { TemplateLoader } from \"./TemplateLoader\";\nimport { GenerateOptions, GenerateResult } from \"./types\";\n\ntype BusDefinition = {\n  ports?: Array<{\n    name: string;\n    width?: number;\n    direction?: string;\n    presence?: string;\n  }>;\n};\n\ntype BusDefinitions = Record<string, BusDefinition>;\n\nexport class IpCoreScaffolder {\n  private readonly logger: Logger;\n  private readonly templates: TemplateLoader;\n  private readonly busLibraryService: BusLibraryService;\n  private busDefinitions: BusDefinitions | null = null;\n\n  private static readonly BUS_TYPE_MAP: Record<string, string> = {\n    AXI4L: \"axil\",\n    AXI4LITE: \"axil\",\n    AXILITE: \"axil\",\n    AVALONMM: \"avmm\",\n    AVMM: \"avmm\",\n    AVALON_MM: \"avmm\",\n    \"AVALON-MM\": \"avmm\",\n  };\n\n  constructor(\n    logger: Logger,\n    templates: TemplateLoader,\n    context: vscode.ExtensionContext,\n  ) {\n    this.logger = logger;\n    this.templates = templates;\n    this.busLibraryService = new BusLibraryService(logger, context);\n  }\n\n  async generateAll(\n    inputPath: string,\n    outputDir: string,\n    options: GenerateOptions = {},\n  ): Promise<GenerateResult> {\n    try {\n      await this.ensureBusDefinitions();\n      const ipCoreData = await this.loadIpCore(inputPath);\n      const busType = this.getBusType(ipCoreData);\n      const context = await this.buildTemplateContext(\n        ipCoreData,\n        busType,\n        inputPath,\n      );\n      const includeRegs = options.includeRegs !== false;\n      const includeTestbench = options.includeTestbench === true;\n      const vendor = options.vendor || \"both\";\n      const includeVhdl = options.includeVhdl !== false;\n\n      const files: Record<string, string> = {};\n      const name = String(ipCoreData?.vlnv?.name || \"ip_core\").toLowerCase();\n\n      if (includeVhdl) {\n        files[`rtl/${name}_pkg.vhd`] = this.templates.render(\n          \"package.vhdl.j2\",\n          context,\n        );\n        files[`rtl/${name}.vhd`] = this.templates.render(\n          \"top.vhdl.j2\",\n          context,\n        );\n        files[`rtl/${name}_core.vhd`] = this.templates.render(\n          \"core.vhdl.j2\",\n          context,\n        );\n        files[`rtl/${name}_${busType}.vhd`] = this.templates.render(\n          `bus_${busType}.vhdl.j2`,\n          context,\n        );\n      }\n\n      if (includeRegs) {\n        files[`rtl/${name}_regs.vhd`] = this.templates.render(\n          \"register_file.vhdl.j2\",\n          context,\n        );\n      }\n\n      if (includeTestbench) {\n        files[`tb/${name}_test.py`] = this.templates.render(\n          \"cocotb_test.py.j2\",\n          context,\n        );\n        files[\"tb/Makefile\"] = this.templates.render(\n          \"cocotb_makefile.j2\",\n          context,\n        );\n      }\n\n      if (vendor === \"intel\" || vendor === \"both\") {\n        files[`intel/${name}_hw.tcl`] = this.templates.render(\n          \"intel_hw_tcl.j2\",\n          context,\n        );\n      }\n\n      if (vendor === \"xilinx\" || vendor === \"both\") {\n        files[\"xilinx/component.xml\"] = this.templates.render(\n          \"xilinx_component_xml.j2\",\n          context,\n        );\n        const versionStr = String(ipCoreData?.vlnv?.version || \"1.0\").replace(\n          /\\./g,\n          \"_\",\n        );\n        files[`xilinx/xgui/${name}_v${versionStr}.tcl`] = this.templates.render(\n          \"xilinx_xgui.j2\",\n          context,\n        );\n      }\n\n      const written: Record<string, string> = {};\n      await Promise.all(\n        Object.entries(files).map(async ([relativePath, content]) => {\n          const fullPath = path.join(outputDir, relativePath);\n          await fs.mkdir(path.dirname(fullPath), { recursive: true });\n          await fs.writeFile(fullPath, content, \"utf8\");\n          written[relativePath] = fullPath;\n        }),\n      );\n\n      this.logger.info(\"Generated VHDL files\", {\n        count: Object.keys(written).length,\n        busType,\n        outputDir,\n      });\n\n      return {\n        success: true,\n        files: written,\n        count: Object.keys(written).length,\n        busType,\n      };\n    } catch (error) {\n      this.logger.error(\"VHDL generation failed\", error as Error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    }\n  }\n\n  private async ensureBusDefinitions(): Promise<void> {\n    if (this.busDefinitions) {\n      return;\n    }\n    const library = await this.busLibraryService.loadDefaultLibrary();\n    this.busDefinitions = (library || {}) as BusDefinitions;\n  }\n\n  private async loadIpCore(inputPath: string): Promise<any> {\n    const content = await fs.readFile(inputPath, \"utf8\");\n    const parsed = yaml.load(content);\n    if (!parsed || typeof parsed !== \"object\") {\n      throw new Error(\"Invalid IP core YAML\");\n    }\n    return parsed as any;\n  }\n\n  private getBusType(ipCore: any): string {\n    const busInterfaces = ipCore?.busInterfaces || ipCore?.bus_interfaces || [];\n\n    for (const bus of busInterfaces) {\n      const mode = this.getString(bus?.mode);\n      if (mode === \"slave\") {\n        const rawType = this.getString(bus?.type).toUpperCase();\n        return IpCoreScaffolder.BUS_TYPE_MAP[rawType] || \"axil\";\n      }\n    }\n\n    return \"axil\";\n  }\n\n  private async buildTemplateContext(\n    ipCore: any,\n    busType: string,\n    inputPath: string,\n  ): Promise<Record<string, unknown>> {\n    const name = String(ipCore?.vlnv?.name || \"ip_core\").toLowerCase();\n    const registers = await this.prepareRegisters(ipCore, inputPath);\n    const swAccess = new Set([\"read-write\", \"write-only\", \"rw\", \"wo\"]);\n    const hwAccess = new Set([\"read-only\", \"ro\"]);\n\n    const swRegisters = registers.filter((reg) => swAccess.has(reg.access));\n    const hwRegisters = registers.filter((reg) => hwAccess.has(reg.access));\n\n    const clocks = ipCore?.clocks || [];\n    const resets = ipCore?.resets || [];\n    const clockPort = clocks[0]?.name || \"clk\";\n    const resetPort = resets[0]?.name || \"rst\";\n    const resetPolarity = this.getString(resets[0]?.polarity || \"activeHigh\");\n    const resetActiveHigh = resetPolarity.toLowerCase().includes(\"high\");\n\n    const expandedBusInterfaces = this.expandBusInterfaces(ipCore);\n    const busPorts: any[] = [];\n    const secondaryBusPorts: any[] = [];\n    let busPrefix = \"s_axi\";\n\n    if (expandedBusInterfaces.length > 0) {\n      const primary = expandedBusInterfaces[0];\n      busPrefix = this.normalizePrefix(primary.physical_prefix);\n\n      expandedBusInterfaces.forEach((iface, index) => {\n        const busTypeKey = this.normalizeBusTypeKey(iface.type);\n        const activePorts = this.getActiveBusPorts(\n          busTypeKey,\n          iface.use_optional_ports || [],\n          iface.physical_prefix,\n          iface.mode,\n          iface.port_width_overrides || {},\n        );\n        iface.ports = activePorts;\n        if (index === 0) {\n          busPorts.push(...activePorts);\n        } else {\n          secondaryBusPorts.push(...activePorts);\n        }\n      });\n    }\n\n    return {\n      entity_name: name,\n      registers: registers,\n      sw_registers: swRegisters,\n      hw_registers: hwRegisters,\n      generics: this.prepareGenerics(ipCore),\n      user_ports: this.prepareUserPorts(ipCore),\n      bus_type: busType,\n      bus_ports: busPorts,\n      secondary_bus_ports: secondaryBusPorts,\n      expanded_bus_interfaces: expandedBusInterfaces,\n      bus_prefix: expandedBusInterfaces.length > 0 ? busPrefix : \"s_axi\",\n      data_width: 32,\n      addr_width: 8,\n      reg_width: 4,\n      memory_maps: (await this.resolveMemoryMaps(ipCore, inputPath)) ?? [],\n      clock_port: clockPort,\n      reset_port: resetPort,\n      reset_active_high: resetActiveHigh,\n      memmap_relpath: `../../${name}.mm.yml`,\n      vendor: ipCore?.vlnv?.vendor,\n      library: ipCore?.vlnv?.library,\n      version: ipCore?.vlnv?.version,\n      description: ipCore?.description || \"\",\n      author: ipCore?.vlnv?.vendor,\n      display_name: String(ipCore?.vlnv?.name || \"ip_core\")\n        .replace(/_/g, \" \")\n        .replace(/\\b\\w/g, (letter) => letter.toUpperCase()),\n    };\n  }\n\n  private prepareGenerics(ipCore: any): Array<Record<string, unknown>> {\n    const params = ipCore?.parameters || [];\n    return params.map((param: any) => ({\n      name: param.name,\n      type: this.getString(param.data_type || param.dataType),\n      default_value: param.value,\n    }));\n  }\n\n  private prepareUserPorts(ipCore: any): Array<Record<string, unknown>> {\n    const params = ipCore?.parameters || [];\n    const paramDefaults = new Map<string, number>();\n    params.forEach((param: any) => {\n      if (param?.name && param?.value !== undefined) {\n        paramDefaults.set(String(param.name), Number(param.value));\n      }\n    });\n\n    const ports = ipCore?.ports || [];\n    return ports.map((port: any) => {\n      const direction = this.getString(port.direction).toLowerCase();\n      const widthValue = port.width ?? 1;\n      const isParameterized = typeof widthValue === \"string\";\n      if (isParameterized) {\n        const defaultWidth = (paramDefaults.get(widthValue) ?? 32) - 1;\n        return {\n          name: String(port.name).toLowerCase(),\n          direction,\n          type: `std_logic_vector(${widthValue}-1 downto 0)`,\n          width: null,\n          width_expr: widthValue,\n          is_parameterized: true,\n          default_width: defaultWidth,\n        };\n      }\n\n      const width = Number(widthValue);\n      if (width === 1) {\n        return {\n          name: String(port.name).toLowerCase(),\n          direction,\n          type: \"std_logic\",\n          width: 1,\n          width_expr: null,\n          is_parameterized: false,\n          default_width: null,\n        };\n      }\n\n      return {\n        name: String(port.name).toLowerCase(),\n        direction,\n        type: `std_logic_vector(${width - 1} downto 0)`,\n        width,\n        width_expr: null,\n        is_parameterized: false,\n        default_width: null,\n      };\n    });\n  }\n\n  private expandBusInterfaces(ipCore: any): any[] {\n    const busInterfaces = ipCore?.busInterfaces || ipCore?.bus_interfaces || [];\n    if (!Array.isArray(busInterfaces)) {\n      return [];\n    }\n\n    const expanded: any[] = [];\n    for (const iface of busInterfaces) {\n      const arrayDef = iface?.array;\n      if (arrayDef) {\n        const count = Number(arrayDef.count ?? 1);\n        const start = Number(arrayDef.indexStart ?? arrayDef.index_start ?? 0);\n        for (let i = 0; i < count; i += 1) {\n          const idx = start + i;\n          const namePattern =\n            arrayDef.namingPattern ||\n            arrayDef.naming_pattern ||\n            `${iface.name}_{index}`;\n          const prefixPattern =\n            arrayDef.physicalPrefixPattern ||\n            arrayDef.physical_prefix_pattern ||\n            `${iface.physicalPrefix || iface.physical_prefix || \"s_axi_\"}{index}_`;\n\n          expanded.push({\n            name: String(namePattern).replace(\"{index}\", String(idx)),\n            type: this.getString(iface.type),\n            mode: this.getString(iface.mode).toLowerCase(),\n            physical_prefix: String(prefixPattern).replace(\n              \"{index}\",\n              String(idx),\n            ),\n            use_optional_ports:\n              iface.useOptionalPorts || iface.use_optional_ports || [],\n            port_width_overrides:\n              iface.portWidthOverrides || iface.port_width_overrides || {},\n            associated_clock: iface.associatedClock || iface.associated_clock,\n            associated_reset: iface.associatedReset || iface.associated_reset,\n          });\n        }\n      } else {\n        expanded.push({\n          name: iface.name,\n          type: this.getString(iface.type),\n          mode: this.getString(iface.mode).toLowerCase(),\n          physical_prefix:\n            iface.physicalPrefix || iface.physical_prefix || \"s_axi_\",\n          use_optional_ports:\n            iface.useOptionalPorts || iface.use_optional_ports || [],\n          port_width_overrides:\n            iface.portWidthOverrides || iface.port_width_overrides || {},\n          associated_clock: iface.associatedClock || iface.associated_clock,\n          associated_reset: iface.associatedReset || iface.associated_reset,\n        });\n      }\n    }\n\n    return expanded;\n  }\n\n  private getActiveBusPorts(\n    busTypeName: string,\n    useOptionalPorts: string[],\n    physicalPrefix: string,\n    mode: string,\n    portWidthOverrides: Record<string, number>,\n  ): Array<Record<string, unknown>> {\n    const busDef = this.busDefinitions?.[busTypeName.toUpperCase()] || {};\n    const ports = busDef.ports || [];\n    const optionalSet = new Set(useOptionalPorts || []);\n    const activePorts: Array<Record<string, unknown>> = [];\n\n    ports.forEach((port) => {\n      const logicalName = port.name;\n      if ([\"ACLK\", \"ARESETn\", \"clk\", \"reset\"].includes(logicalName)) {\n        return;\n      }\n\n      const presence = port.presence || \"required\";\n      const isRequired = presence === \"required\";\n      const isSelected = optionalSet.has(logicalName);\n      if (!isRequired && !isSelected) {\n        return;\n      }\n\n      let direction = port.direction || \"in\";\n      if (mode === \"slave\") {\n        direction =\n          direction === \"out\" ? \"in\" : direction === \"in\" ? \"out\" : direction;\n      }\n\n      let width = port.width ?? 1;\n      if (portWidthOverrides && portWidthOverrides[logicalName] !== undefined) {\n        width = portWidthOverrides[logicalName];\n      }\n\n      activePorts.push({\n        logical_name: logicalName,\n        name: `${physicalPrefix}${logicalName.toLowerCase()}`,\n        direction,\n        width,\n        type: this.getVhdlPortType(Number(width), logicalName),\n      });\n    });\n\n    return activePorts;\n  }\n\n  private getVhdlPortType(width: number, logicalName: string): string {\n    if ([\"AWADDR\", \"ARADDR\", \"address\"].includes(logicalName)) {\n      return \"std_logic_vector(C_ADDR_WIDTH-1 downto 0)\";\n    }\n    if ([\"WDATA\", \"RDATA\", \"writedata\", \"readdata\"].includes(logicalName)) {\n      return \"std_logic_vector(C_DATA_WIDTH-1 downto 0)\";\n    }\n    if (logicalName === \"WSTRB\") {\n      return \"std_logic_vector((C_DATA_WIDTH/8)-1 downto 0)\";\n    }\n    if (width === 1) {\n      return \"std_logic\";\n    }\n    return `std_logic_vector(${width - 1} downto 0)`;\n  }\n\n  private normalizeBusTypeKey(typeName: string): string {\n    let key = typeName.toUpperCase();\n    if ([\"AXIL\", \"AXI4-LITE\", \"AXI4LITE\"].includes(key)) {\n      key = \"AXI4L\";\n    } else if ([\"AVMM\", \"AVALON-MM\"].includes(key)) {\n      key = \"AVALON_MM\";\n    } else if (key === \"AXIS\") {\n      key = \"AXIS\";\n    } else if (key === \"AVALON_ST\") {\n      key = \"AVALON_ST\";\n    }\n    return key;\n  }\n\n  private normalizePrefix(prefix: string): string {\n    if (!prefix) {\n      return \"s_axi\";\n    }\n    return prefix.endsWith(\"_\") ? prefix.slice(0, -1) : prefix;\n  }\n\n  private async resolveMemoryMaps(\n    ipCore: any,\n    inputPath: string,\n  ): Promise<any[]> {\n    const memoryMaps = ipCore?.memoryMaps || ipCore?.memory_maps;\n    if (!memoryMaps) {\n      return [];\n    }\n\n    if (memoryMaps.import) {\n      const baseDir = path.dirname(inputPath);\n      const importPath = path.resolve(baseDir, memoryMaps.import);\n      const content = await fs.readFile(importPath, \"utf8\");\n      const parsed = yaml.load(content);\n      if (Array.isArray(parsed)) {\n        return parsed;\n      }\n      return parsed ? [parsed] : [];\n    }\n\n    return Array.isArray(memoryMaps) ? memoryMaps : [memoryMaps];\n  }\n\n  private async prepareRegisters(\n    ipCore: any,\n    inputPath: string,\n  ): Promise<any[]> {\n    const memoryMaps = await this.resolveMemoryMaps(ipCore, inputPath);\n    const registers: any[] = [];\n\n    const processRegister = (reg: any, baseOffset: number, prefix: string) => {\n      const currentOffset =\n        baseOffset +\n        this.parseNumber(\n          reg.address_offset ?? reg.addressOffset ?? reg.offset ?? 0,\n        );\n      const regName = reg.name || \"REG\";\n\n      const nestedRegs = reg.registers || [];\n      if (Array.isArray(nestedRegs) && nestedRegs.length > 0) {\n        const count = Number(reg.count ?? 1) || 1;\n        const stride = Number(reg.stride ?? 0) || 0;\n        for (let i = 0; i < count; i += 1) {\n          const instanceOffset = currentOffset + i * stride;\n          const instancePrefix =\n            count > 1 ? `${prefix}${regName}_${i}_` : `${prefix}${regName}_`;\n          nestedRegs.forEach((child: any) => {\n            processRegister(child, instanceOffset, instancePrefix);\n          });\n        }\n        return;\n      }\n\n      const fields = (reg.fields || []).map((field: any) => {\n        let bitOffset = field.bit_offset ?? field.bitOffset ?? field.bit_range;\n        let bitWidth = field.bit_width ?? field.bitWidth ?? field.bitWidth;\n\n        if (bitOffset === undefined || bitWidth === undefined) {\n          const parsedBits = this.parseBits(field.bits || \"\");\n          if (bitOffset === undefined) {\n            bitOffset = parsedBits.offset;\n          }\n          if (bitWidth === undefined) {\n            bitWidth = parsedBits.width;\n          }\n        }\n\n        const access = this.getString(\n          field.access || reg.access || \"read-write\",\n        );\n        const resetValue =\n          field.reset_value ?? field.resetValue ?? field.reset ?? 0;\n\n        return {\n          name: field.name,\n          offset: Number(bitOffset ?? 0),\n          width: Number(bitWidth ?? 1),\n          access: access.toLowerCase(),\n          reset_value: resetValue,\n          description: field.description || \"\",\n        };\n      });\n\n      const regAccess = this.getString(reg.access || \"read-write\");\n      registers.push({\n        name: `${prefix}${regName}`,\n        offset: currentOffset,\n        access: regAccess.toLowerCase(),\n        description: reg.description || \"\",\n        fields,\n      });\n    };\n\n    memoryMaps.forEach((map) => {\n      const blocks = map.addressBlocks || map.address_blocks || [];\n      blocks.forEach((block: any) => {\n        const baseOffset = this.parseNumber(\n          block.base_address ?? block.baseAddress ?? block.offset ?? 0,\n        );\n        const regs = block.registers || [];\n        regs.forEach((reg: any) => processRegister(reg, baseOffset, \"\"));\n      });\n    });\n\n    return registers.sort((a, b) => a.offset - b.offset);\n  }\n\n  private parseBits(bits: string): { offset: number; width: number } {\n    if (!bits || typeof bits !== \"string\") {\n      return { offset: 0, width: 1 };\n    }\n    const range = bits.match(/\\[(\\d+):(\\d+)\\]/);\n    if (range) {\n      const high = Number(range[1]);\n      const low = Number(range[2]);\n      return { offset: Math.min(low, high), width: Math.abs(high - low) + 1 };\n    }\n    const single = bits.match(/\\[(\\d+)\\]/);\n    if (single) {\n      const bit = Number(single[1]);\n      return { offset: bit, width: 1 };\n    }\n    return { offset: 0, width: 1 };\n  }\n\n  private parseNumber(value: unknown): number {\n    if (typeof value === \"number\" && Number.isFinite(value)) {\n      return value;\n    }\n    if (typeof value === \"string\") {\n      const parsed = Number.parseInt(value, 0);\n      return Number.isFinite(parsed) ? parsed : 0;\n    }\n    return 0;\n  }\n\n  private getString(value: unknown): string {\n    if (value === null || value === undefined) {\n      return \"\";\n    }\n    if (typeof value === \"string\") {\n      return value;\n    }\n    if (typeof value === \"object\" && \"value\" in (value as any)) {\n      return String((value as any).value);\n    }\n    return String(value);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/generator/TemplateLoader.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":14,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":14,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[446,448],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":69,"column":9,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":83,"endColumn":12},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":88,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":88,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from \"fs\";\nimport * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport * as nunjucks from \"nunjucks\";\nimport { Logger } from \"../utils/Logger\";\n\nexport class TemplateLoader {\n  private readonly logger: Logger;\n  private readonly env: nunjucks.Environment;\n  private readonly templatesPath: string;\n\n  constructor(logger: Logger, templatesPath?: string) {\n    this.logger = logger;\n    this.templatesPath = templatesPath || TemplateLoader.resolveTemplatesPath();\n\n    this.env = new nunjucks.Environment(\n      new nunjucks.FileSystemLoader(this.templatesPath, { noCache: true }),\n      {\n        autoescape: false,\n        trimBlocks: true,\n        lstripBlocks: true,\n      },\n    );\n\n    this.env.addFilter(\"format\", (format: string, value: unknown) => {\n      if (typeof format !== \"string\") {\n        return String(value ?? \"\");\n      }\n      const match = format.match(/%(-)?(0)?(\\d+)?([sXx])/);\n      if (!match) {\n        return String(value ?? \"\");\n      }\n      const leftAlign = Boolean(match[1]);\n      const zeroPad = Boolean(match[2]);\n      const width = match[3] ? Number.parseInt(match[3], 10) : 0;\n      const type = match[4];\n\n      let rendered = \"\";\n      if (type === \"s\") {\n        rendered = String(value ?? \"\");\n      } else if (type === \"X\" || type === \"x\") {\n        const num = Number(value ?? 0);\n        rendered = Number.isFinite(num) ? Math.trunc(num).toString(16) : \"0\";\n        if (type === \"X\") {\n          rendered = rendered.toUpperCase();\n        }\n      }\n\n      if (width > 0 && rendered.length < width) {\n        const padChar = zeroPad && !leftAlign ? \"0\" : \" \";\n        const padding = padChar.repeat(width - rendered.length);\n        rendered = leftAlign\n          ? `${rendered}${padding}`\n          : `${padding}${rendered}`;\n      }\n\n      return rendered;\n    });\n\n    this.env.addFilter(\n      \"selectattr\",\n      (\n        items: unknown,\n        attribute: string,\n        operator: string,\n        compare: unknown,\n      ) => {\n        const list = Array.isArray(items) ? items : [];\n        return list.filter((item) => {\n          const value =\n            item && typeof item === \"object\"\n              ? (item as Record<string, unknown>)[attribute]\n              : undefined;\n          if (operator === \"equalto\") {\n            return value === compare;\n          }\n          if (operator === \"in\") {\n            return Array.isArray(compare)\n              ? compare.includes(value as never)\n              : false;\n          }\n          return false;\n        });\n      },\n    );\n\n    this.env.addFilter(\"list\", (items: unknown) => {\n      return Array.isArray(items) ? items : [];\n    });\n\n    this.logger.info(`Template loader using ${this.templatesPath}`);\n  }\n\n  static resolveTemplatesPath(): string {\n    const workspaceRoot = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n    const candidates = [path.join(__dirname, \"templates\")].filter(\n      Boolean,\n    ) ;\n\n    for (const candidate of candidates) {\n      if (fs.existsSync(candidate)) {\n        return candidate;\n      }\n    }\n\n    return workspaceRoot ? workspaceRoot : process.cwd();\n  }\n\n  getTemplatesPath(): string {\n    return this.templatesPath;\n  }\n\n  render(templateName: string, context: Record<string, unknown>): string {\n    return this.env.render(templateName, context);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/generator/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/parser/VhdlParser.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":64,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":64,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1683,1685],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":65,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":65,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1727,1729],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":67,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":67,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1795,1797],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":153,"column":11,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":153,"endColumn":45,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[3962,3996],"text":"!cleaned?.includes(\":\")"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":184,"column":11,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":184,"endColumn":45,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4781,4815],"text":"!cleaned?.includes(\":\")"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":363,"column":9,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":363,"endColumn":38,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[9364,9393],"text":"!selected?.prefix"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport * as yaml from \"js-yaml\";\n\nexport interface ParsedPort {\n  name: string;\n  direction: string;\n  type: string;\n  width?: number | string;\n}\n\nexport interface ParsedParameter {\n  name: string;\n  type: string;\n  value?: string;\n}\n\nexport interface ParseOptions {\n  vendor?: string;\n  library?: string;\n  version?: string;\n  detectBus?: boolean;\n}\n\nexport interface ParseResult {\n  entityName: string;\n  yamlText: string;\n  outputPath?: string;\n}\n\nexport class VhdlParser {\n  async parseFile(\n    vhdlPath: string,\n    options: ParseOptions = {},\n  ): Promise<ParseResult> {\n    const content = await fs.readFile(vhdlPath, \"utf8\");\n    const cleaned = this.stripComments(content);\n\n    const entityName = this.extractEntityName(cleaned);\n    if (!entityName) {\n      throw new Error(\"No VHDL entity found in file\");\n    }\n\n    const parameters = this.extractParameters(cleaned);\n    const ports = this.extractPorts(cleaned);\n\n    const detectBus = options.detectBus !== false;\n    const busDetection = detectBus ? this.detectBusInterfaces(ports) : null;\n\n    const clockReset = this.classifyClocksResets(ports);\n\n    const excludedNames = new Set<string>();\n    if (busDetection) {\n      busDetection.busPortNames.forEach((name) => excludedNames.add(name));\n    }\n    clockReset.clocks.forEach((clock) => excludedNames.add(clock.name));\n    clockReset.resets.forEach((reset) => excludedNames.add(reset.name));\n\n    const userPorts = ports.filter((port) => !excludedNames.has(port.name));\n\n    const yamlData: Record<string, unknown> = {\n      apiVersion: \"ipcore/v1.0\",\n      vlnv: {\n        vendor: options.vendor || \"user\",\n        library: options.library || \"ip\",\n        name: entityName,\n        version: options.version || \"1.0\",\n      },\n      description: `Generated from ${path.basename(vhdlPath)}`,\n    };\n\n    if (clockReset.clocks.length > 0) {\n      yamlData.clocks = clockReset.clocks.map((clock) => ({\n        name: clock.name,\n        description: \"\",\n      }));\n    }\n\n    if (clockReset.resets.length > 0) {\n      yamlData.resets = clockReset.resets.map((reset) => ({\n        name: reset.name,\n        polarity: reset.polarity,\n        description: \"\",\n      }));\n    }\n\n    if (userPorts.length > 0) {\n      yamlData.ports = userPorts.map((port) => this.portToDict(port));\n    }\n\n    if (busDetection && busDetection.busInterfaces.length > 0) {\n      yamlData.busInterfaces = busDetection.busInterfaces.map((bus) => ({\n        name: bus.name,\n        type: bus.type,\n        mode: bus.mode,\n        physicalPrefix: bus.physicalPrefix,\n        description: \"\",\n      }));\n    }\n\n    if (parameters.length > 0) {\n      yamlData.parameters = parameters.map((param) => ({\n        name: param.name,\n        value: this.parseParameterValue(param.value),\n        dataType: param.type.toLowerCase(),\n      }));\n    }\n\n    yamlData.fileSets = [\n      {\n        name: \"RTL_Sources\",\n        description: \"RTL source files\",\n        files: [{ path: path.basename(vhdlPath), type: \"vhdl\" }],\n      },\n    ];\n\n    const yamlText = yaml.dump(yamlData, {\n      noRefs: true,\n      sortKeys: false,\n      lineWidth: -1,\n      indent: 2,\n    });\n\n    return {\n      entityName,\n      yamlText,\n    };\n  }\n\n  private stripComments(content: string): string {\n    return content\n      .split(\"\\n\")\n      .map((line) => line.replace(/--.*$/, \"\"))\n      .join(\"\\n\");\n  }\n\n  private extractEntityName(content: string): string | null {\n    const match = content.match(/\\bentity\\s+(\\w+)\\s+is\\b/i);\n    return match ? match[1] : null;\n  }\n\n  private extractParameters(content: string): ParsedParameter[] {\n    const body = this.extractBlockContent(content, \"generic\");\n    if (!body) {\n      return [];\n    }\n\n    const entries = this.splitEntries(body);\n    const params: ParsedParameter[] = [];\n\n    for (const entry of entries) {\n      const cleaned = entry.replace(/\\s+/g, \" \").trim();\n      if (!cleaned || !cleaned.includes(\":\")) {\n        continue;\n      }\n      const [namesPart, typePart] = cleaned.split(\":\");\n      const names = namesPart\n        .split(\",\")\n        .map((name) => name.trim())\n        .filter(Boolean);\n      const typeMatch = typePart.split(\":=\");\n      const type = typeMatch[0].trim();\n      const value = typeMatch[1]?.trim();\n\n      names.forEach((name) => {\n        params.push({ name, type, value });\n      });\n    }\n\n    return params;\n  }\n\n  private extractPorts(content: string): ParsedPort[] {\n    const body = this.extractBlockContent(content, \"port\");\n    if (!body) {\n      return [];\n    }\n\n    const entries = this.splitEntries(body);\n    const ports: ParsedPort[] = [];\n\n    for (const entry of entries) {\n      const cleaned = entry.replace(/\\s+/g, \" \").trim();\n      if (!cleaned || !cleaned.includes(\":\")) {\n        continue;\n      }\n      const [namesPart, typePart] = cleaned.split(\":\");\n      const names = namesPart\n        .split(\",\")\n        .map((name) => name.trim())\n        .filter(Boolean);\n      const dirMatch = typePart.trim().match(/^(in|out|inout)\\s+(.+)$/i);\n      if (!dirMatch) {\n        continue;\n      }\n      const direction = dirMatch[1].toLowerCase();\n      const type = dirMatch[2].trim();\n      const width = this.extractWidthFromType(type);\n\n      names.forEach((name) => {\n        ports.push({ name, direction, type, width });\n      });\n    }\n\n    return ports;\n  }\n\n  private extractWidthFromType(type: string): number | string | undefined {\n    if (/\\bstd_logic\\b/i.test(type)) {\n      if (/std_logic_vector/i.test(type)) {\n        const rangeMatch = type.match(/\\(([^)]+)\\)/);\n        if (!rangeMatch) {\n          return undefined;\n        }\n        const range = rangeMatch[1];\n        const numericMatch = range.match(/(\\d+)\\s+downto\\s+(\\d+)/i);\n        if (numericMatch) {\n          const high = Number(numericMatch[1]);\n          const low = Number(numericMatch[2]);\n          return Math.abs(high - low) + 1;\n        }\n\n        const paramMatch = range.match(/(\\w+)\\s*-\\s*1\\s+downto\\s+0/i);\n        if (paramMatch) {\n          return paramMatch[1];\n        }\n      }\n      return 1;\n    }\n\n    return undefined;\n  }\n\n  private portToDict(port: ParsedPort): Record<string, unknown> {\n    let logicalName = port.name.toUpperCase();\n    [\"I_\", \"O_\", \"IO_\"].forEach((prefix) => {\n      if (logicalName.startsWith(prefix)) {\n        logicalName = logicalName.slice(prefix.length);\n      }\n    });\n\n    const result: Record<string, unknown> = {\n      name: port.name,\n      logicalName,\n      direction: port.direction,\n    };\n\n    if (port.width !== undefined) {\n      if (typeof port.width === \"number\") {\n        if (port.width > 1) {\n          result.width = port.width;\n        }\n      } else {\n        result.width = port.width;\n      }\n    }\n\n    return result;\n  }\n\n  private parseParameterValue(value?: string): unknown {\n    if (value === undefined) {\n      return undefined;\n    }\n    const trimmed = value.trim();\n    if (!trimmed) {\n      return undefined;\n    }\n    const numeric = Number(trimmed);\n    if (Number.isFinite(numeric)) {\n      return numeric;\n    }\n    return trimmed;\n  }\n\n  private classifyClocksResets(ports: ParsedPort[]): {\n    clocks: Array<{ name: string }>;\n    resets: Array<{ name: string; polarity: string }>;\n  } {\n    const clocks: Array<{ name: string }> = [];\n    const resets: Array<{ name: string; polarity: string }> = [];\n\n    ports.forEach((port) => {\n      const name = port.name.toLowerCase();\n      if (port.direction !== \"in\") {\n        return;\n      }\n      if (/(^|_)(clk|clock|aclk)$/.test(name)) {\n        clocks.push({ name: port.name });\n        return;\n      }\n      if (/(^|_)(rst|reset|aresetn|reset_n|rst_n)$/.test(name)) {\n        const activeLow =\n          name.endsWith(\"n\") ||\n          name.includes(\"reset_n\") ||\n          name.includes(\"rst_n\");\n        resets.push({\n          name: port.name,\n          polarity: activeLow ? \"activeLow\" : \"activeHigh\",\n        });\n      }\n    });\n\n    return { clocks, resets };\n  }\n\n  private detectBusInterfaces(ports: ParsedPort[]): {\n    busInterfaces: Array<{\n      name: string;\n      type: string;\n      mode: string;\n      physicalPrefix: string;\n    }>;\n    busPortNames: Set<string>;\n  } {\n    const lowerPorts = ports.map((port) => port.name.toLowerCase());\n    const axiSignals = [\n      \"awaddr\",\n      \"awvalid\",\n      \"awready\",\n      \"wdata\",\n      \"wstrb\",\n      \"wvalid\",\n      \"wready\",\n      \"bresp\",\n      \"bvalid\",\n      \"bready\",\n      \"araddr\",\n      \"arvalid\",\n      \"arready\",\n      \"rdata\",\n      \"rresp\",\n      \"rvalid\",\n      \"rready\",\n    ];\n    const avalonSignals = [\"address\", \"read\", \"write\", \"writedata\", \"readdata\"];\n\n    const axiMatch = this.findBestPrefix(lowerPorts, axiSignals);\n    const avalonMatch = this.findBestPrefix(lowerPorts, avalonSignals);\n\n    let selected: {\n      prefix: string;\n      count: number;\n      type: \"AXI4L\" | \"AVALON_MM\";\n    } | null = null;\n\n    if (axiMatch.count >= 4 || avalonMatch.count >= 3) {\n      if (axiMatch.count >= avalonMatch.count) {\n        selected = {\n          prefix: axiMatch.prefix,\n          count: axiMatch.count,\n          type: \"AXI4L\",\n        };\n      } else {\n        selected = {\n          prefix: avalonMatch.prefix,\n          count: avalonMatch.count,\n          type: \"AVALON_MM\",\n        };\n      }\n    }\n\n    if (!selected || !selected.prefix) {\n      return { busInterfaces: [], busPortNames: new Set() };\n    }\n\n    const physicalPrefix = selected.prefix;\n    const busName = physicalPrefix.replace(/_+$/, \"\") || \"bus\";\n    const busPortNames = new Set<string>();\n    ports.forEach((port) => {\n      if (port.name.toLowerCase().startsWith(physicalPrefix)) {\n        busPortNames.add(port.name);\n      }\n    });\n\n    return {\n      busInterfaces: [\n        {\n          name: busName,\n          type: selected.type,\n          mode: \"slave\",\n          physicalPrefix: physicalPrefix,\n        },\n      ],\n      busPortNames,\n    };\n  }\n\n  private findBestPrefix(\n    ports: string[],\n    signals: string[],\n  ): { prefix: string; count: number } {\n    const counts = new Map<string, number>();\n    ports.forEach((name) => {\n      signals.forEach((signal) => {\n        if (name.endsWith(signal)) {\n          const prefix = name.slice(0, name.length - signal.length);\n          counts.set(prefix, (counts.get(prefix) ?? 0) + 1);\n        }\n      });\n    });\n\n    let bestPrefix = \"\";\n    let bestCount = 0;\n    counts.forEach((count, prefix) => {\n      if (count > bestCount) {\n        bestCount = count;\n        bestPrefix = prefix;\n      }\n    });\n\n    return { prefix: bestPrefix, count: bestCount };\n  }\n\n  private extractBlockContent(content: string, keyword: string): string | null {\n    const match = content.match(new RegExp(`\\\\b${keyword}\\\\b`, \"i\"));\n    if (!match || match.index === undefined) {\n      return null;\n    }\n\n    const startIndex = content.indexOf(\"(\", match.index);\n    if (startIndex === -1) {\n      return null;\n    }\n\n    let depth = 0;\n    for (let i = startIndex; i < content.length; i += 1) {\n      const char = content[i];\n      if (char === \"(\") {\n        depth += 1;\n      } else if (char === \")\") {\n        depth -= 1;\n        if (depth === 0) {\n          return content.slice(startIndex + 1, i);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  private splitEntries(body: string): string[] {\n    const entries: string[] = [];\n    let depth = 0;\n    let current = \"\";\n\n    for (let i = 0; i < body.length; i += 1) {\n      const char = body[i];\n      if (char === \"(\") {\n        depth += 1;\n      } else if (char === \")\") {\n        depth = Math.max(0, depth - 1);\n      }\n\n      if (char === \";\" && depth === 0) {\n        const trimmed = current.trim();\n        if (trimmed) {\n          entries.push(trimmed);\n        }\n        current = \"\";\n      } else {\n        current += char;\n      }\n    }\n\n    const trimmed = current.trim();\n    if (trimmed) {\n      entries.push(trimmed);\n    }\n\n    return entries;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/providers/IpCoreEditorProvider.ts","messages":[{"ruleId":"@typescript-eslint/require-await","severity":2,"message":"Async method 'isIpCoreDocument' has no 'await' expression.","line":45,"column":3,"nodeType":"FunctionExpression","messageId":"missingAwait","endLine":45,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":57,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":57,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2097,2100],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2097,2100],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .apiVersion on an `any` value.","line":61,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":61,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .apiVersion on an `any` value.","line":62,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":62,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":63,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":63,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6035,6038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6035,6038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":192,"column":9,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":192,"endColumn":51,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[6823,6823],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":217,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":217,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":221,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":221,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":225,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":225,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .multi on an `any` value.","line":225,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":225,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .multi on an `any` value.","line":225,"column":56,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":225,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":229,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":229,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .filters on an `any` value.","line":229,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":229,"endColumn":35},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":242,"column":11,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":245,"endColumn":14,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[8705,8705],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":248,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":248,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":251,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":251,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .paths on an `any` value.","line":251,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":251,"endColumn":50},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":267,"column":9,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":270,"endColumn":12,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[9590,9590],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":272,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":272,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .options on an `any` value.","line":274,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":274,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":279,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":279,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":279,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10134,10137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10134,10137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":280,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":280,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":280,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":280,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":280,"column":26,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":280,"endColumn":57},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":293,"column":13,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":297,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[10719,10719],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":302,"column":65,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":302,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":313,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":313,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .options on an `any` value.","line":313,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":313,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .options on an `any` value.","line":314,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":314,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .options on an `any` value.","line":315,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":315,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .options on an `any` value.","line":316,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":316,"endColumn":43},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":322,"column":13,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":326,"endColumn":16,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[11728,11728],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":325,"column":35,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":325,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11865,11867],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":337,"column":11,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":341,"endColumn":14,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[12212,12212],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":391,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":391,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":392,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":392,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":392,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":392,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .file_sets on an `any` value.","line":392,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":392,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":393,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":393,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .file_sets on an `any` value.","line":395,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":395,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":411,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":413,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .findIndex on an `any` value.","line":411,"column":36,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":411,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":411,"column":36,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":411,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":412,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":412,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14816,14819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14816,14819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":412,"column":30,"nodeType":"LogicalExpression","messageId":"unsafeReturn","endLine":412,"endColumn":73},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":412,"column":30,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":412,"endColumn":43,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[14824,14837],"text":"fs?.name"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":412,"column":36,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":412,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":412,"column":65,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":412,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":412,"column":65,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":412,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .push on an `any` value.","line":418,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":418,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":418,"column":17,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":418,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":423,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":423,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":425,"column":17,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":425,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":425,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":425,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":425,"column":37,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":425,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":428,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":428,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":428,"column":29,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":428,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":429,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":429,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":429,"column":26,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":429,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":431,"column":21,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":431,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [targetSetIndex] on an `any` value.","line":431,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":431,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [targetSetIndex] resolves to an any value.","line":431,"column":46,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":431,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":434,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":436,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .some on an `any` value.","line":434,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":434,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":434,"column":32,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":434,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":435,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":435,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15600,15603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15600,15603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .path on an `any` value.","line":435,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":435,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .push on an `any` value.","line":438,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":438,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":438,"column":19,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":438,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":486,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":486,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17259,17262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17259,17262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error | undefined`.","line":487,"column":59,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":487,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":489,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":489,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17364,17367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17364,17367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error | undefined`.","line":490,"column":50,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":490,"endColumn":55},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":491,"column":11,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":495,"endColumn":14,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[17438,17438],"text":"void "},"desc":"Add void operator to ignore."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":494,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":494,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .message on an `any` value.","line":494,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":494,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `WebviewMessage`.","line":498,"column":48,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":498,"endColumn":55}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":72,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as jsyaml from \"js-yaml\";\nimport * as YAML from \"yaml\";\nimport { Logger } from \"../utils/Logger\";\nimport { HtmlGenerator } from \"../services/HtmlGenerator\";\nimport { MessageHandler } from \"../services/MessageHandler\";\nimport { YamlValidator } from \"../services/YamlValidator\";\nimport { DocumentManager } from \"../services/DocumentManager\";\nimport { ImportResolver } from \"../services/ImportResolver\";\nimport { TemplateLoader } from \"../generator/TemplateLoader\";\nimport { IpCoreScaffolder } from \"../generator/IpCoreScaffolder\";\n\n/**\n * Custom editor provider for FPGA IP core YAML files.\n *\n * Detects IP core files by checking for required keys: apiVersion + vlnv\n */\nexport class IpCoreEditorProvider implements vscode.CustomTextEditorProvider {\n  private readonly logger = new Logger(\"IpCoreEditorProvider\");\n  private readonly htmlGenerator: HtmlGenerator;\n  private readonly messageHandler: MessageHandler;\n  private readonly documentManager: DocumentManager;\n  private readonly importResolver: ImportResolver;\n\n  constructor(private readonly context: vscode.ExtensionContext) {\n    this.htmlGenerator = new HtmlGenerator(context);\n    this.documentManager = new DocumentManager();\n    const yamlValidator = new YamlValidator();\n    this.messageHandler = new MessageHandler(\n      yamlValidator,\n      this.documentManager,\n    );\n    this.importResolver = new ImportResolver(this.logger, context);\n\n    this.logger.info(\"IpCoreEditorProvider initialized\");\n  }\n\n  /**\n   * Check if a document is an IP core YAML file.\n   *\n   * Detection strategy: Check for required keys (apiVersion + vlnv)\n   * This allows *.yml files to work while avoiding false positives.\n   */\n  private async isIpCoreDocument(\n    document: vscode.TextDocument,\n  ): Promise<boolean> {\n    try {\n      const text = document.getText();\n      const parsed = jsyaml.load(text);\n\n      if (!parsed || typeof parsed !== \"object\") {\n        return false;\n      }\n\n      // Check for IP core signature: apiVersion + vlnv\n      const data = parsed as any;\n      // apiVersion can be string or number (YAML parses \"1.0\" as number)\n      const hasApiVersion =\n        \"apiVersion\" in data &&\n        (typeof data.apiVersion === \"string\" ||\n          typeof data.apiVersion === \"number\");\n      const hasVlnv = \"vlnv\" in data && typeof data.vlnv === \"object\";\n\n      return hasApiVersion && hasVlnv;\n    } catch (error) {\n      // YAML parse error - not a valid IP core file\n      return false;\n    }\n  }\n\n  /**\n   * Resolve the custom text editor for a document.\n   */\n  public async resolveCustomTextEditor(\n    document: vscode.TextDocument,\n    webviewPanel: vscode.WebviewPanel,\n    _token: vscode.CancellationToken,\n  ): Promise<void> {\n    this.logger.info(\n      \"Resolving custom text editor for document\",\n      document.uri.toString(),\n    );\n\n    // Check if this is actually an IP core file\n    const isIpCore = await this.isIpCoreDocument(document);\n    if (!isIpCore) {\n      this.logger.info(\n        \"Document is not an IP core file, showing error in webview\",\n      );\n      // Show error in webview instead of disposing - disposing causes VS Code state issues\n      webviewPanel.webview.options = { enableScripts: false };\n      webviewPanel.webview.html = `\n                <!DOCTYPE html>\n                <html lang=\"en\">\n                <head>\n                    <meta charset=\"UTF-8\">\n                    <style>\n                        body {\n                            font-family: var(--vscode-font-family);\n                            padding: 20px;\n                            color: var(--vscode-foreground);\n                            background: var(--vscode-editor-background);\n                        }\n                        .error-container {\n                            display: flex;\n                            flex-direction: column;\n                            align-items: center;\n                            justify-content: center;\n                            height: 80vh;\n                            text-align: center;\n                        }\n                        .error-icon { font-size: 48px; margin-bottom: 16px; }\n                        .error-title { font-size: 18px; font-weight: bold; margin-bottom: 8px; }\n                        .error-message { opacity: 0.7; }\n                    </style>\n                </head>\n                <body>\n                    <div class=\"error-container\">\n                        <div class=\"error-icon\">⚠️</div>\n                        <div class=\"error-title\">Not an IP Core File</div>\n                        <div class=\"error-message\">\n                            This file does not appear to be an IP core YAML file.<br>\n                            Expected: <code>apiVersion</code> and <code>vlnv</code> fields.\n                        </div>\n                    </div>\n                </body>\n                </html>\n            `;\n      return;\n    }\n\n    this.logger.info(\"Document is an IP core file\");\n\n    // Configure webview\n    webviewPanel.webview.options = {\n      enableScripts: true,\n    };\n\n    // Set HTML content - use ipcore-specific HTML\n    webviewPanel.webview.html = this.htmlGenerator.generateIpCoreHtml(\n      webviewPanel.webview,\n    );\n\n    // Track if webview is disposed\n    let isDisposed = false;\n\n    // Send initial update to webview with resolved imports\n    const updateWebview = async () => {\n      if (isDisposed) {\n        this.logger.debug(\"Webview already disposed, skipping update\");\n        return;\n      }\n      try {\n        this.logger.debug(\"updateWebview called\");\n        const text = document.getText();\n        this.logger.debug(`Document text length: ${text.length}`);\n        const parsed = jsyaml.load(text);\n        this.logger.debug(\"YAML parsed successfully\");\n\n        // Resolve imports\n        const baseDir = path.dirname(document.uri.fsPath);\n        const imports = await this.importResolver.resolveImports(\n          parsed as any,\n          baseDir,\n        );\n        this.logger.debug(\n          `Imports resolved: ${Object.keys(imports).length} items`,\n        );\n\n        // Check again after async operation\n        if (isDisposed) {\n          this.logger.debug(\n            \"Webview disposed during import resolution, skipping update\",\n          );\n          return;\n        }\n\n        // Send to webview\n        const message = {\n          type: \"update\",\n          text: text,\n          fileName: path.basename(document.uri.fsPath),\n          imports: imports,\n        };\n        this.logger.info(\"Posting message to webview:\", {\n          type: message.type,\n          fileName: message.fileName,\n          textLength: text.length,\n          importsCount: Object.keys(imports).length,\n        });\n        webviewPanel.webview.postMessage(message);\n        this.logger.debug(\"Message posted successfully\");\n      } catch (error) {\n        this.logger.error(\"Failed to update webview\", error as Error);\n      }\n    };\n\n    // Listen for document changes\n    const changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument(\n      (e) => {\n        if (e.document.uri.toString() === document.uri.toString()) {\n          void updateWebview();\n        }\n      },\n    );\n\n    // Clean up subscriptions when webview is disposed\n    webviewPanel.onDidDispose(() => {\n      isDisposed = true;\n      changeDocumentSubscription.dispose();\n      this.logger.debug(\"Webview panel disposed\");\n    });\n\n    // Handle messages from the webview\n    webviewPanel.webview.onDidReceiveMessage(async (message) => {\n      if (message.type === \"ready\") {\n        // Webview is ready, send initial update\n        this.logger.info(\"Webview ready, sending initial update\");\n        void updateWebview();\n      } else if (message.type === \"selectFiles\") {\n        // Handle file selection dialog\n        this.logger.info(\"Opening file picker dialog\");\n        const options: vscode.OpenDialogOptions = {\n          canSelectMany: message.multi !== undefined ? message.multi : true,\n          openLabel: \"Select Files\",\n          canSelectFiles: true,\n          canSelectFolders: false,\n          filters: message.filters, // Support file filters\n        };\n\n        const fileUris = await vscode.window.showOpenDialog(options);\n        if (fileUris && fileUris.length > 0) {\n          // Get relative paths from the document directory\n          const baseDir = path.dirname(document.uri.fsPath);\n          const relativePaths = fileUris.map((uri) => {\n            const filePath = uri.fsPath;\n            return path.relative(baseDir, filePath);\n          });\n\n          // Send back to webview\n          webviewPanel.webview.postMessage({\n            type: \"filesSelected\",\n            files: relativePaths,\n          });\n          this.logger.info(`Selected ${relativePaths.length} file(s)`);\n        }\n      } else if (message.type === \"checkFilesExist\") {\n        // Check which files exist on disk\n        const baseDir = path.dirname(document.uri.fsPath);\n        const filePaths: string[] = message.paths || [];\n        const results: { [key: string]: boolean } = {};\n\n        for (const filePath of filePaths) {\n          try {\n            const fullPath = path.isAbsolute(filePath)\n              ? filePath\n              : path.join(baseDir, filePath);\n            const uri = vscode.Uri.file(fullPath);\n            await vscode.workspace.fs.stat(uri);\n            results[filePath] = true;\n          } catch {\n            results[filePath] = false;\n          }\n        }\n\n        webviewPanel.webview.postMessage({\n          type: \"filesExistResult\",\n          results: results,\n        });\n        this.logger.debug(`Checked ${filePaths.length} file(s) for existence`);\n      } else if (message.type === \"generate\") {\n        // Handle VHDL generation request using TypeScript backend\n        this.logger.info(\"Generate request received\", message.options);\n\n        try {\n          const baseDir = path.dirname(document.uri.fsPath);\n          const text = document.getText();\n          const rawData = jsyaml.load(text) as any;\n          const ipName = rawData.vlnv?.name?.toLowerCase() || \"ip_core\";\n\n          // Ask user for output directory using folder picker\n          const folderUris = await vscode.window.showOpenDialog({\n            canSelectFiles: false,\n            canSelectFolders: true,\n            canSelectMany: false,\n            openLabel: \"Select Output Folder\",\n            title: \"Select Output Directory for Generated Files\",\n            defaultUri: vscode.Uri.file(path.dirname(document.uri.fsPath)),\n          });\n\n          if (!folderUris || folderUris.length === 0) {\n            webviewPanel.webview.postMessage({\n              type: \"generateResult\",\n              success: false,\n              error: \"No output directory selected\",\n            });\n            return;\n          }\n\n          // Create output directory: <selected>/<ip_name>/\n          const outputBaseDir = path.join(folderUris[0].fsPath, ipName);\n\n          const generator = new IpCoreScaffolder(\n            this.logger,\n            new TemplateLoader(this.logger),\n            this.context,\n          );\n          const result = await generator.generateAll(\n            document.uri.fsPath,\n            outputBaseDir,\n            {\n              vendor: message.options?.vendorFiles || \"both\",\n              includeTestbench: message.options?.includeTestbench !== false,\n              includeRegs: message.options?.includeRegfile !== false,\n              includeVhdl: message.options?.includeVhdl !== false,\n              updateYaml: false,\n            },\n          );\n\n          if (!result.success) {\n            webviewPanel.webview.postMessage({\n              type: \"generateResult\",\n              success: false,\n              error: result.error || \"Generation failed\",\n            });\n            return;\n          }\n\n          // Get list of generated files (relative to outputBaseDir)\n          const writtenFiles = result.files ? Object.keys(result.files) : [];\n\n          this.logger.info(\n            `Generated ${writtenFiles.length} files to ${outputBaseDir}`,\n          );\n\n          webviewPanel.webview.postMessage({\n            type: \"generateResult\",\n            success: true,\n            files: writtenFiles,\n          });\n\n          // Show success message with option to open folder\n          const action = await vscode.window.showInformationMessage(\n            `Generated ${writtenFiles.length} files to ${outputBaseDir}`,\n            \"Open Folder\",\n          );\n\n          if (action === \"Open Folder\") {\n            await vscode.commands.executeCommand(\n              \"revealFileInOS\",\n              vscode.Uri.file(outputBaseDir),\n            );\n          }\n\n          // Update file sets in the YAML document\n          try {\n            const doc = YAML.parseDocument(document.getText());\n\n            // Convert file paths to be relative to YAML document location\n            const yamlRelativeFiles = writtenFiles.map((f) => {\n              const absolutePath = path.join(outputBaseDir, f);\n              return path.relative(baseDir, absolutePath);\n            });\n\n            // Categorize files\n            const rtlFiles = yamlRelativeFiles.filter(\n              (f) =>\n                f.endsWith(\".vhd\") &&\n                !f.endsWith(\"_regs.vhd\") &&\n                !f.endsWith(\"_tb.vhd\"),\n            );\n            const simFiles = yamlRelativeFiles.filter(\n              (f) =>\n                f.endsWith(\".py\") ||\n                f.endsWith(\"Makefile\") ||\n                f.endsWith(\"_tb.vhd\"),\n            );\n            const integrationFiles = yamlRelativeFiles.filter(\n              (f) =>\n                f.endsWith(\".tcl\") ||\n                f.endsWith(\".xml\") ||\n                f.endsWith(\"_regs.vhd\"),\n            );\n\n            this.logger.info(\n              `Categorized files - RTL: ${rtlFiles.length}, Sim: ${simFiles.length}, Integration: ${integrationFiles.length}`,\n            );\n\n            // Get current fileSets\n            const currentData = doc.toJSON();\n            let fileSets = currentData.fileSets || currentData.file_sets || [];\n            const key = currentData.fileSets\n              ? \"fileSets\"\n              : currentData.file_sets\n                ? \"file_sets\"\n                : \"fileSets\";\n\n            if (!Array.isArray(fileSets)) {\n              fileSets = [];\n            }\n\n            const updateFileSet = (\n              setNames: string[],\n              setDescription: string,\n              newFiles: string[],\n              fileTypeMap: (f: string) => string,\n            ) => {\n              if (newFiles.length === 0) {return;}\n\n              let targetSetIndex = fileSets.findIndex(\n                (fs: any) => fs && fs.name && setNames.includes(fs.name),\n              );\n\n              let usedName = setNames[0];\n\n              if (targetSetIndex === -1) {\n                fileSets.push({\n                  name: usedName,\n                  description: setDescription,\n                  files: [],\n                });\n                targetSetIndex = fileSets.length - 1;\n              } else {\n                usedName = fileSets[targetSetIndex].name;\n              }\n\n              if (!fileSets[targetSetIndex].files) {\n                fileSets[targetSetIndex].files = [];\n              }\n              const existingFiles = fileSets[targetSetIndex].files;\n\n              for (const filePath of newFiles) {\n                const exists = existingFiles.some(\n                  (f: any) => f.path === filePath,\n                );\n                if (!exists) {\n                  existingFiles.push({\n                    path: filePath,\n                    type: fileTypeMap(filePath),\n                  });\n                }\n              }\n            };\n\n            updateFileSet(\n              [\"RTL_Sources\", \"rtl_sources\", \"rtl\", \"RTL\"],\n              \"RTL Sources\",\n              rtlFiles,\n              () => \"vhdl\",\n            );\n            updateFileSet(\n              [\"Simulation_Resources\", \"simulation\", \"tb\"],\n              \"Simulation Files\",\n              simFiles,\n              (f) => {\n                if (f.endsWith(\"Makefile\")) {return \"unknown\";}\n                if (f.endsWith(\".py\")) {return \"python\";}\n                return \"vhdl\";\n              },\n            );\n            updateFileSet(\n              [\"Integration\", \"integration\"],\n              \"Integration Files\",\n              integrationFiles,\n              (f) => {\n                if (f.endsWith(\".tcl\")) {return \"tcl\";}\n                if (f.endsWith(\".xml\")) {return \"unknown\";}\n                return \"vhdl\";\n              },\n            );\n\n            doc.setIn([key], fileSets);\n\n            const newText = doc.toString();\n            const updateSuccess = await this.documentManager.updateDocument(\n              document,\n              newText,\n            );\n            if (updateSuccess) {\n              this.logger.info(\"Updated file sets with generated files\");\n              await updateWebview();\n            } else {\n              this.logger.error(\"Failed to apply document edit for file sets\");\n            }\n          } catch (e: any) {\n            this.logger.error(\"Error updating file sets\", e);\n          }\n        } catch (error: any) {\n          this.logger.error(\"Generation failed\", error);\n          webviewPanel.webview.postMessage({\n            type: \"generateResult\",\n            success: false,\n            error: error.message || \"Unknown error\",\n          });\n        }\n      } else {\n        void this.messageHandler.handleMessage(message, document);\n      }\n    });\n\n    // Send initial content after a small delay to ensure webview is loaded\n    // The webview will also send a 'ready' message when it's initialized\n    setTimeout(() => {\n      void updateWebview();\n    }, 100);\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/providers/MemoryMapEditorProvider.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'pendingUpdate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":55,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":84,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":84,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `WebviewMessage`.","line":89,"column":46,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":89,"endColumn":53}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from \"vscode\";\nimport { Logger } from \"../utils/Logger\";\nimport { HtmlGenerator } from \"../services/HtmlGenerator\";\nimport { MessageHandler } from \"../services/MessageHandler\";\nimport { YamlValidator } from \"../services/YamlValidator\";\nimport { DocumentManager } from \"../services/DocumentManager\";\n\n/**\n * Custom editor provider for FPGA memory map YAML files\n */\nexport class MemoryMapEditorProvider\n  implements vscode.CustomTextEditorProvider\n{\n  private readonly logger = new Logger(\"MemoryMapEditorProvider\");\n  private readonly htmlGenerator: HtmlGenerator;\n  private readonly messageHandler: MessageHandler;\n  private readonly documentManager: DocumentManager;\n\n  constructor(private readonly context: vscode.ExtensionContext) {\n    this.htmlGenerator = new HtmlGenerator(context);\n    this.documentManager = new DocumentManager();\n    const yamlValidator = new YamlValidator();\n    this.messageHandler = new MessageHandler(\n      yamlValidator,\n      this.documentManager,\n    );\n\n    this.logger.info(\"MemoryMapEditorProvider initialized\");\n  }\n\n  /**\n   * Resolve the custom text editor for a document\n   */\n  public resolveCustomTextEditor(\n    document: vscode.TextDocument,\n    webviewPanel: vscode.WebviewPanel,\n    _token: vscode.CancellationToken,\n  ): void {\n    this.logger.info(\n      \"Resolving custom text editor for document\",\n      document.uri.toString(),\n    );\n\n    // Configure webview\n    webviewPanel.webview.options = {\n      enableScripts: true,\n    };\n\n    // Set HTML content\n    webviewPanel.webview.html = this.htmlGenerator.generateHtml(\n      webviewPanel.webview,\n    );\n\n    let isReady = false;\n    let pendingUpdate = false;\n\n    // Send update to webview when ready\n    const updateWebview = () => {\n      if (!isReady) {\n        pendingUpdate = true;\n        return;\n      }\n      pendingUpdate = false;\n      this.messageHandler.sendUpdate(webviewPanel.webview, document);\n    };\n\n    // Listen for document changes\n    const changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument(\n      (e) => {\n        if (e.document.uri.toString() === document.uri.toString()) {\n          updateWebview();\n        }\n      },\n    );\n\n    // Clean up subscriptions when webview is disposed\n    webviewPanel.onDidDispose(() => {\n      changeDocumentSubscription.dispose();\n      this.logger.debug(\"Webview panel disposed\");\n    });\n\n    // Handle messages from the webview\n    webviewPanel.webview.onDidReceiveMessage((message) => {\n      if (message.type === \"ready\") {\n        isReady = true;\n        updateWebview();\n        return;\n      }\n      void this.messageHandler.handleMessage(message, document);\n    });\n\n    // Queue initial content until webview signals readiness\n    updateWebview();\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/BusLibraryService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[240,243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[240,243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":18,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":18,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":54,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":54,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as path from \"path\";\nimport * as vscode from \"vscode\";\nimport * as yaml from \"js-yaml\";\nimport { Logger } from \"../utils/Logger\";\n\nexport class BusLibraryService {\n  private readonly logger: Logger;\n  private cachedDefaultLibrary: any | null = null;\n  private readonly context: vscode.ExtensionContext;\n\n  constructor(logger: Logger, context: vscode.ExtensionContext) {\n    this.logger = logger;\n    this.context = context;\n  }\n\n  async loadDefaultLibrary(): Promise<any> {\n    if (this.cachedDefaultLibrary) {\n      return this.cachedDefaultLibrary;\n    }\n\n    const builtInPath = path.join(\n      this.context.extensionPath,\n      \"dist\",\n      \"resources\",\n      \"bus_definitions.yml\",\n    );\n\n    // Provide only one path since webpack handles resources\n    const candidates = [builtInPath];\n    let loadedContent: string | null = null;\n    let loadedPath: string | null = null;\n\n    for (const candidate of candidates) {\n      try {\n        const uri = vscode.Uri.file(candidate);\n        const fileData = await vscode.workspace.fs.readFile(uri);\n        loadedContent = Buffer.from(fileData).toString(\"utf8\");\n        loadedPath = candidate;\n        break;\n      } catch (e) {\n        // Check next candidate\n      }\n    }\n\n    if (!loadedContent || !loadedPath) {\n      this.logger.error(\"Default bus library not found in extension resources\");\n      return {};\n    }\n\n    try {\n      const parsed = yaml.load(loadedContent);\n      this.cachedDefaultLibrary = parsed ?? {};\n      this.logger.info(`Loaded default bus library from ${loadedPath}`);\n      return this.cachedDefaultLibrary;\n    } catch (error) {\n      this.logger.error(\n        `Failed to parse default bus library from ${loadedPath}`,\n        error as Error,\n      );\n      return {};\n    }\n  }\n\n  clearCache(): void {\n    this.cachedDefaultLibrary = null;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/DocumentManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/HtmlGenerator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/ImportResolver.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[484,487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[484,487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[504,507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[504,507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[526,529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[526,529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[638,641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[638,641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[690,693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[690,693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useBusLibrary on an `any` value.","line":48,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":48,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":50,"column":11,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":53,"endColumn":12},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":51,"column":13,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":51,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useBusLibrary on an `any` value.","line":51,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":51,"endColumn":37},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":56,"column":49,"nodeType":"MemberExpression","messageId":"invalidType","endLine":56,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useBusLibrary on an `any` value.","line":56,"column":49,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":56,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":57,"column":52,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":57,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .useBusLibrary on an `any` value.","line":57,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":57,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":60,"column":11,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":60,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":64,"column":9,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":64,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMaps on an `any` value.","line":68,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":68,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":70,"column":11,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":70,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMaps on an `any` value.","line":70,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":70,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":76,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":76,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `any[]`.","line":78,"column":11,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":78,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileSets on an `any` value.","line":78,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":78,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2875,2878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2875,2878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":97,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":97,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":100,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":100,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":101,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":101,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `{}`.","line":102,"column":41,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":102,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":104,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":104,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3560,3563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3560,3563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":129,"column":9,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":129,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4623,4626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4623,4626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4664,4667],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4664,4667],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4693,4696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4693,4696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .import on an `any` value.","line":159,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":159,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":161,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":161,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .import on an `any` value.","line":161,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":162,"column":52,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":162,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe spread of an `any` array type.","line":173,"column":27,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":173,"endColumn":36},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":179,"column":51,"nodeType":"Identifier","messageId":"invalidType","endLine":179,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":190,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":190,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6009,6012],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6009,6012],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":206,"column":7,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":206,"endColumn":53}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Import resolver service for IP core YAML files.\n *\n * Resolves external references:\n * - memoryMaps: { import: \"file.mm.yml\" }\n * - fileSets: [{ import: \"file.fileset.yml\" }]\n * - useBusLibrary: \"path/to/bus_definitions.yml\"\n */\n\nimport * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as yaml from \"js-yaml\";\nimport { Logger } from \"../utils/Logger\";\nimport { BusLibraryService } from \"./BusLibraryService\";\n\nexport interface ResolvedImports {\n  memoryMaps?: any[];\n  fileSets?: any[];\n  busLibrary?: any;\n}\n\nexport class ImportResolver {\n  private readonly logger: Logger;\n  private busLibraryCache: Map<string, any> = new Map();\n  private defaultBusLibraryCache: any = null;\n  private busLibraryService: BusLibraryService;\n\n  constructor(logger: Logger, context: vscode.ExtensionContext) {\n    this.logger = logger;\n    this.busLibraryService = new BusLibraryService(logger, context);\n  }\n\n  /**\n   * Resolve all imports in an IP core YAML structure.\n   *\n   * @param ipCoreData Parsed IP core YAML data\n   * @param baseDir Directory containing the IP core YAML file\n   * @returns Resolved imports\n   */\n  async resolveImports(\n    ipCoreData: any,\n    baseDir: string,\n  ): Promise<ResolvedImports> {\n    const resolved: ResolvedImports = {};\n\n    try {\n      // Resolve bus library - first try explicit path, then fall back to default\n      if (ipCoreData.useBusLibrary) {\n        try {\n          resolved.busLibrary = await this.resolveBusLibrary(\n            ipCoreData.useBusLibrary,\n            baseDir,\n          );\n        } catch (busError) {\n          this.logger.warn(\n            `Could not load bus library from '${ipCoreData.useBusLibrary}' ` +\n            `(resolved to: ${path.resolve(baseDir, ipCoreData.useBusLibrary)}). ` +\n            `Falling back to default bus library. Reason: ${(busError as Error).message}`,\n          );\n          resolved.busLibrary = await this.loadDefaultBusLibrary();\n        }\n      } else {\n        // Load default bus library from Python backend\n        resolved.busLibrary = await this.loadDefaultBusLibrary();\n      }\n\n      // Resolve memory map imports\n      if (ipCoreData.memoryMaps?.import) {\n        resolved.memoryMaps = await this.resolveMemoryMapImport(\n          ipCoreData.memoryMaps.import,\n          baseDir,\n        );\n      }\n\n      // Resolve file set imports\n      if (Array.isArray(ipCoreData.fileSets)) {\n        resolved.fileSets = await this.resolveFileSetImports(\n          ipCoreData.fileSets,\n          baseDir,\n        );\n      }\n\n      return resolved;\n    } catch (error) {\n      this.logger.error(\"Import resolution failed\", error as Error);\n      throw error;\n    }\n  }\n\n  /**\n   * Load default bus library from ipcore_spec.\n   * Returns the library in the format expected by the UI: { [key]: { ports: [...] } }\n   */\n  private async loadDefaultBusLibrary(): Promise<any> {\n    // Use cached result if available\n    if (this.defaultBusLibraryCache) {\n      return this.defaultBusLibraryCache;\n    }\n\n    const library = await this.busLibraryService.loadDefaultLibrary();\n    this.defaultBusLibraryCache = library;\n    const count = library ? Object.keys(library).length : 0;\n    this.logger.info(`Loaded ${count} bus types from local library`);\n    return library;\n  }\n\n  /**\n   * Resolve memory map import.\n   *\n   * @param importPath Relative path to memory map file\n   * @param baseDir Base directory for resolution\n   * @returns Parsed memory map data\n   */\n  async resolveMemoryMapImport(\n    importPath: string,\n    baseDir: string,\n  ): Promise<any[]> {\n    const absolutePath = path.resolve(baseDir, importPath);\n    this.logger.info(`Resolving memory map import: ${absolutePath}`);\n\n    try {\n      const uri = vscode.Uri.file(absolutePath);\n      const fileData = await vscode.workspace.fs.readFile(uri);\n      const content = Buffer.from(fileData).toString(\"utf8\");\n      const parsed = yaml.load(content);\n\n      // Memory map files are typically a list\n      if (Array.isArray(parsed)) {\n        return parsed;\n      }\n\n      // Fallback: wrap single item in array\n      return [parsed];\n    } catch (error) {\n      this.logger.error(\n        `Failed to resolve memory map import: ${importPath}`,\n        error as Error,\n      );\n      throw new Error(\n        `Failed to load memory map from ${importPath}: ${(error as Error).message}`,\n      );\n    }\n  }\n\n  /**\n   * Resolve file set imports.\n   *\n   * @param fileSets List of file set entries (may contain imports)\n   * @param baseDir Base directory for resolution\n   * @returns Resolved file sets\n   */\n  async resolveFileSetImports(\n    fileSets: any[],\n    baseDir: string,\n  ): Promise<any[]> {\n    const resolved: any[] = [];\n\n    for (const fileSet of fileSets) {\n      if (fileSet.import) {\n        // Resolve import\n        const importPath = fileSet.import;\n        const absolutePath = path.resolve(baseDir, importPath);\n        this.logger.info(`Resolving file set import: ${absolutePath}`);\n\n        try {\n          const uri = vscode.Uri.file(absolutePath);\n          const fileData = await vscode.workspace.fs.readFile(uri);\n          const content = Buffer.from(fileData).toString(\"utf8\");\n          const parsed = yaml.load(content);\n\n          // Add to resolved list\n          if (Array.isArray(parsed)) {\n            resolved.push(...parsed);\n          } else {\n            resolved.push(parsed);\n          }\n        } catch (error) {\n          this.logger.error(\n            `Failed to resolve file set import: ${importPath}`,\n            error as Error,\n          );\n          // Continue with other imports\n        }\n      } else {\n        // Not an import, add as-is\n        resolved.push(fileSet);\n      }\n    }\n\n    return resolved;\n  }\n\n  /**\n   * Resolve and cache bus library.\n   *\n   * @param libraryPath Relative path to bus library file\n   * @param baseDir Base directory for resolution\n   * @returns Parsed bus library data\n   */\n  async resolveBusLibrary(libraryPath: string, baseDir: string): Promise<any> {\n    const absolutePath = path.resolve(baseDir, libraryPath);\n\n    // Check cache\n    if (this.busLibraryCache.has(absolutePath)) {\n      this.logger.info(`Using cached bus library: ${absolutePath}`);\n      return this.busLibraryCache.get(absolutePath);\n    }\n\n    this.logger.info(`Loading bus library: ${absolutePath}`);\n\n    try {\n      const uri = vscode.Uri.file(absolutePath);\n      const fileData = await vscode.workspace.fs.readFile(uri);\n      const content = Buffer.from(fileData).toString(\"utf8\");\n      const parsed = yaml.load(content);\n\n      // Cache for future use\n      this.busLibraryCache.set(absolutePath, parsed);\n\n      return parsed;\n    } catch (error) {\n      this.logger.error(\n        `Failed to load bus library: ${libraryPath}`,\n        error as Error,\n      );\n      throw new Error(\n        `Failed to load bus library from ${libraryPath}: ${(error as Error).message}`,\n      );\n    }\n  }\n\n  /**\n   * Clear the bus library cache.\n   */\n  clearCache(): void {\n    this.busLibraryCache.clear();\n    this.logger.info(\"Bus library cache cleared\");\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/MessageHandler.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":81,"column":52,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":81,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .path on an `any` value.","line":81,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":81,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2130,2133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2130,2133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":105,"column":7,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":105,"endColumn":74,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[2858,2858],"text":"void "},"desc":"Add void operator to ignore."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from 'vscode';\nimport { Logger } from '../utils/Logger';\nimport { YamlValidator } from './YamlValidator';\nimport { DocumentManager } from './DocumentManager';\n\n/**\n * Message types that can be sent from the webview\n */\nexport interface WebviewMessage {\n  type: string;\n  [key: string]: unknown;\n}\n\n/**\n * Update message from webview\n */\nexport interface UpdateMessage extends WebviewMessage {\n  type: 'update';\n  text: string;\n}\n\n/**\n * Command message from webview\n */\nexport interface CommandMessage extends WebviewMessage {\n  type: 'command';\n  command: string;\n}\n\n/**\n * Service responsible for handling messages between extension and webview\n */\nexport class MessageHandler {\n  private readonly logger = new Logger('MessageHandler');\n\n  constructor(\n    private readonly yamlValidator: YamlValidator,\n    private readonly documentManager: DocumentManager\n  ) {}\n\n  /**\n   * Handle a message received from the webview\n   */\n  async handleMessage(message: WebviewMessage, document: vscode.TextDocument): Promise<void> {\n    this.logger.debug('Received message from webview', message.type);\n\n    switch (message.type) {\n      case 'update':\n        await this.handleUpdate(message as UpdateMessage, document);\n        break;\n      case 'command':\n        await this.handleCommand(message as CommandMessage, document);\n        break;\n      default:\n        this.logger.warn('Unknown message type', message.type);\n    }\n  }\n\n  /**\n   * Handle update message from webview\n   */\n  private async handleUpdate(message: UpdateMessage, document: vscode.TextDocument): Promise<void> {\n    await this.documentManager.updateDocument(document, message.text);\n  }\n\n  /**\n   * Handle command message from webview\n   */\n  private async handleCommand(\n    message: CommandMessage,\n    document: vscode.TextDocument\n  ): Promise<void> {\n    switch (message.command) {\n      case 'save':\n        await this.handleSaveCommand(document);\n        break;\n      case 'validate':\n        await this.handleValidateCommand(document);\n        break;\n      case 'openFile':\n        await this.handleOpenFileCommand(document, (message as any).path);\n        break;\n      default:\n        this.logger.warn('Unknown command', message.command);\n    }\n  }\n\n  /**\n   * Handle openFile command\n   */\n  private async handleOpenFileCommand(\n    document: vscode.TextDocument,\n    filePath: string\n  ): Promise<void> {\n    try {\n      // Resolve path relative to current document\n      const currentDir = vscode.Uri.joinPath(document.uri, '..');\n      const targetUri = vscode.Uri.joinPath(currentDir, filePath);\n\n      // Open string paths or relative paths\n      await vscode.commands.executeCommand('vscode.open', targetUri);\n      this.logger.info('Opened file:', targetUri.toString());\n    } catch (e) {\n      this.logger.error('Failed to open file', e as Error);\n      vscode.window.showErrorMessage(`Failed to open file: ${filePath}`);\n    }\n  }\n\n  /**\n   * Handle save command\n   */\n  private async handleSaveCommand(document: vscode.TextDocument): Promise<void> {\n    await document.save();\n    this.logger.info('Document saved');\n  }\n\n  /**\n   * Handle validate command\n   */\n  private async handleValidateCommand(document: vscode.TextDocument): Promise<void> {\n    const result = this.yamlValidator.validate(document.getText());\n\n    if (result.valid) {\n      await vscode.window.showInformationMessage('YAML parsed successfully.');\n      this.logger.info('YAML validation successful');\n    } else {\n      await vscode.window.showErrorMessage(`YAML parse error: ${result.error ?? 'Unknown error'}`);\n      this.logger.warn('YAML validation failed', result.error);\n    }\n  }\n\n  /**\n   * Send an update message to the webview\n   */\n  sendUpdate(webview: vscode.Webview, document: vscode.TextDocument): void {\n    void webview.postMessage({\n      type: 'update',\n      text: this.documentManager.getText(document),\n      fileName: this.documentManager.getRelativePath(document.uri),\n    });\n    this.logger.debug('Sent update to webview');\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/services/YamlValidator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/__mocks__/vscode.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":22,"column":37,"nodeType":"CallExpression","messageId":"unsafeReturn","endLine":22,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .toString on an `any` value.","line":22,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":22,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":22,"column":37,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":22,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[642,645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[642,645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Mock VS Code API for testing\n */\n\n// Create persistent mock output channel\nconst mockOutputChannel = {\n  appendLine: jest.fn(),\n  show: jest.fn(),\n  dispose: jest.fn(),\n};\n\nexport const window = {\n  createOutputChannel: jest.fn(() => mockOutputChannel),\n  showErrorMessage: jest.fn(),\n  showWarningMessage: jest.fn(),\n  showInformationMessage: jest.fn(),\n};\n\nexport const workspace = {\n  onDidChangeTextDocument: jest.fn(),\n  applyEdit: jest.fn(),\n  asRelativePath: jest.fn((path) => path.toString()),\n};\n\nexport const Uri = {\n  file: jest.fn((path: string) => ({ fsPath: path, toString: () => path })),\n  joinPath: jest.fn((...paths: any[]) => ({\n    fsPath: paths.join('/'),\n    toString: () => paths.join('/'),\n  })),\n};\n\nexport class Range {\n  constructor(\n    public startLine: number,\n    public startCharacter: number,\n    public endLine: number,\n    public endCharacter: number\n  ) {}\n}\n\nexport class WorkspaceEdit {\n  replace = jest.fn();\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/setup.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .acquireVsCodeApi on an `any` value.","line":5,"column":1,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":5,"endColumn":33,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[225,228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[225,228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[479,482],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[479,482],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe spread of an `any` array type.","line":22,"column":33,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":22,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/algorithms/AddressBlockRepacker.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any[]` assigned to a parameter of type `AddressBlockRecord[]`.","line":177,"column":43,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":177,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  repackBlocksForward,\n  repackBlocksBackward,\n} from \"../../../webview/algorithms/AddressBlockRepacker\";\n\ndescribe(\"AddressBlockRepacker\", () => {\n  describe(\"repackBlocksForward\", () => {\n    it(\"should repack blocks forward maintaining sizes\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x2000, size: 0x1000 },\n        { name: \"Block3\", base_address: 0x5000, size: 0x2000 },\n      ];\n\n      const result = repackBlocksForward(blocks, 1);\n\n      // Block 0 unchanged, blocks 1-2 repacked sequentially\n      expect(result[0].base_address).toBe(0x0000);\n      expect(result[1].base_address).toBe(0x1000); // After block 0\n      expect(result[2].base_address).toBe(0x2000); // After block 1\n    });\n\n    it(\"should handle repacking from index 0\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x1000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x5000, size: 0x2000 },\n      ];\n\n      const result = repackBlocksForward(blocks, 0);\n\n      // All blocks repacked from address 0\n      expect(result[0].base_address).toBe(0);\n      expect(result[1].base_address).toBe(0x1000);\n    });\n\n    it(\"should handle blocks with varying sizes\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x100 },\n        { name: \"Block2\", base_address: 0x1000, size: 0x2000 },\n        { name: \"Block3\", base_address: 0x5000, size: 0x500 },\n      ];\n\n      const result = repackBlocksForward(blocks, 1);\n\n      expect(result[0].base_address).toBe(0x0000);\n      expect(result[1].base_address).toBe(0x100); // 0x000 + 0x100\n      expect(result[2].base_address).toBe(0x2100); // 0x100 + 0x2000\n    });\n\n    it(\"should preserve original array\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x2000, size: 0x1000 },\n      ];\n\n      const result = repackBlocksForward(blocks, 1);\n\n      // Original should be unchanged\n      expect(blocks[1].base_address).toBe(0x2000);\n      expect(result[1].base_address).toBe(0x1000);\n    });\n\n    it(\"should handle single block\", () => {\n      const blocks = [{ name: \"Block1\", base_address: 0x5000, size: 0x1000 }];\n\n      const result = repackBlocksForward(blocks, 0);\n\n      expect(result[0].base_address).toBe(0);\n    });\n\n    it(\"should handle empty array\", () => {\n      const result = repackBlocksForward([], 0);\n      expect(result).toEqual([]);\n    });\n\n    it(\"should handle type coercion for size property\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x2000, size: undefined as any },\n      ];\n\n      const result = repackBlocksForward(blocks, 1);\n\n      // Should use 0 for undefined size\n      expect(result[1].base_address).toBe(0x1000);\n    });\n  });\n\n  describe(\"repackBlocksBackward\", () => {\n    it(\"should repack blocks backward maintaining sizes\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x2000, size: 0x1000 },\n        { name: \"Block3\", base_address: 0x5000, size: 0x2000 },\n      ];\n\n      const result = repackBlocksBackward(blocks, 1);\n\n      // Block 2 unchanged, blocks 0-1 repacked backward\n      expect(result[2].base_address).toBe(0x5000);\n      expect(result[1].base_address).toBe(0x4000); // 0x5000 - 0x1000\n      expect(result[0].base_address).toBe(0x3000); // 0x4000 - 0x1000\n    });\n\n    it(\"should handle repacking to end when fromIndex is last\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x1000, size: 0x2000 },\n      ];\n\n      const result = repackBlocksBackward(blocks, 1);\n\n      // Last block stays in place\n      expect(result[1].base_address).toBe(0x1000);\n      expect(result[0].base_address).toBeGreaterThanOrEqual(0);\n    });\n\n    it(\"should clamp to address 0\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x1000, size: 0x5000 }, // Too large\n        { name: \"Block2\", base_address: 0x2000, size: 0x1000 },\n      ];\n\n      const result = repackBlocksBackward(blocks, 0);\n\n      // Should clamp block 0 to address 0\n      expect(result[0].base_address).toBe(0);\n    });\n\n    it(\"should preserve original array\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0x5000, size: 0x2000 },\n      ];\n\n      const result = repackBlocksBackward(blocks, 0);\n\n      // Original unchanged\n      expect(blocks[0].base_address).toBe(0x0000);\n      expect(result).not.toBe(blocks);\n    });\n\n    it(\"should handle empty array\", () => {\n      const result = repackBlocksBackward([], 0);\n      expect(result).toEqual([]);\n    });\n\n    it(\"should handle single block\", () => {\n      const blocks = [{ name: \"Block1\", base_address: 0x5000, size: 0x1000 }];\n\n      const result = repackBlocksBackward(blocks, 0);\n\n      expect(result[0].base_address).toBe(0x5000);\n    });\n  });\n\n  describe(\"Edge cases\", () => {\n    it(\"should handle zero-sized blocks\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000, size: 0 },\n        { name: \"Block2\", base_address: 0x1000, size: 0x1000 },\n      ];\n\n      const forward = repackBlocksForward(blocks, 1);\n      expect(forward[1].base_address).toBe(0); // After zero-sized block\n\n      const backward = repackBlocksBackward(blocks, 0);\n      expect(backward[0].base_address).toBeGreaterThanOrEqual(0);\n    });\n\n    it(\"should handle missing size property\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0x0000 } as any,\n        { name: \"Block2\", base_address: 0x1000, size: 0x1000 },\n      ];\n\n      const forward = repackBlocksForward(blocks, 0);\n      expect(forward[0].base_address).toBe(0);\n    });\n\n    it(\"should handle very large addresses\", () => {\n      const blocks = [\n        { name: \"Block1\", base_address: 0xffff0000, size: 0x1000 },\n        { name: \"Block2\", base_address: 0xffff5000, size: 0x1000 },\n      ];\n\n      const result = repackBlocksForward(blocks, 1);\n      expect(result[1].base_address).toBe(0xffff1000);\n    });\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/algorithms/BitFieldRepacker.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/algorithms/RegisterRepacker.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/components/DetailsPanel.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/components/EditableTable.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/hooks/useFieldEditor.test.ts","messages":[{"ruleId":"@typescript-eslint/require-await","severity":2,"message":"Async arrow function has no 'await' expression.","line":101,"column":74,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":101,"endColumn":76}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Unit tests for useFieldEditor hook.\n *\n * Covers: draft initialisation, initial selection state, validation triggers,\n * insert-field state update, and delete (moveSelectedField) clearing active cell.\n */\nimport { act, renderHook } from '@testing-library/react';\nimport { useFieldEditor } from '../../../webview/hooks/useFieldEditor';\nimport type { BitFieldRecord } from '../../../webview/types/editor';\n\n// ---------------------------------------------------------------------------\n// Helpers\n// ---------------------------------------------------------------------------\n\nfunction makeField(\n  name: string,\n  bitOffset: number,\n  bitWidth = 1,\n): BitFieldRecord {\n  const hi = bitOffset + bitWidth - 1;\n  return {\n    name,\n    bits: `[${hi}:${bitOffset}]`,\n    bit_offset: bitOffset,\n    bit_width: bitWidth,\n    bit_range: [hi, bitOffset],\n    access: 'read-write',\n    reset_value: 0,\n    description: '',\n  };\n}\n\nconst noop = jest.fn();\n\n// ---------------------------------------------------------------------------\n// Draft initialisation\n// ---------------------------------------------------------------------------\n\ndescribe('useFieldEditor — draft initialisation', () => {\n  it('initialises nameDraft, bitsDraft and resetDraft for a field', () => {\n    const fields: BitFieldRecord[] = [makeField('STATUS', 0, 4)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    act(() => {\n      result.current.ensureDraftsInitialized(0);\n    });\n\n    expect(result.current.nameDrafts['STATUS']).toBe('STATUS');\n    expect(result.current.bitsDrafts[0]).toBe('[3:0]');\n    expect(result.current.resetDrafts[0]).toBe('0x0');\n  });\n\n  it('does not overwrite an already-initialised draft', () => {\n    const fields: BitFieldRecord[] = [makeField('CTRL', 4, 1)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    act(() => {\n      result.current.ensureDraftsInitialized(0);\n      // Manually overwrite the name draft\n      result.current.setNameDrafts({ CTRL: 'MY_DRAFT' });\n    });\n\n    // Calling again must not overwrite the manual draft\n    act(() => {\n      result.current.ensureDraftsInitialized(0);\n    });\n\n    expect(result.current.nameDrafts['CTRL']).toBe('MY_DRAFT');\n  });\n\n  it('formats reset_value as hex string', () => {\n    const fields: BitFieldRecord[] = [\n      { ...makeField('IRQ', 8, 1), reset_value: 255 },\n    ];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    act(() => {\n      result.current.ensureDraftsInitialized(0);\n    });\n\n    expect(result.current.resetDrafts[0]).toBe('0xFF');\n  });\n});\n\n// ---------------------------------------------------------------------------\n// Initial selection state\n// ---------------------------------------------------------------------------\n\ndescribe('useFieldEditor — initial selection state', () => {\n  it('sets selectedFieldIndex to -1 when fields is empty', () => {\n    const { result } = renderHook(() => useFieldEditor([], 32, noop, true));\n    expect(result.current.selectedFieldIndex).toBe(-1);\n  });\n\n  it('clamps selectedFieldIndex to 0 when fields are provided', async () => {\n    const fields = [makeField('A', 0), makeField('B', 1)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n    // After the clamp effect runs, index should land at 0\n    expect(result.current.selectedFieldIndex).toBeGreaterThanOrEqual(-1);\n  });\n\n  it('resets selectedFieldIndex to -1 when isActive is false', () => {\n    const fields = [makeField('A', 0)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, false),\n    );\n    expect(result.current.selectedFieldIndex).toBe(-1);\n  });\n});\n\n// ---------------------------------------------------------------------------\n// moveSelectedField\n// ---------------------------------------------------------------------------\n\ndescribe('useFieldEditor — moveSelectedField', () => {\n  it('moves down by 1 when delta is +1', () => {\n    const fields = [makeField('A', 0), makeField('B', 1), makeField('C', 2)];\n    const onUpdate = jest.fn();\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, onUpdate, true),\n    );\n\n    // Manually set start index to 0\n    act(() => {\n      result.current.setSelectedFieldIndex(0);\n    });\n\n    act(() => {\n      result.current.moveSelectedField(1);\n    });\n\n    expect(result.current.selectedFieldIndex).toBe(1);\n    expect(onUpdate).toHaveBeenCalledWith(\n      ['__op', 'field-move'],\n      { index: 0, delta: 1 },\n    );\n  });\n\n  it('does not move below 0', () => {\n    const fields = [makeField('A', 0), makeField('B', 1)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    act(() => {\n      result.current.setSelectedFieldIndex(0);\n    });\n\n    act(() => {\n      result.current.moveSelectedField(-1);\n    });\n\n    expect(result.current.selectedFieldIndex).toBe(0);\n  });\n\n  it('does not move past the last field', () => {\n    const fields = [makeField('A', 0), makeField('B', 1)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    act(() => {\n      result.current.setSelectedFieldIndex(1);\n    });\n\n    act(() => {\n      result.current.moveSelectedField(1);\n    });\n\n    expect(result.current.selectedFieldIndex).toBe(1);\n  });\n\n  it('clears draft maps after a move', () => {\n    const fields = [makeField('X', 0), makeField('Y', 1)];\n    const { result } = renderHook(() =>\n      useFieldEditor(fields, 32, noop, true),\n    );\n\n    // Seed some draft state\n    act(() => {\n      result.current.setSelectedFieldIndex(0);\n      result.current.setNameDrafts({ X: 'edited' });\n      result.current.setBitsDrafts({ 0: '[3:0]' });\n    });\n\n    act(() => {\n      result.current.moveSelectedField(1);\n    });\n\n    expect(result.current.nameDrafts).toEqual({});\n    expect(result.current.bitsDrafts).toEqual({});\n  });\n});\n\n// ---------------------------------------------------------------------------\n// insertError state\n// ---------------------------------------------------------------------------\n\ndescribe('useFieldEditor — insertError state', () => {\n  it('starts with no insert error', () => {\n    const { result } = renderHook(() =>\n      useFieldEditor([], 32, noop, true),\n    );\n    expect(result.current.insertError).toBeNull();\n  });\n\n  it('can be set and cleared via setInsertError', () => {\n    const { result } = renderHook(() =>\n      useFieldEditor([], 32, noop, true),\n    );\n\n    act(() => {\n      result.current.setInsertError('No room');\n    });\n    expect(result.current.insertError).toBe('No room');\n\n    act(() => {\n      result.current.setInsertError(null);\n    });\n    expect(result.current.insertError).toBeNull();\n  });\n});\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/services/SpatialInsertionService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/services/YamlService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/utils/BitFieldUtils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/utils/ErrorHandler.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/test/suite/utils/Logger.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/utils/ErrorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/utils/Logger.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":16,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":16,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":28},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":16,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as vscode from \"vscode\";\n\n/**\n * Log levels for extension logging\n */\nexport enum LogLevel {\n  DEBUG = \"DEBUG\",\n  INFO = \"INFO\",\n  WARN = \"WARN\",\n  ERROR = \"ERROR\",\n}\n\n/**\n * Logger service for structured logging throughout the extension\n */\nexport class Logger {\n  private static outputChannel: vscode.OutputChannel | null = null;\n  private static logLevel: LogLevel = LogLevel.INFO;\n\n  constructor(private readonly context: string) {}\n\n  /**\n   * Initialize the logger with a VS Code output channel\n   */\n  static initialize(\n    channelName: string,\n    level: LogLevel = LogLevel.INFO,\n  ): void {\n    this.outputChannel = vscode.window.createOutputChannel(channelName);\n    this.logLevel = level;\n  }\n\n  /**\n   * Get the output channel (create if doesn't exist)\n   */\n  private static getChannel(): vscode.OutputChannel {\n    if (!this.outputChannel) {\n      this.outputChannel = vscode.window.createOutputChannel(\n        \"FPGA Memory Map Editor\",\n      );\n    }\n    return this.outputChannel;\n  }\n\n  /**\n   * Set the global log level\n   */\n  static setLogLevel(level: LogLevel): void {\n    this.logLevel = level;\n  }\n\n  /**\n   * Write a message to the output channel\n   */\n  private log(level: LogLevel, message: string, ...args: unknown[]): void {\n    const channel = Logger.getChannel();\n    const timestamp = new Date().toISOString();\n    const formattedArgs = args.map((arg) => this.formatArg(arg)).join(\" \");\n    const logMessage = `[${timestamp}] [${level}] [${this.context}] ${message}${formattedArgs ? \" \" + formattedArgs : \"\"}`;\n\n    channel?.appendLine(logMessage);\n\n    // Also log to console in development\n    if (process.env.NODE_ENV === \"development\") {\n      const consoleMethod = this.getConsoleMethod(level);\n      consoleMethod(`[${this.context}]`, message, ...args);\n    }\n  }\n\n  /**\n   * Format an argument for logging\n   */\n  private formatArg(arg: unknown): string {\n    if (arg === null) {\n      return \"null\";\n    }\n    if (arg === undefined) {\n      return \"undefined\";\n    }\n    if (arg instanceof Error) {\n      return `Error: ${arg.message}\\n${arg.stack ?? \"\"}`;\n    }\n    if (typeof arg === \"object\") {\n      try {\n        return JSON.stringify(arg, null, 2);\n      } catch {\n        return String(arg);\n      }\n    }\n    return String(arg);\n  }\n\n  /**\n   * Get the appropriate console method for a log level\n   */\n  private getConsoleMethod(level: LogLevel): (...args: unknown[]) => void {\n    switch (level) {\n      case LogLevel.DEBUG:\n        return console.debug;\n      case LogLevel.INFO:\n        return console.info;\n      case LogLevel.WARN:\n        return console.warn;\n      case LogLevel.ERROR:\n        return console.error;\n      default:\n        return console.log;\n    }\n  }\n\n  /**\n   * Check if a log level should be logged based on current log level\n   */\n  private shouldLog(level: LogLevel): boolean {\n    const levels = [\n      LogLevel.DEBUG,\n      LogLevel.INFO,\n      LogLevel.WARN,\n      LogLevel.ERROR,\n    ];\n    const currentIndex = levels.indexOf(Logger.logLevel);\n    const messageIndex = levels.indexOf(level);\n    return messageIndex >= currentIndex;\n  }\n\n  /**\n   * Log a debug message\n   */\n  debug(message: string, ...args: unknown[]): void {\n    if (this.shouldLog(LogLevel.DEBUG)) {\n      this.log(LogLevel.DEBUG, message, ...args);\n    }\n  }\n\n  /**\n   * Log an info message\n   */\n  info(message: string, ...args: unknown[]): void {\n    if (this.shouldLog(LogLevel.INFO)) {\n      this.log(LogLevel.INFO, message, ...args);\n    }\n  }\n\n  /**\n   * Log a warning message\n   */\n  warn(message: string, ...args: unknown[]): void {\n    if (this.shouldLog(LogLevel.WARN)) {\n      this.log(LogLevel.WARN, message, ...args);\n    }\n  }\n\n  /**\n   * Log an error message\n   */\n  error(message: string, error?: Error, ...args: unknown[]): void {\n    if (this.shouldLog(LogLevel.ERROR)) {\n      const allArgs = error ? [error, ...args] : args;\n      this.log(LogLevel.ERROR, message, ...allArgs);\n    }\n  }\n\n  /**\n   * Show the output channel\n   */\n  static show(): void {\n    this.getChannel().show();\n  }\n\n  /**\n   * Dispose of the output channel\n   */\n  static dispose(): void {\n    this.outputChannel?.dispose();\n    this.outputChannel = null;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/algorithms/AddressBlockRepacker.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":13,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":13,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[443,445],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":22,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":22,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[713,715],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":23,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":23,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[751,753],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Address block repacking algorithms for maintaining proper block layouts\n */\n\nimport type { AddressBlockRecord, RegisterRecord } from '../types/editor';\n\n/**\n * Calculate block size based on registers and register arrays\n * For regular registers: 4 bytes per register\n * For register arrays: count * stride bytes\n */\nfunction calculateBlockSize(block: AddressBlockRecord): number {\n  const registers: RegisterRecord[] = block?.registers || [];\n  if (registers.length === 0) {\n    return typeof block?.size === \"number\" ? block.size : 4;\n  }\n\n  let totalSize = 0;\n  for (const reg of registers) {\n    if (reg.__kind === \"array\") {\n      // Register array: size = count * stride\n      const count = reg.count || 1;\n      const stride = reg.stride || 4;\n      totalSize += count * stride;\n    } else {\n      // Regular register: 4 bytes\n      totalSize += 4;\n    }\n  }\n  return totalSize;\n}\n\n/**\n * Repack address blocks forward (toward higher addresses) starting from the given index.\n * Maintains block sizes but shifts them to higher addresses.\n * Calculates block size based on registers and register arrays.\n * @param blocks Array of address blocks\n * @param fromIndex Starting index for repacking (inclusive)\n * @returns New array with repacked blocks\n */\nexport function repackBlocksForward(blocks: AddressBlockRecord[], fromIndex: number): AddressBlockRecord[] {\n  const newBlocks = [...blocks];\n\n  // Start from the block just before fromIndex to determine the starting position\n  let nextBase = 0;\n  if (fromIndex > 0) {\n    const prevBlock = newBlocks[fromIndex - 1];\n    const prevBase: number =\n      typeof prevBlock.base_address === \"number\" ? prevBlock.base_address : 0;\n    const prevSize = calculateBlockSize(prevBlock);\n    nextBase = prevBase + prevSize;\n  }\n\n  for (let i = fromIndex; i < newBlocks.length; i++) {\n    const block = newBlocks[i];\n    const blockSize = calculateBlockSize(block);\n\n    newBlocks[i] = {\n      ...block,\n      base_address: nextBase,\n      size: blockSize,\n    };\n    nextBase += blockSize;\n  }\n\n  return newBlocks;\n}\n\n/**\n * Repack address blocks backward (toward lower addresses) starting from the given index going backwards.\n * Maintains block sizes but shifts them to lower addresses.\n * Calculates block size based on registers and register arrays.\n * @param blocks Array of address blocks\n * @param fromIndex Starting index for repacking (inclusive), goes backward to index 0\n * @returns New array with repacked blocks\n */\nexport function repackBlocksBackward(blocks: AddressBlockRecord[], fromIndex: number): AddressBlockRecord[] {\n  const newBlocks = [...blocks];\n  if (newBlocks.length === 0) {\n    return [];\n  }\n\n  // Start from the block just after fromIndex to determine the starting position.\n  // `nextEnd` tracks an inclusive end address; `Infinity` preserves the current\n  // block base for the first processed element when repacking from the tail.\n  let nextEnd: number =\n    fromIndex < newBlocks.length - 1\n      ? (newBlocks[fromIndex + 1].base_address ?? 0) - 1\n      : Infinity;\n\n  for (let i = fromIndex; i >= 0; i--) {\n    const block = newBlocks[i];\n    const size = calculateBlockSize(block);\n\n    // Use inclusive-address arithmetic: base = end - size + 1.\n    const base = nextEnd === Infinity ? (block.base_address ?? 0) : nextEnd - size + 1;\n    newBlocks[i] = {\n      ...block,\n      base_address: Math.max(0, base),\n      size,\n    };\n    nextEnd = base - 1;\n  }\n\n  return newBlocks;\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/algorithms/BitFieldRepacker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/algorithms/RegisterRepacker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/AddressMapVisualizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":34},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[166,169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[166,169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[787,790],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[787,790],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":27,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":27,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":27,"column":21,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":27,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":28,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":29,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":29,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .size on an `any` value.","line":29,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":29,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .range on an `any` value.","line":29,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":29,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":34,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":34,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":36,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":36,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":36,"column":21,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":36,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":37,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":37,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":37,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":37,"endColumn":32},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty arrow function.","line":50,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":50,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'maxAddress' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":55,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":55,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":59,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":63,"endColumn":10},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":60,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":60,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .base_address on an `any` value.","line":60,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":60,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":60,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":60,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":62,"column":23,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":62,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":62,"column":28,"nodeType":"BinaryExpression","messageId":"unsafeArgument","endLine":62,"endColumn":39},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":62,"column":28,"nodeType":"Identifier","messageId":"invalid","endLine":62,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":64,"column":21,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":64,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":70,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":70,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .base_address on an `any` value.","line":70,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":70,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":70,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":70,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":74,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":74,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":74,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":74,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":75,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":75,"endColumn":20},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":76,"column":14,"nodeType":"Identifier","messageId":"invalid","endLine":76,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":79,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":79,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .usage on an `any` value.","line":79,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":79,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":139,"column":31,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":139,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":152,"column":28,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":152,"endColumn":39}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useState } from \"react\";\nimport { FIELD_COLORS, FIELD_COLOR_KEYS } from \"../shared/colors\";\n\ninterface AddressMapVisualizerProps {\n  blocks: any[];\n  hoveredBlockIndex?: number | null;\n  setHoveredBlockIndex?: (idx: number | null) => void;\n  totalAddressSpace?: number;\n  onBlockClick?: (blockIndex: number) => void;\n}\n\nfunction getBlockColor(idx: number) {\n  return FIELD_COLOR_KEYS[idx % FIELD_COLOR_KEYS.length];\n}\n\nfunction toHex(n: number): string {\n  return `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n}\n\n/**\n * Calculate block size based on registers and register arrays\n * For regular registers: 4 bytes per register\n * For register arrays: count * stride bytes\n * Falls back to explicit size if no registers\n */\nfunction calculateBlockSize(block: any): number {\n  const registers = block?.registers || [];\n  if (registers.length === 0) {\n    return block?.size ?? block?.range ?? 4;\n  }\n\n  let totalSize = 0;\n  for (const reg of registers) {\n    if (reg.__kind === \"array\") {\n      // Register array: size = count * stride\n      const count = reg.count || 1;\n      const stride = reg.stride || 4;\n      totalSize += count * stride;\n    } else {\n      // Regular register: 4 bytes\n      totalSize += 4;\n    }\n  }\n  return totalSize;\n}\n\nconst AddressMapVisualizer: React.FC<AddressMapVisualizerProps> = ({\n  blocks,\n  hoveredBlockIndex = null,\n  setHoveredBlockIndex = () => {},\n  totalAddressSpace = 65536, // Default 64KB\n  onBlockClick,\n}) => {\n  // Calculate max address to determine total range\n  const maxAddress = useMemo(() => {\n    if (!blocks || blocks.length === 0) {\n      return totalAddressSpace;\n    }\n    const max = blocks.reduce((acc, block) => {\n      const base = block.base_address ?? block.offset ?? 0;\n      const size = calculateBlockSize(block);\n      return Math.max(acc, base + size);\n    }, 0);\n    return Math.max(max, totalAddressSpace);\n  }, [blocks, totalAddressSpace]);\n\n  // Group blocks by address ranges\n  const groups = useMemo(() => {\n    return blocks.map((block, idx) => {\n      const base = block.base_address ?? block.offset ?? 0;\n      const size = calculateBlockSize(block);\n      return {\n        idx,\n        name: block.name || `Block ${idx}`,\n        start: base,\n        end: base + size - 1,\n        size,\n        color: getBlockColor(idx),\n        usage: block.usage || \"register\",\n      };\n    });\n  }, [blocks]);\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"relative w-full flex items-start overflow-x-auto pb-2\">\n        {/* Address grid background */}\n        {/* <div className=\"absolute inset-0 pointer-events-none fpga-bit-grid-bg bg-[size:32px_48px] rounded-lg\" /> */}\n        <div className=\"relative flex flex-row items-end gap-0 pl-4 pr-2 pt-12 pb-2 min-h-[64px] w-full\">\n          {groups.map((group, groupIdx) => {\n            const isHovered = hoveredBlockIndex === group.idx;\n            const separatorShadow =\n              \"inset 0 0 0 1px var(--vscode-panel-border)\";\n            return (\n              <div\n                key={group.idx}\n                className={`relative flex-1 flex flex-col items-center justify-end select-none min-w-[120px] ${isHovered ? \"z-10\" : \"\"}`}\n                style={{ cursor: onBlockClick ? \"pointer\" : \"default\" }}\n                onMouseEnter={() => setHoveredBlockIndex(group.idx)}\n                onMouseLeave={() => setHoveredBlockIndex(null)}\n                onClick={() => onBlockClick?.(group.idx)}\n              >\n                <div\n                  className=\"h-20 w-full overflow-hidden flex items-center justify-center px-2 rounded-md\"\n                  style={{\n                    background: FIELD_COLORS[group.color],\n                    opacity: 1,\n                    transform: isHovered ? \"translateY(-2px)\" : undefined,\n                    filter: isHovered\n                      ? \"saturate(1.15) brightness(1.05)\"\n                      : undefined,\n                    boxShadow: isHovered\n                      ? `${separatorShadow}, 0 0 0 2px var(--vscode-focusBorder), 0 10px 20px color-mix(in srgb, var(--vscode-foreground) 22%, transparent)`\n                      : separatorShadow,\n                  }}\n                >\n                  <div className=\"flex flex-col items-center gap-0.5\">\n                    <span className=\"text-lg select-none\">\n                      {group.usage === \"memory\" ? \"📦\" : \"📋\"}\n                    </span>\n                    <span className=\"text-[10px] font-mono text-white/80 font-semibold select-none text-center leading-tight\">\n                      {group.usage === \"memory\" ? \"MEM\" : \"REG\"}\n                    </span>\n                  </div>\n                </div>\n                <div\n                  className={`absolute -top-12 px-2 py-0.5 rounded border shadow text-xs whitespace-nowrap pointer-events-none ${\n                    groupIdx === 0 ? \"left-0\" : \"left-1/2 -translate-x-1/2\"\n                  }`}\n                  style={{\n                    background: \"var(--vscode-editorWidget-background)\",\n                    color: \"var(--vscode-foreground)\",\n                    borderColor: \"var(--vscode-panel-border)\",\n                  }}\n                >\n                  <div className=\"font-bold\">\n                    {group.name}\n                    <span className=\"ml-2 vscode-muted font-mono text-[11px]\">\n                      [{toHex(group.start)}:{toHex(group.end)}]\n                    </span>\n                  </div>\n                  <div className=\"text-[11px] vscode-muted font-mono\">\n                    {group.size < 1024\n                      ? `${group.size}B`\n                      : group.size < 1048576\n                        ? `${(group.size / 1024).toFixed(1)}KB`\n                        : `${(group.size / 1048576).toFixed(1)}MB`}\n                  </div>\n                </div>\n                <div className=\"flex w-full justify-center\">\n                  <div className=\"text-center text-[11px] vscode-muted font-mono mt-1\">\n                    {toHex(group.start)}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddressMapVisualizer;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/BitFieldVisualizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[248,251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[248,251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[970,973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[970,973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":29,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":29,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":30,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":30,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":31,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":31,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":33,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":33,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":34,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":34,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":40,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":17},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":41,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":41,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3126,3129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3126,3129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":118,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":118,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":118,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":118,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":119,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":119,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":119,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":119,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":120,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":120,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":121,"column":7,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":121,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":121,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":121,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":124,"column":8,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":124,"endColumn":13},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":124,"column":15,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":124,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":128,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":128,"endColumn":12},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":129,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":129,"endColumn":10},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":130,"column":7,"nodeType":"Property","messageId":"anyAssignment","endLine":130,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":130,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":130,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":131,"column":28,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":131,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":131,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":131,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number | undefined`.","line":131,"column":57,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":131,"endColumn":62},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4080,4083],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4080,4083],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4958,4961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4958,4961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type (number | null)[].","line":190,"column":9,"nodeType":"VariableDeclarator","messageId":"unsafeAssignment","endLine":190,"endColumn":71},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":304,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":304,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7949,7952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7949,7952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty arrow function.","line":338,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":338,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .width on an `any` value.","line":682,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":682,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":682,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":682,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20205,20208],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20205,20208],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .width on an `any` value.","line":700,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":700,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":700,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":700,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20764,20767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20764,20767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":735,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":735,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .width on an `any` value.","line":735,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":735,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":735,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":735,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21683,21686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21683,21686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":737,"column":33,"nodeType":"Identifier","messageId":"invalid","endLine":737,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":763,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":763,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":763,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":763,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type (number | null)[].","line":770,"column":9,"nodeType":"VariableDeclarator","messageId":"unsafeAssignment","endLine":770,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":772,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":772,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":773,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":773,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":773,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":773,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":774,"column":16,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":774,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [i] resolves to an any value.","line":775,"column":14,"nodeType":"Identifier","messageId":"unsafeComputedMemberAccess","endLine":775,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":777,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":777,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit on an `any` value.","line":778,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":778,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Computed name [field.bit] resolves to an any value.","line":778,"column":12,"nodeType":"MemberExpression","messageId":"unsafeComputedMemberAccess","endLine":778,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type (0 | 1)[].","line":783,"column":11,"nodeType":"VariableDeclarator","messageId":"unsafeAssignment","endLine":783,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":789,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":789,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":789,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":789,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":887,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":887,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26043,26046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26043,26046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":888,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":888,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":893,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":893,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26290,26293],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26290,26293],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":894,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":894,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .preventDefault on an `any` value.","line":897,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":897,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":897,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":897,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stopPropagation on an `any` value.","line":898,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":898,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":898,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":898,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .currentTarget on an `any` value.","line":902,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":902,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":902,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":902,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":1038,"column":21,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":1038,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":1040,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1040,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":1040,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1040,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":1042,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1042,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dragKey' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1390,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1390,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":1442,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":1442,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":1442,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1442,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":1503,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1503,"endColumn":55}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":68,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { VSCodeTextField } from \"@vscode/webview-ui-toolkit/react\";\nimport { FIELD_COLORS, getFieldColor } from \"../shared/colors\";\n\ninterface BitFieldVisualizerProps {\n  fields: any[];\n  hoveredFieldIndex?: number | null;\n  setHoveredFieldIndex?: (idx: number | null) => void;\n  registerSize?: number;\n  layout?: \"default\" | \"pro\";\n  onUpdateFieldReset?: (fieldIndex: number, resetValue: number | null) => void;\n  onUpdateFieldRange?: (fieldIndex: number, newRange: [number, number]) => void;\n  onBatchUpdateFields?: (\n    updates: { idx: number; range: [number, number] }[],\n  ) => void;\n  onCreateField?: (field: {\n    bit_range: [number, number];\n    name: string;\n  }) => void;\n  /** Called during Ctrl+drag to report preview ranges. Pass null to clear preview. */\n  onDragPreview?: (\n    preview: { idx: number; range: [number, number] }[] | null,\n  ) => void;\n}\n\n\nfunction getFieldRange(field: any): { lo: number; hi: number } | null {\n  if (\n    field?.bit_range &&\n    Array.isArray(field.bit_range) &&\n    field.bit_range.length === 2\n  ) {\n    const hi = Number(field.bit_range[0]);\n    const lo = Number(field.bit_range[1]);\n    if (!Number.isFinite(hi) || !Number.isFinite(lo)) {\n      return null;\n    }\n    return { lo: Math.min(lo, hi), hi: Math.max(lo, hi) };\n  }\n  if (field?.bit !== undefined) {\n    const b = Number(field.bit);\n    if (!Number.isFinite(b)) {\n      return null;\n    }\n    return { lo: b, hi: b };\n  }\n  return null;\n}\n\nfunction bitAt(value: number, bitIndex: number): 0 | 1 {\n  if (!Number.isFinite(value) || bitIndex < 0) {\n    return 0;\n  }\n  // Avoid 32-bit-only bitwise ops; support up to ~53 bits safely.\n  const div = Math.floor(value / Math.pow(2, bitIndex));\n  return div % 2 === 1 ? 1 : 0;\n}\n\nfunction setBit(value: number, bitIndex: number, desired: 0 | 1): number {\n  const base = Number.isFinite(value) ? Math.max(0, Math.trunc(value)) : 0;\n  if (bitIndex < 0) {\n    return base;\n  }\n  const current = bitAt(base, bitIndex);\n  if (current === desired) {\n    return base;\n  }\n  const delta = Math.pow(2, bitIndex);\n  return desired === 1 ? base + delta : Math.max(0, base - delta);\n}\n\nfunction parseRegisterValue(text: string): number | null {\n  const s = text.trim();\n  if (!s) {\n    return null;\n  }\n  // Accept decimal or 0x-prefixed hex.\n  const v = Number.parseInt(s, 0);\n  if (!Number.isFinite(v)) {\n    return null;\n  }\n  return v;\n}\n\nfunction maxForBits(bitCount: number): number {\n  if (bitCount <= 0) {\n    return 0;\n  }\n  // JS Numbers are safe up to 53 bits of integer precision.\n  if (bitCount >= 53) {\n    return Number.MAX_SAFE_INTEGER;\n  }\n  return Math.pow(2, bitCount) - 1;\n}\n\nfunction extractBits(value: number, lo: number, width: number): number {\n  if (!Number.isFinite(value)) {\n    return 0;\n  }\n  if (width <= 0) {\n    return 0;\n  }\n  const shifted = Math.floor(value / Math.pow(2, lo));\n  const mask = width >= 53 ? Number.MAX_SAFE_INTEGER : Math.pow(2, width) - 1;\n  return shifted % (mask + 1);\n}\n\n// Group fields by contiguous bit ranges for pro layout\nfunction groupFields(fields: any[]) {\n  const groups: {\n    idx: number;\n    start: number;\n    end: number;\n    name: string;\n    color: string;\n  }[] = [];\n  fields.forEach((field, idx) => {\n    let start = field.bit;\n    let end = field.bit;\n    if (field.bit_range) {\n      [end, start] = field.bit_range; // [hi, lo]\n    }\n    if (start > end) {\n      [start, end] = [end, start];\n    }\n    groups.push({\n      idx,\n      start,\n      end,\n      name: field.name,\n      color: getFieldColor(field.name || `field${idx}`, start),\n    });\n  });\n  // Sort by start bit descending (MSB on left)\n  groups.sort((a, b) => b.start - a.start);\n  return groups;\n}\n\ntype ProSegment =\n  | {\n      type: \"field\";\n      idx: number;\n      start: number;\n      end: number;\n      name: string;\n      color: string;\n    }\n  | { type: \"gap\"; start: number; end: number };\n\n/**\n * Build layout segments including fields and gaps, ordered MSB to LSB.\n */\nfunction buildProLayoutSegments(\n  fields: any[],\n  registerSize: number,\n): ProSegment[] {\n  const groups = groupFields(fields);\n  const segments: ProSegment[] = [];\n\n  // Sort groups by end (MSB) descending for left-to-right rendering\n  const sorted = [...groups].sort((a, b) => b.end - a.end);\n\n  let cursor = registerSize - 1; // Start from MSB\n\n  for (const group of sorted) {\n    // If there's a gap before this field\n    if (cursor > group.end) {\n      segments.push({ type: \"gap\", start: group.end + 1, end: cursor });\n    }\n    // Add the field\n    segments.push({ type: \"field\", ...group });\n    cursor = group.start - 1;\n  }\n\n  // If there's a gap at the end (toward LSB)\n  if (cursor >= 0) {\n    segments.push({ type: \"gap\", start: 0, end: cursor });\n  }\n\n  return segments;\n}\n\n/**\n * Build an array mapping each bit index to its owning field index, or null if gap.\n */\nfunction buildBitOwnerArray(\n  fields: any[],\n  registerSize: number,\n): (number | null)[] {\n  const owners: (number | null)[] = new Array(registerSize).fill(null);\n  fields.forEach((field, idx) => {\n    const range = getFieldRange(field);\n    if (range) {\n      for (let bit = range.lo; bit <= range.hi; bit++) {\n        if (bit >= 0 && bit < registerSize) {\n          owners[bit] = idx;\n        }\n      }\n    }\n  });\n  return owners;\n}\n\n/**\n * Determine resize capabilities for each edge of a field.\n * Returns whether each edge can shrink (field width > 1) and/or expand (gap adjacent).\n */\nfunction getResizableEdges(\n  fieldStart: number,\n  fieldEnd: number,\n  bitOwners: (number | null)[],\n  registerSize: number,\n): {\n  left: { canShrink: boolean; canExpand: boolean };\n  right: { canShrink: boolean; canExpand: boolean };\n} {\n  const msbBit = Math.max(fieldStart, fieldEnd);\n  const lsbBit = Math.min(fieldStart, fieldEnd);\n  const fieldWidth = msbBit - lsbBit + 1;\n\n  const canShrink = fieldWidth > 1;\n  const hasGapLeft = lsbBit > 0 && bitOwners[lsbBit - 1] === null;\n  const hasGapRight =\n    msbBit < registerSize - 1 && bitOwners[msbBit + 1] === null;\n\n  return {\n    left: { canShrink, canExpand: hasGapLeft },\n    right: { canShrink, canExpand: hasGapRight },\n  };\n}\n\n// ============================================================================\n// Shift-Drag Types and Helpers\n// ============================================================================\n\ninterface ShiftDragState {\n  active: boolean;\n  mode: \"resize\" | \"create\";\n  targetFieldIndex: number | null;\n  resizeEdge: \"msb\" | \"lsb\" | null;\n  originalRange: { lo: number; hi: number } | null;\n  anchorBit: number;\n  currentBit: number;\n  minBit: number;\n  maxBit: number;\n}\n\nconst SHIFT_DRAG_INITIAL: ShiftDragState = {\n  active: false,\n  mode: \"resize\",\n  targetFieldIndex: null,\n  resizeEdge: null,\n  originalRange: null,\n  anchorBit: 0,\n  currentBit: 0,\n  minBit: 0,\n  maxBit: 31,\n};\n\ninterface CtrlDragState {\n  active: boolean;\n  draggedFieldIndex: number | null;\n  previewSegments: ProSegment[] | null;\n}\n\nconst CTRL_DRAG_INITIAL: CtrlDragState = {\n  active: false,\n  draggedFieldIndex: null,\n  previewSegments: null,\n};\n\n/**\n * Find the boundaries of the gap containing startBit.\n * Returns { minBit, maxBit } for the contiguous empty region.\n */\nfunction findGapBoundaries(\n  startBit: number,\n  bits: (number | null)[],\n  registerSize: number,\n): { minBit: number; maxBit: number } {\n  let minBit = startBit;\n  let maxBit = startBit;\n\n  // Expand toward MSB (higher bits)\n  while (maxBit < registerSize - 1 && bits[maxBit + 1] === null) {\n    maxBit++;\n  }\n\n  // Expand toward LSB (lower bits)\n  while (minBit > 0 && bits[minBit - 1] === null) {\n    minBit--;\n  }\n\n  return { minBit, maxBit };\n}\n\n/**\n * Find the collision boundary when resizing a field toward 'edge'.\n * Returns the maximum (for msb) or minimum (for lsb) bit the field can extend to.\n */\nfunction findResizeBoundary(\n  fieldIndex: number,\n  edge: \"msb\" | \"lsb\",\n  fields: any[],\n  registerSize: number,\n): number {\n  const thisRange = getFieldRange(fields[fieldIndex]);\n  if (!thisRange) {return edge === \"msb\" ? registerSize - 1 : 0;}\n\n  if (edge === \"msb\") {\n    // Find nearest field above our MSB\n    let limit = registerSize - 1;\n    for (let i = 0; i < fields.length; i++) {\n      if (i === fieldIndex) {continue;}\n      const r = getFieldRange(fields[i]);\n      if (r && r.lo > thisRange.hi) {\n        limit = Math.min(limit, r.lo - 1);\n      }\n    }\n    return limit;\n  } else {\n    // Find nearest field below our LSB\n    let limit = 0;\n    for (let i = 0; i < fields.length; i++) {\n      if (i === fieldIndex) {continue;}\n      const r = getFieldRange(fields[i]);\n      if (r && r.hi < thisRange.lo) {\n        limit = Math.max(limit, r.hi + 1);\n      }\n    }\n    return limit;\n  }\n}\n\nconst BitFieldVisualizer: React.FC<BitFieldVisualizerProps> = ({\n  fields,\n  hoveredFieldIndex = null,\n  setHoveredFieldIndex = () => {},\n  registerSize = 32,\n  layout = \"default\",\n  onUpdateFieldReset,\n  onUpdateFieldRange,\n  onBatchUpdateFields,\n  onCreateField,\n  onDragPreview,\n}) => {\n  const [valueView, setValueView] = useState<\"hex\" | \"dec\">(\"hex\");\n  const [valueDraft, setValueDraft] = useState<string>(\"\");\n  const [valueEditing, setValueEditing] = useState(false);\n  const [valueError, setValueError] = useState<string | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [dragSetTo, setDragSetTo] = useState<0 | 1>(0);\n  const [dragLast, setDragLast] = useState<string | null>(null);\n\n  // Shift-drag state for resizing/creating fields\n  const [shiftDrag, setShiftDrag] =\n    useState<ShiftDragState>(SHIFT_DRAG_INITIAL);\n\n  // Ctrl-drag state for reordering fields\n  const [ctrlDrag, setCtrlDrag] = useState<CtrlDragState>(CTRL_DRAG_INITIAL);\n\n  // Ref to track ctrlDrag state synchronously (avoids stale closures in event handlers)\n  const ctrlDragRef = useRef<CtrlDragState>(ctrlDrag);\n  useEffect(() => {\n    ctrlDragRef.current = ctrlDrag;\n  }, [ctrlDrag]);\n\n  // Track Shift key held (for showing resize handles)\n  const [shiftHeld, setShiftHeld] = useState(false);\n\n  // Track Ctrl/Meta key held (for grab cursor)\n  const [ctrlHeld, setCtrlHeld] = useState(false);\n\n  // Listen for Shift key press/release globally\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"Shift\" && !shiftDrag.active) {\n        setShiftHeld(true);\n      }\n      if ((e.key === \"Control\" || e.key === \"Meta\") && !ctrlDrag.active) {\n        setCtrlHeld(true);\n      }\n    };\n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (e.key === \"Shift\") {\n        setShiftHeld(false);\n      }\n      if (e.key === \"Control\" || e.key === \"Meta\") {\n        setCtrlHeld(false);\n      }\n    };\n    const handleBlur = () => {\n      setShiftHeld(false);\n      setCtrlHeld(false);\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    window.addEventListener(\"blur\", handleBlur);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n      window.removeEventListener(\"blur\", handleBlur);\n    };\n  }, [shiftDrag.active, ctrlDrag.active]);\n\n  useEffect(() => {\n    if (!dragActive) {\n      return;\n    }\n    const stop = () => {\n      setDragActive(false);\n      setDragLast(null);\n    };\n    window.addEventListener(\"pointerup\", stop);\n    window.addEventListener(\"pointercancel\", stop);\n    window.addEventListener(\"blur\", stop);\n    return () => {\n      window.removeEventListener(\"pointerup\", stop);\n      window.removeEventListener(\"pointercancel\", stop);\n      window.removeEventListener(\"blur\", stop);\n    };\n  }, [dragActive]);\n\n  // Shift-drag: cleanup on pointer up\n  useEffect(() => {\n    if (!shiftDrag.active) {\n      return;\n    }\n    const commitShiftDrag = () => {\n      if (shiftDrag.mode === \"resize\" && shiftDrag.targetFieldIndex !== null) {\n        // Redefine field range to the dragged selection\n        const newLo = Math.min(shiftDrag.anchorBit, shiftDrag.currentBit);\n        const newHi = Math.max(shiftDrag.anchorBit, shiftDrag.currentBit);\n        if (onUpdateFieldRange && newLo <= newHi) {\n          onUpdateFieldRange(shiftDrag.targetFieldIndex, [newHi, newLo]);\n        }\n      } else if (shiftDrag.mode === \"create\") {\n        const lo = Math.min(shiftDrag.anchorBit, shiftDrag.currentBit);\n        const hi = Math.max(shiftDrag.anchorBit, shiftDrag.currentBit);\n        if (onCreateField && lo <= hi) {\n          onCreateField({ bit_range: [hi, lo], name: \"new_field\" });\n        }\n      }\n      setShiftDrag(SHIFT_DRAG_INITIAL);\n    };\n    window.addEventListener(\"pointerup\", commitShiftDrag);\n    window.addEventListener(\"pointercancel\", () =>\n      setShiftDrag(SHIFT_DRAG_INITIAL),\n    );\n    window.addEventListener(\"blur\", () => setShiftDrag(SHIFT_DRAG_INITIAL));\n    return () => {\n      window.removeEventListener(\"pointerup\", commitShiftDrag);\n      window.removeEventListener(\"pointercancel\", () =>\n        setShiftDrag(SHIFT_DRAG_INITIAL),\n      );\n      window.removeEventListener(\"blur\", () =>\n        setShiftDrag(SHIFT_DRAG_INITIAL),\n      );\n    };\n  }, [shiftDrag, onUpdateFieldRange, onCreateField]);\n\n  // Ctrl-drag: cleanup on pointer up\n  useEffect(() => {\n    if (!ctrlDrag.active) {\n      return;\n    }\n    const commitCtrlDrag = () => {\n      if (ctrlDrag.previewSegments) {\n        // Commit the new layout\n        // Group by field index and update ranges\n        const updates: { idx: number; range: [number, number] }[] = [];\n\n        ctrlDrag.previewSegments.forEach((seg) => {\n          if (seg.type === \"field\") {\n            updates.push({ idx: seg.idx, range: [seg.end, seg.start] });\n          }\n        });\n\n        // Apply updates\n        if (onBatchUpdateFields && updates.length > 0) {\n          onBatchUpdateFields(updates);\n        } else if (onUpdateFieldRange) {\n          // Fallback (might cause race conditions)\n          updates.forEach((update) => {\n            onUpdateFieldRange(update.idx, update.range);\n          });\n        }\n      }\n      // Clear preview in parent\n      onDragPreview?.(null);\n      // Delay clearing preview to next frame to avoid flash back to original position\n      requestAnimationFrame(() => {\n        setCtrlDrag(CTRL_DRAG_INITIAL);\n      });\n    };\n    const cancelCtrlDrag = () => {\n      onDragPreview?.(null);\n      setCtrlDrag(CTRL_DRAG_INITIAL);\n    };\n    window.addEventListener(\"pointerup\", commitCtrlDrag);\n    window.addEventListener(\"pointercancel\", cancelCtrlDrag);\n    window.addEventListener(\"blur\", cancelCtrlDrag);\n    return () => {\n      window.removeEventListener(\"pointerup\", commitCtrlDrag);\n      window.removeEventListener(\"pointercancel\", cancelCtrlDrag);\n      window.removeEventListener(\"blur\", cancelCtrlDrag);\n    };\n  }, [ctrlDrag, onUpdateFieldRange, onBatchUpdateFields, onDragPreview]);\n\n  /**\n   * Handle Ctrl+PointerDown to start reorder mode.\n   */\n  const handleCtrlPointerDown = (bit: number, e: React.PointerEvent) => {\n    if (!e.ctrlKey && !e.metaKey) {return;}\n    if (e.button !== 0) {return;}\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fieldAtBit = bits[bit];\n    if (fieldAtBit !== null) {\n      // Start reorder drag\n      setCtrlDrag({\n        active: true,\n        draggedFieldIndex: fieldAtBit,\n        previewSegments: buildProLayoutSegments(fields, registerSize),\n      });\n    }\n  };\n\n  /**\n   * Handle Shift+PointerDown to start resize or create mode.\n   */\n  const handleShiftPointerDown = (bit: number, e: React.PointerEvent) => {\n    if (!e.shiftKey) {return;}\n    if (e.button !== 0) {return;}\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fieldAtBit = bits[bit];\n\n    if (fieldAtBit !== null) {\n      // RESIZE mode - redefine field range via drag selection\n      const fieldRange = getFieldRange(fields[fieldAtBit]);\n      if (!fieldRange) {return;}\n\n      // Allow dragging anywhere from collision boundary on LSB side to collision boundary on MSB side\n      const minBit = findResizeBoundary(\n        fieldAtBit,\n        \"lsb\",\n        fields,\n        registerSize,\n      );\n      const maxBit = findResizeBoundary(\n        fieldAtBit,\n        \"msb\",\n        fields,\n        registerSize,\n      );\n\n      // Determine which edge the user is grabbing (closer to MSB or LSB)\n      const fieldMid = (fieldRange.lo + fieldRange.hi) / 2;\n      const grabbingMsbEdge = bit >= fieldMid;\n\n      // Anchor is the OPPOSITE edge (the one that stays fixed)\n      // If grabbing MSB edge, anchor is LSB; if grabbing LSB edge, anchor is MSB\n      const anchorBit = grabbingMsbEdge ? fieldRange.lo : fieldRange.hi;\n\n      setShiftDrag({\n        active: true,\n        mode: \"resize\",\n        targetFieldIndex: fieldAtBit,\n        resizeEdge: null, // Not used in new model\n        originalRange: fieldRange,\n        anchorBit,\n        currentBit: bit,\n        minBit,\n        maxBit,\n      });\n    } else {\n      // CREATE mode\n      const gap = findGapBoundaries(bit, bits, registerSize);\n\n      setShiftDrag({\n        active: true,\n        mode: \"create\",\n        targetFieldIndex: null,\n        resizeEdge: null,\n        originalRange: null,\n        anchorBit: bit,\n        currentBit: bit,\n        minBit: gap.minBit,\n        maxBit: gap.maxBit,\n      });\n    }\n  };\n\n  /**\n   * Handle pointer move during shift-drag.\n   */\n  const handleShiftPointerMove = (bit: number) => {\n    if (!shiftDrag.active) {return;}\n    const clampedBit = Math.max(\n      shiftDrag.minBit,\n      Math.min(bit, shiftDrag.maxBit),\n    );\n    if (clampedBit !== shiftDrag.currentBit) {\n      setShiftDrag((prev) => ({ ...prev, currentBit: clampedBit }));\n    }\n  };\n\n  /**\n   * Handle pointer move during ctrl-drag (reordering).\n   * Uses a repacking algorithm that allows field swapping.\n   */\n  const handleCtrlPointerMove = (bit: number) => {\n    if (!ctrlDrag.active || ctrlDrag.draggedFieldIndex === null) {return;}\n\n    // 1. Get original segments (MSB -> LSB)\n    const originalSegments = buildProLayoutSegments(fields, registerSize);\n\n    // 2. Find and remove dragged segment\n    const draggedSegIndex = originalSegments.findIndex(\n      (s) => s.type === \"field\" && s.idx === ctrlDrag.draggedFieldIndex,\n    );\n    if (draggedSegIndex === -1) {return;}\n\n    const draggedSeg = originalSegments[draggedSegIndex];\n    if (draggedSeg.type !== \"field\") {return;} // Should not happen\n\n    // Remove it from the list for calculations\n    const cleanSegments = [...originalSegments];\n    cleanSegments.splice(draggedSegIndex, 1);\n\n    // 3. Repack clean list to build coordinate space\n    let currentBit = 0;\n    const repackedClean = cleanSegments\n      .slice()\n      .reverse()\n      .map((seg) => {\n        const width = seg.end - seg.start + 1;\n        const newLo = currentBit;\n        const newHi = currentBit + width - 1;\n        currentBit += width;\n        return { ...seg, start: newLo, end: newHi, width };\n      })\n      .reverse(); // Restore MSB->LSB order\n\n    // 4. Find insertion target in repacked list\n    const effectiveCursor = Math.min(bit, currentBit);\n\n    // Find target segment covering effectiveCursor\n    const targetIdx = repackedClean.findIndex(\n      (s) => effectiveCursor >= s.start && effectiveCursor <= s.end,\n    );\n\n    const newSegments: ProSegment[] = [];\n\n    // Helper to insert dragged segment\n    const insertDragged = () => {\n      newSegments.push(draggedSeg);\n    };\n\n    if (targetIdx === -1) {\n      // Cursor is above all content (implicit top gap)\n      // Just append at MSB side (start of list since MSB->LSB)\n      insertDragged(); // Insert as MSB\n      newSegments.push(...cleanSegments);\n    } else {\n      // We hit a segment.\n      const target = repackedClean[targetIdx];\n      const originalTarget = cleanSegments[targetIdx]; // Corresponding logic segment\n\n      const offsetInTarget = effectiveCursor - target.start;\n\n      if (target.type === \"field\") {\n        // Insert Before or After based on center?\n        // Since list is MSB->LSB:\n        // \"Before\" in array = Higher Bits (MSB side).\n        // \"After\" in array = Lower Bits (LSB side).\n        const msbSide = offsetInTarget > (target as any).width / 2;\n\n        // Split list at target\n        const before = cleanSegments.slice(0, targetIdx);\n        const after = cleanSegments.slice(targetIdx + 1);\n\n        newSegments.push(...before);\n        if (msbSide) {\n          insertDragged();\n          newSegments.push(originalTarget);\n        } else {\n          newSegments.push(originalTarget);\n          insertDragged();\n        }\n        newSegments.push(...after);\n      } else {\n        // Target is GAP. Split it.\n        const botWidth = offsetInTarget;\n        const topWidth = (target as any).width - offsetInTarget;\n\n        const before = cleanSegments.slice(0, targetIdx);\n        const after = cleanSegments.slice(targetIdx + 1);\n\n        newSegments.push(...before);\n\n        if (topWidth > 0) {\n          newSegments.push({\n            type: \"gap\",\n            start: 0,\n            end: topWidth - 1, // Set end so width calculation works: end - start + 1 = topWidth\n          } as ProSegment);\n        }\n\n        insertDragged();\n\n        if (botWidth > 0) {\n          newSegments.push({\n            type: \"gap\",\n            start: 0,\n            end: botWidth - 1, // Set end so width calculation works: end - start + 1 = botWidth\n          } as ProSegment);\n        }\n\n        newSegments.push(...after);\n      }\n    }\n\n    // 5. Final Repack for Preview\n    currentBit = 0;\n    const finalSegments = newSegments\n      .slice()\n      .reverse()\n      .map((seg) => {\n        const width = (seg as any).width || seg.end - seg.start + 1;\n        const lo = currentBit;\n        const hi = currentBit + width - 1;\n        currentBit += width;\n        return { ...seg, start: lo, end: hi };\n      })\n      .reverse();\n\n    setCtrlDrag((prev) => ({ ...prev, previewSegments: finalSegments }));\n\n    // Report preview to parent for live table updates\n    if (onDragPreview) {\n      const previewUpdates = finalSegments\n        .filter(\n          (seg): seg is typeof seg & { type: \"field\" } => seg.type === \"field\",\n        )\n        .map((seg) => ({\n          idx: seg.idx,\n          range: [seg.end, seg.start] as [number, number],\n        }));\n      onDragPreview(previewUpdates);\n    }\n  };\n\n  const applyBit = (fieldIndex: number, localBit: number, desired: 0 | 1) => {\n    if (!onUpdateFieldReset) {\n      return;\n    }\n    const raw = fields?.[fieldIndex]?.reset_value;\n    const current = raw === null || raw === undefined ? 0 : Number(raw);\n    const next = setBit(current, localBit, desired);\n    onUpdateFieldReset(fieldIndex, next);\n  };\n\n  // Build a per-bit array with field index or null\n  const bits: (number | null)[] = Array(registerSize).fill(null);\n  fields.forEach((field, idx) => {\n    if (field.bit_range) {\n      const [hi, lo] = field.bit_range;\n      for (let i = lo; i <= hi; ++i) {\n        bits[i] = idx;\n      }\n    } else if (field.bit !== undefined) {\n      bits[field.bit] = idx;\n    }\n  });\n\n  const bitValues = useMemo(() => {\n    const values: (0 | 1)[] = Array(registerSize).fill(0);\n    fields.forEach((field) => {\n      const r = getFieldRange(field);\n      if (!r) {\n        return;\n      }\n      const raw = field?.reset_value;\n      const fieldValue = raw === null || raw === undefined ? 0 : Number(raw);\n      for (let bit = r.lo; bit <= r.hi; bit++) {\n        const localBit = bit - r.lo;\n        values[bit] = bitAt(fieldValue, localBit);\n      }\n    });\n    return values;\n  }, [fields, registerSize]);\n\n  // Memoize bit-to-field owner mapping for resize handle edge detection\n  const bitOwners = useMemo(\n    () => buildBitOwnerArray(fields, registerSize),\n    [fields, registerSize],\n  );\n\n  const registerValue = useMemo(() => {\n    let v = 0;\n    for (let bit = 0; bit < registerSize; bit++) {\n      if (bitValues[bit] === 1) {\n        v += Math.pow(2, bit);\n      }\n    }\n    return v;\n  }, [bitValues, registerSize]);\n\n  const registerValueText = useMemo(() => {\n    if (valueView === \"dec\") {\n      return registerValue.toString(10);\n    }\n    return `0x${registerValue.toString(16).toUpperCase()}`;\n  }, [registerValue, valueView]);\n\n  useEffect(() => {\n    if (valueEditing) {\n      return;\n    }\n    setValueDraft(registerValueText);\n    setValueError(null);\n  }, [registerValueText, valueEditing]);\n\n  const validateRegisterValue = (v: number | null): string | null => {\n    if (v === null) {\n      return \"Value is required\";\n    }\n    if (!Number.isFinite(v)) {\n      return \"Invalid number\";\n    }\n    if (v < 0) {\n      return \"Value must be >= 0\";\n    }\n    const max = maxForBits(registerSize);\n    if (v > max) {\n      return `Value too large for ${registerSize} bit(s)`;\n    }\n    return null;\n  };\n\n  const applyRegisterValue = (v: number) => {\n    if (!onUpdateFieldReset) {\n      return;\n    }\n    fields.forEach((field, fieldIndex) => {\n      const r = getFieldRange(field);\n      if (!r) {\n        return;\n      }\n      const width = r.hi - r.lo + 1;\n      const sub = extractBits(v, r.lo, width);\n      onUpdateFieldReset(fieldIndex, sub);\n    });\n  };\n\n  const commitRegisterValueDraft = () => {\n    const parsed = parseRegisterValue(valueDraft);\n    const err = validateRegisterValue(parsed);\n    setValueError(err);\n    if (err || parsed === null) {\n      return;\n    }\n    applyRegisterValue(parsed);\n  };\n\n  const renderValueBar = () => (\n    <div\n      className=\"mt-3 flex items-center justify-start gap-3 p-3 rounded\"\n      style={{ background: \"var(--vscode-editor-background)\" }}\n    >\n      <div className=\"text-sm vscode-muted font-mono font-semibold\">Value:</div>\n      <div className=\"min-w-[320px] text-base\">\n        <VSCodeTextField\n          className=\"w-full\"\n          value={valueDraft}\n          onFocus={() => setValueEditing(true)}\n          onBlur={() => {\n            setValueEditing(false);\n            commitRegisterValueDraft();\n          }}\n          onInput={(e: any) => {\n            const next = String(e.target.value ?? \"\");\n            setValueDraft(next);\n            const parsed = parseRegisterValue(next);\n            setValueError(validateRegisterValue(parsed));\n          }}\n          onKeyDown={(e: any) => {\n            if (e.key !== \"Enter\") {\n              return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            commitRegisterValueDraft();\n            setValueEditing(false);\n            // Return focus to the visualizer root.\n            e.currentTarget?.blur?.();\n          }}\n        />\n        {valueError ? (\n          <div className=\"text-xs vscode-error mt-1\">{valueError}</div>\n        ) : null}\n      </div>\n      <button\n        type=\"button\"\n        className=\"px-3 py-2 text-sm font-semibold border rounded\"\n        style={{\n          borderColor:\n            \"var(--vscode-button-border, var(--vscode-panel-border))\",\n          background: \"var(--vscode-button-background)\",\n          color: \"var(--vscode-button-foreground)\",\n        }}\n        onMouseEnter={(e) => {\n          (e.currentTarget as HTMLButtonElement).style.background =\n            \"var(--vscode-button-hoverBackground)\";\n        }}\n        onMouseLeave={(e) => {\n          (e.currentTarget as HTMLButtonElement).style.background =\n            \"var(--vscode-button-background)\";\n        }}\n        onClick={() => setValueView((v) => (v === \"hex\" ? \"dec\" : \"hex\"))}\n        title=\"Toggle hex/dec\"\n      >\n        {valueView.toUpperCase()}\n      </button>\n    </div>\n  );\n\n  if (layout === \"pro\") {\n    // Grouped, modern layout with floating labels and grid - includes gaps\n    const segments =\n      ctrlDrag.active && ctrlDrag.previewSegments\n        ? ctrlDrag.previewSegments\n        : buildProLayoutSegments(fields, registerSize);\n    return (\n      <div className=\"w-full\">\n        <div className=\"relative w-full flex items-start overflow-x-auto pb-2\">\n          {/* Bit grid background */}\n          <div className=\"relative flex flex-row items-end gap-0.5 pl-4 pr-2 pt-12 pb-2 min-h-[64px] w-full min-w-max\">\n            {/* Render each segment (field or gap) */}\n            {segments.map((segment, segIdx) => {\n              const width = segment.end - segment.start + 1;\n\n              if (segment.type === \"gap\") {\n                // Render gap segment\n                return (\n                  <div\n                    key={`gap-${segIdx}`}\n                    className=\"relative flex flex-col items-center justify-end select-none\"\n                    style={{ width: `calc(${width} * 2rem)` }}\n                  >\n                    <div className=\"h-20 w-full rounded-t-md overflow-hidden flex\">\n                      {Array.from({ length: width }).map((_, i) => {\n                        const bit = segment.end - i;\n                        // Check if this bit is in the active drag range (for both create and resize extending into gap)\n                        const isInDragRange =\n                          shiftDrag.active &&\n                          (shiftDrag.mode === \"create\" ||\n                            shiftDrag.mode === \"resize\") &&\n                          bit >=\n                            Math.min(\n                              shiftDrag.anchorBit,\n                              shiftDrag.currentBit,\n                            ) &&\n                          bit <=\n                            Math.max(shiftDrag.anchorBit, shiftDrag.currentBit);\n                        return (\n                          <div\n                            key={i}\n                            className=\"w-10 h-20 flex items-center justify-center touch-none\"\n                            style={{\n                              background: isInDragRange\n                                ? \"var(--vscode-editor-selectionBackground, #264f78)\"\n                                : \"var(--vscode-editor-background)\",\n                              opacity: isInDragRange ? 0.9 : 0.5,\n                              border: isInDragRange\n                                ? \"2px solid var(--vscode-focusBorder)\"\n                                : undefined,\n                              cursor: ctrlDrag.active\n                                ? \"grabbing\"\n                                : ctrlHeld\n                                  ? \"grab\"\n                                  : \"pointer\",\n                            }}\n                            onPointerDown={(e) => {\n                              if (e.shiftKey) {\n                                handleShiftPointerDown(bit, e);\n                                return;\n                              }\n                              if (e.ctrlKey || e.metaKey) {\n                                handleCtrlPointerDown(bit, e);\n                                return;\n                              }\n                            }}\n                            onPointerMove={() => {\n                              handleShiftPointerMove(bit);\n                              handleCtrlPointerMove(bit);\n                            }}\n                            onPointerEnter={() => {\n                              if (shiftDrag.active) {handleShiftPointerMove(bit);}\n                              if (ctrlDragRef.current.active)\n                                {handleCtrlPointerMove(bit);}\n                            }}\n                          >\n                            <span className=\"text-sm font-mono vscode-muted select-none\">\n                              {isInDragRange ? \"+\" : \"-\"}\n                            </span>\n                          </div>\n                        );\n                      })}\n                    </div>\n                    {/* Per-bit numbers below */}\n                    <div className=\"flex flex-row w-full\">\n                      {Array.from({ length: width }).map((_, i) => {\n                        const bit = segment.end - i;\n                        return (\n                          <div\n                            key={bit}\n                            className=\"w-10 text-center text-[11px] vscode-muted font-mono mt-1\"\n                          >\n                            {bit}\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                );\n              }\n\n              // Render field segment\n              const group = segment;\n              const isHovered = hoveredFieldIndex === group.idx;\n              const field = fields[group.idx];\n              const fieldReset =\n                field?.reset_value === null || field?.reset_value === undefined\n                  ? 0\n                  : Number(field.reset_value);\n              const isSingleBit = width === 1;\n\n              return (\n                <div\n                  key={group.idx}\n                  className={`relative flex flex-col items-center justify-end select-none ${isHovered ? \"z-10\" : \"\"}`}\n                  style={{ width: `calc(${width} * 2rem)` }}\n                  onMouseEnter={() => setHoveredFieldIndex(group.idx)}\n                  onMouseLeave={() => setHoveredFieldIndex(null)}\n                >\n                  <div\n                    className=\"h-20 w-full rounded-t-md overflow-hidden flex relative\"\n                    style={{\n                      opacity: 1,\n                      transform: isHovered ? \"translateY(-2px)\" : undefined,\n                      filter: isHovered\n                        ? \"saturate(1.15) brightness(1.05)\"\n                        : undefined,\n                      boxShadow: isHovered\n                        ? \"0 0 0 2px var(--vscode-focusBorder), 0 10px 20px color-mix(in srgb, var(--vscode-foreground) 22%, transparent)\"\n                        : undefined,\n                    }}\n                  >\n                    {/* Resize handles - show when Shift is held and hovering this field */}\n                    {shiftHeld &&\n                      isHovered &&\n                      !shiftDrag.active &&\n                      (() => {\n                        const edges = getResizableEdges(\n                          group.start,\n                          group.end,\n                          bitOwners,\n                          registerSize,\n                        );\n                        // Visual left = MSB edge (edges.right), Visual right = LSB edge (edges.left)\n                        const showVisualLeft =\n                          edges.right.canShrink || edges.right.canExpand;\n                        const showVisualRight =\n                          edges.left.canShrink || edges.left.canExpand;\n                        const visualLeftBidirectional =\n                          edges.right.canShrink && edges.right.canExpand;\n                        const visualRightBidirectional =\n                          edges.left.canShrink && edges.left.canExpand;\n\n                        return (\n                          <>\n                            {/* Left handle (MSB side - visual left) */}\n                            {showVisualLeft && (\n                              <div\n                                className=\"absolute left-0 top-0 bottom-0 w-6 flex items-center justify-center z-20 pointer-events-none\"\n                                style={{\n                                  background:\n                                    \"linear-gradient(90deg, rgba(0,0,0,0.5) 0%, transparent 100%)\",\n                                }}\n                              >\n                                <svg\n                                  width=\"16\"\n                                  height=\"16\"\n                                  viewBox=\"0 0 16 16\"\n                                  fill=\"none\"\n                                  className=\"drop-shadow-lg\"\n                                >\n                                  {visualLeftBidirectional ? (\n                                    /* Bidirectional arrow ↔ - cleaner, wider design */\n                                    <>\n                                      <path\n                                        d=\"M2 8H14\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                      />\n                                      <path\n                                        d=\"M5 5L2 8L5 11\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <path\n                                        d=\"M11 5L14 8L11 11\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </>\n                                  ) : edges.right.canExpand ? (\n                                    /* Outward arrow ← (expand) */\n                                    <path\n                                      d=\"M10 4L6 8L10 12\"\n                                      stroke=\"white\"\n                                      strokeWidth=\"2.5\"\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                    />\n                                  ) : (\n                                    /* Inward arrow → (shrink) */\n                                    <path\n                                      d=\"M6 4L10 8L6 12\"\n                                      stroke=\"white\"\n                                      strokeWidth=\"2.5\"\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                    />\n                                  )}\n                                </svg>\n                              </div>\n                            )}\n                            {/* Right handle (LSB side - visual right) */}\n                            {showVisualRight && (\n                              <div\n                                className=\"absolute right-0 top-0 bottom-0 w-6 flex items-center justify-center z-20 pointer-events-none\"\n                                style={{\n                                  background:\n                                    \"linear-gradient(270deg, rgba(0,0,0,0.5) 0%, transparent 100%)\",\n                                }}\n                              >\n                                <svg\n                                  width=\"16\"\n                                  height=\"16\"\n                                  viewBox=\"0 0 16 16\"\n                                  fill=\"none\"\n                                  className=\"drop-shadow-lg\"\n                                >\n                                  {visualRightBidirectional ? (\n                                    /* Bidirectional arrow ↔ - cleaner, wider design */\n                                    <>\n                                      <path\n                                        d=\"M2 8H14\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                      />\n                                      <path\n                                        d=\"M5 5L2 8L5 11\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <path\n                                        d=\"M11 5L14 8L11 11\"\n                                        stroke=\"white\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </>\n                                  ) : edges.left.canExpand ? (\n                                    /* Outward arrow → (expand) */\n                                    <path\n                                      d=\"M6 4L10 8L6 12\"\n                                      stroke=\"white\"\n                                      strokeWidth=\"2.5\"\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                    />\n                                  ) : (\n                                    /* Inward arrow ← (shrink) */\n                                    <path\n                                      d=\"M10 4L6 8L10 12\"\n                                      stroke=\"white\"\n                                      strokeWidth=\"2.5\"\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                    />\n                                  )}\n                                </svg>\n                              </div>\n                            )}\n                          </>\n                        );\n                      })()}\n                    {Array.from({ length: width }).map((_, i) => {\n                      const bit = group.end - i;\n                      const localBit = bit - group.start;\n                      const v = bitAt(fieldReset, localBit);\n                      const dragKey = `${group.idx}:${localBit}`;\n\n                      // Check if we're resizing this field\n                      const isResizingThisField =\n                        shiftDrag.active &&\n                        shiftDrag.mode === \"resize\" &&\n                        shiftDrag.targetFieldIndex === group.idx;\n\n                      // Check if this bit is within the new drag selection range\n                      const isInNewRange =\n                        isResizingThisField &&\n                        bit >=\n                          Math.min(shiftDrag.anchorBit, shiftDrag.currentBit) &&\n                        bit <=\n                          Math.max(shiftDrag.anchorBit, shiftDrag.currentBit);\n\n                      // Check if this bit will be removed (outside new range)\n                      const isOutOfNewRange =\n                        isResizingThisField && !isInNewRange;\n\n                      return (\n                        <div\n                          key={i}\n                          className={`w-10 h-20 flex items-center justify-center touch-none ${\n                            v === 1 && !isOutOfNewRange\n                              ? \"ring-1 ring-white/70 ring-inset\"\n                              : \"\"\n                          } ${\n                            isSingleBit\n                              ? \"rounded-md\"\n                              : i === 0\n                                ? \"rounded-l-md\"\n                                : i === width - 1\n                                  ? \"rounded-r-md\"\n                                  : \"\"\n                          }`}\n                          style={{\n                            background: isOutOfNewRange\n                              ? \"var(--vscode-editor-background)\"\n                              : FIELD_COLORS[group.color],\n                            opacity: isOutOfNewRange ? 0.3 : 1,\n                            border: isInNewRange\n                              ? \"2px solid var(--vscode-focusBorder)\"\n                              : undefined,\n                            cursor: ctrlDrag.active\n                              ? \"grabbing\"\n                              : ctrlHeld\n                                ? \"grab\"\n                                : \"pointer\",\n                          }}\n                          onPointerDown={(e) => {\n                            // Shift-drag for resize\n                            if (e.shiftKey) {\n                              handleShiftPointerDown(bit, e);\n                              return;\n                            }\n                            // Ctrl-drag for reorder\n                            if (e.ctrlKey || e.metaKey) {\n                              handleCtrlPointerDown(bit, e);\n                              return;\n                            }\n                            // Normal bit toggle\n                            if (!onUpdateFieldReset) {\n                              return;\n                            }\n                            if (e.button !== 0) {\n                              return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n\n                            const desired: 0 | 1 = v === 1 ? 0 : 1;\n                            setDragActive(true);\n                            setDragSetTo(desired);\n                            setDragLast(dragKey);\n                            applyBit(group.idx, localBit, desired);\n                          }}\n                          onPointerMove={() => {\n                            handleShiftPointerMove(bit);\n                            handleCtrlPointerMove(bit);\n                          }}\n                          onPointerEnter={(e) => {\n                            // Handle shift-drag move\n                            if (shiftDrag.active) {\n                              handleShiftPointerMove(bit);\n                              return;\n                            }\n                            if (ctrlDragRef.current.active) {\n                              handleCtrlPointerMove(bit);\n                              return;\n                            }\n                            // Normal bit drag\n                            if (!dragActive) {\n                              return;\n                            }\n                            if (!onUpdateFieldReset) {\n                              return;\n                            }\n                            if (dragLast === dragKey) {\n                              return;\n                            }\n                            e.preventDefault();\n                            e.stopPropagation();\n                            setDragLast(dragKey);\n                            applyBit(group.idx, localBit, dragSetTo);\n                          }}\n                        >\n                          <span\n                            className={`text-sm font-mono text-white/90 select-none ${v === 1 ? \"font-bold\" : \"font-normal\"}`}\n                          >\n                            {v}\n                          </span>\n                        </div>\n                      );\n                    })}\n                  </div>\n                  <div\n                    className={`absolute -top-12 px-2 py-0.5 rounded border shadow text-xs whitespace-nowrap pointer-events-none ${\n                      segIdx === 0 ? \"left-0\" : \"left-1/2 -translate-x-1/2\"\n                    }`}\n                    style={{\n                      background: \"var(--vscode-editorWidget-background)\",\n                      color: \"var(--vscode-foreground)\",\n                      borderColor: \"var(--vscode-panel-border)\",\n                    }}\n                  >\n                    <div className=\"font-bold\">\n                      {group.name}\n                      <span className=\"ml-2 vscode-muted font-mono text-[11px]\">\n                        [{Math.max(group.start, group.end)}:\n                        {Math.min(group.start, group.end)}]\n                      </span>\n                    </div>\n                    <div className=\"text-[11px] vscode-muted font-mono\">\n                      {valueView === \"dec\"\n                        ? Math.trunc(fieldReset).toString(10)\n                        : `0x${Math.trunc(fieldReset).toString(16).toUpperCase()}`}\n                    </div>\n                  </div>\n                  {/* Per-bit numbers below, LSB (right) to MSB (left) */}\n                  <div className=\"flex flex-row w-full\">\n                    {Array.from({ length: width }).map((_, i) => {\n                      const bit = group.end - i;\n                      return (\n                        <div\n                          key={bit}\n                          className=\"w-10 text-center text-[11px] vscode-muted font-mono mt-1\"\n                        >\n                          {bit}\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {renderValueBar()}\n      </div>\n    );\n  }\n\n  // Default: simple per-bit grid\n  return (\n    <div className=\"w-full flex flex-col items-center\">\n      <div className=\"flex flex-row-reverse gap-0.5 select-none\">\n        {bits.map((fieldIdx, bit) => {\n          const isHovered = fieldIdx !== null && fieldIdx === hoveredFieldIndex;\n          const dragKey = fieldIdx !== null ? `${fieldIdx}:${bit}` : null;\n          const range =\n            fieldIdx !== null ? getFieldRange(fields[fieldIdx]) : null;\n          const isSingleBit = range ? range.hi === range.lo : false;\n          const cornerClass = range\n            ? isSingleBit\n              ? \"rounded-md\"\n              : bit === range.hi\n                ? \"rounded-l-md\"\n                : bit === range.lo\n                  ? \"rounded-r-md\"\n                  : \"\"\n            : \"\";\n          return (\n            <div\n              key={bit}\n              className={`w-10 h-20 flex flex-col items-center justify-end cursor-pointer group ${\n                fieldIdx !== null ? \"bg-blue-500\" : \"vscode-surface-alt\"\n              } ${isHovered ? \"z-10\" : \"\"} ${cornerClass}`}\n              style={{\n                boxShadow: isHovered\n                  ? \"inset 0 0 0 2px var(--vscode-focusBorder)\"\n                  : undefined,\n              }}\n              onMouseEnter={() =>\n                fieldIdx !== null && setHoveredFieldIndex(fieldIdx)\n              }\n              onMouseLeave={() => setHoveredFieldIndex(null)}\n              onPointerDown={(e) => {\n                // Shift-drag for resize/create\n                if (e.shiftKey) {\n                  handleShiftPointerDown(bit, e);\n                  return;\n                }\n                // Normal bit toggle\n                if (!onUpdateFieldReset) {\n                  return;\n                }\n                if (fieldIdx === null) {\n                  return;\n                }\n                if (e.button !== 0) {\n                  return;\n                }\n                const r = getFieldRange(fields[fieldIdx]);\n                if (!r) {\n                  return;\n                }\n                const localBit = bit - r.lo;\n                if (localBit < 0 || localBit > r.hi - r.lo) {\n                  return;\n                }\n                const raw = fields[fieldIdx]?.reset_value;\n                const current =\n                  raw === null || raw === undefined ? 0 : Number(raw);\n                const curBit = bitAt(current, localBit);\n                const desired: 0 | 1 = curBit === 1 ? 0 : 1;\n                e.preventDefault();\n                e.stopPropagation();\n                setDragActive(true);\n                setDragSetTo(desired);\n                setDragLast(`${fieldIdx}:${localBit}`);\n                applyBit(fieldIdx, localBit, desired);\n              }}\n              onPointerMove={() => handleShiftPointerMove(bit)}\n              onPointerEnter={(e) => {\n                // Handle shift-drag move\n                if (shiftDrag.active) {\n                  handleShiftPointerMove(bit);\n                  return;\n                }\n                // Normal bit drag\n                if (!dragActive) {\n                  return;\n                }\n                if (!onUpdateFieldReset) {\n                  return;\n                }\n                if (fieldIdx === null) {\n                  return;\n                }\n                const r = getFieldRange(fields[fieldIdx]);\n                if (!r) {\n                  return;\n                }\n                const localBit = bit - r.lo;\n                if (localBit < 0 || localBit > r.hi - r.lo) {\n                  return;\n                }\n                const key = `${fieldIdx}:${localBit}`;\n                if (dragLast === key) {\n                  return;\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                setDragLast(key);\n                applyBit(fieldIdx, localBit, dragSetTo);\n              }}\n            >\n              <span className=\"text-[10px] vscode-muted font-mono\">{bit}</span>\n              <span className=\"text-[11px] font-mono mb-1\">\n                {bitValues[bit]}\n              </span>\n            </div>\n          );\n        })}\n      </div>\n      <div className=\"flex flex-row-reverse gap-0.5 mt-1\">\n        {bits.map((fieldIdx, bit) => (\n          <div\n            key={bit}\n            className=\"w-7 text-center text-[10px] vscode-muted font-mono\"\n          >\n            {fieldIdx !== null ? fields[fieldIdx].name : \"\"}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"w-full\">{renderValueBar()}</div>\n    </div>\n  );\n};\n\nexport default BitFieldVisualizer;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/DetailsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":83,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":83,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3056,3058],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":99,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":99,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3590,3592],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * DetailsPanel — thin routing coordinator.\n *\n * Determines which sub-editor to show based on selectedType, handles the\n * array-element masquerade pattern, and exposes a focus() imperative handle.\n * All rendering / editing logic lives in the sub-components.\n */\nimport React, {\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { Register } from \"../types/memoryMap\";\nimport type { YamlUpdateHandler, YamlPath } from \"../types/editor\";\n\nimport { RegisterEditor, RegisterEditorHandle } from \"./register/RegisterEditor\";\nimport { MemoryMapEditor } from \"./memorymap/MemoryMapEditor\";\nimport { BlockEditor } from \"./memorymap/BlockEditor\";\nimport { RegisterArrayEditor } from \"./memorymap/RegisterArrayEditor\";\n\n// ---------------------------------------------------------------------------\n// Public types (kept here so importers don't need to change)\n// ---------------------------------------------------------------------------\n\nexport interface DetailsPanelProps {\n  selectedType: \"memoryMap\" | \"block\" | \"register\" | \"array\" | null;\n  selectedObject: unknown;\n  selectionMeta?: {\n    absoluteAddress?: number;\n    relativeOffset?: number;\n    focusDetails?: boolean;\n  };\n  onUpdate: YamlUpdateHandler;\n  onNavigateToRegister?: (regIndex: number) => void;\n  onNavigateToBlock?: (blockIndex: number) => void;\n}\n\nexport type DetailsPanelHandle = {\n  focus: () => void;\n};\n\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\nconst DetailsPanel = React.forwardRef<DetailsPanelHandle, DetailsPanelProps>(\n  (props, ref) => {\n    const {\n      selectedType: rawSelectedType,\n      selectedObject: rawSelectedObject,\n      selectionMeta: rawSelectionMeta,\n      onUpdate: rawOnUpdate,\n      onNavigateToRegister,\n      onNavigateToBlock,\n    } = props;\n\n    // -----------------------------------------------------------------------\n    // Array-element masquerade\n    // When selecting a specific element of an array (e.g. TIMER[0]) we render\n    // it as either a register view (single-register arrays) or a block view\n    // (multi-register arrays) so the user sees the correct editor.\n    // -----------------------------------------------------------------------\n    let selectedType = rawSelectedType;\n    let selectedObject = rawSelectedObject;\n    let selectionMeta = rawSelectionMeta;\n    let onUpdate = rawOnUpdate;\n\n    if (\n      rawSelectedType === \"array\" &&\n      (rawSelectedObject as Record<string, unknown>)?.__element_index !== undefined\n    ) {\n      const arr = rawSelectedObject as Record<string, unknown> & { registers?: unknown[] };\n      const registers: unknown[] = (arr.registers as unknown[]) || [];\n\n      if (registers.length === 1) {\n        // Single Register: Masquerade as a single Register View\n        selectedType = \"register\";\n        selectedObject = registers[0];\n\n        if (arr.__element_base !== undefined) {\n          selectionMeta = {\n            ...(rawSelectionMeta || {}),\n            absoluteAddress: arr.__element_base as number,\n          };\n        }\n\n        onUpdate = (path: YamlPath, value: unknown) => {\n          rawOnUpdate([\"registers\", 0, ...path], value);\n        };\n      } else {\n        // Multiple Registers: Masquerade as a Block View\n        selectedType = \"block\";\n        selectedObject = arr;\n\n        if (arr.__element_base !== undefined) {\n          selectedObject = { ...arr, base_address: arr.__element_base };\n          selectionMeta = {\n            ...(rawSelectionMeta || {}),\n            absoluteAddress: arr.__element_base as number,\n          };\n        }\n        // Updates to ['registers', idx, prop] work natively on the Array object.\n      }\n    }\n\n    // -----------------------------------------------------------------------\n    // Imperative handle — forward focus() to the active sub-editor\n    // -----------------------------------------------------------------------\n    const registerEditorRef = useRef<RegisterEditorHandle | null>(null);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        focus: () => {\n          if (selectedType === \"register\") {\n            registerEditorRef.current?.focus();\n          }\n          // MemoryMapEditor, BlockEditor and RegisterArrayEditor manage focus\n          // internally via their own focusDetails handling.\n        },\n      }),\n      [selectedType],\n    );\n\n    // -----------------------------------------------------------------------\n    // Derived: normalised fields for the register view\n    // -----------------------------------------------------------------------\n    const isRegister = selectedType === \"register\" && !!selectedObject;\n    const reg = isRegister ? (selectedObject as Register) : null;\n\n    const fields = useMemo(() => {\n      if (!reg?.fields) {return [];}\n      return reg.fields.map((f) => {\n        if (f.bit_range) {return f;}\n        if (f.bit_offset !== undefined && f.bit_width !== undefined) {\n          const lo = Number(f.bit_offset);\n          const width = Number(f.bit_width);\n          const hi = lo + width - 1;\n          return { ...f, bit_range: [hi, lo] };\n        }\n        return f;\n      });\n    }, [reg?.fields]);\n\n    // -----------------------------------------------------------------------\n    // Render\n    // -----------------------------------------------------------------------\n\n    if (!selectedObject) {\n      return (\n        <div className=\"flex items-center justify-center h-full vscode-muted text-sm\">\n          Select an item to view details\n        </div>\n      );\n    }\n\n    if (selectedType === \"register\" && reg) {\n      return (\n        <RegisterEditor\n          ref={registerEditorRef}\n          register={reg}\n          fields={fields}\n          selectionMeta={selectionMeta}\n          onUpdate={onUpdate}\n        />\n      );\n    }\n\n    if (selectedType === \"memoryMap\") {\n      return (\n        <MemoryMapEditor\n          memoryMap={selectedObject}\n          selectionMeta={selectionMeta}\n          onUpdate={onUpdate}\n          onNavigateToBlock={onNavigateToBlock}\n        />\n      );\n    }\n\n    if (selectedType === \"block\") {\n      return (\n        <BlockEditor\n          block={selectedObject}\n          selectionMeta={selectionMeta}\n          onUpdate={onUpdate}\n          onNavigateToRegister={onNavigateToRegister}\n        />\n      );\n    }\n\n    if (selectedType === \"array\") {\n      return (\n        <RegisterArrayEditor\n          registerArray={selectedObject}\n          onUpdate={onUpdate}\n        />\n      );\n    }\n\n    return (\n      <div className=\"flex items-center justify-center h-full vscode-muted text-sm\">\n        Select an item to view details\n      </div>\n    );\n  },\n);\n\nDetailsPanel.displayName = \"DetailsPanel\";\n\nexport default DetailsPanel;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/Outline.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[420,423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[420,423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":25,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":25,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":26,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":26,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":27,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":27,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[896,899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[896,899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":64,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":64,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1676,1679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1676,1679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1701,1704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1701,1704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":66,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":66,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .forEach on an `any` value.","line":70,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":70,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":70,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":70,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .register_arrays on an `any` value.","line":70,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":70,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1897,1900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1897,1900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1950,1953],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1950,1953],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":396,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":396,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13096,13099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13096,13099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":409,"column":17,"nodeType":"Property","messageId":"anyAssignment","endLine":409,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type string[].","line":410,"column":17,"nodeType":"Property","messageId":"unsafeAssignment","endLine":414,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":413,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":413,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":434,"column":35,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":434,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":434,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":434,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":440,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":440,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .children_registers on an `any` value.","line":442,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":442,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .children_registers on an `any` value.","line":444,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":444,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":444,"column":16,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":444,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":458,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":458,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":458,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15224,15227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15224,15227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":458,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15249,15252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15249,15252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .register_arrays on an `any` value.","line":498,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":498,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":498,"column":16,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":498,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":498,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":498,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16722,16725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16722,16725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":526,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":526,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":526,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17487,17490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17487,17490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":526,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":526,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17512,17515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17512,17515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":533,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":533,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .register_arrays on an `any` value.","line":551,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":551,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":551,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":551,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18134,18137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18134,18137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":551,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":551,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18165,18168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18165,18168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .includes on an `any` value.","line":552,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":552,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":552,"column":32,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":552,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .toLowerCase on an `any` value.","line":552,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":552,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":552,"column":32,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":552,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":552,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":552,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":561,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":561,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18473,18476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18473,18476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":591,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":591,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":591,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":591,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19198,19201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19198,19201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":591,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":591,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19223,19226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19223,19226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":592,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":592,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19261,19264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19261,19264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .forEach on an `any` value.","line":686,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":686,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":686,"column":9,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":686,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .register_arrays on an `any` value.","line":686,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":686,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":686,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":686,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22533,22536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22533,22536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":687,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":687,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22586,22589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22586,22589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":692,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":692,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type string[].","line":693,"column":15,"nodeType":"Property","messageId":"unsafeAssignment","endLine":697,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":696,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":696,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .children_registers on an `any` value.","line":709,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":709,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .children_registers on an `any` value.","line":712,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":712,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":712,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":712,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":779,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":779,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":779,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":779,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":781,"column":35,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":781,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":792,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":818,"endColumn":13},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":814,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":814,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":814,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":814,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26909,26912],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26909,26912],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":815,"column":13,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":815,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":815,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":815,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":66,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useImperativeHandle, useMemo, useRef, useState } from \"react\";\nimport {\n  MemoryMap,\n  AddressBlock,\n  Register,\n  RegisterArray,\n} from \"../types/memoryMap\";\n\ntype YamlPath = Array<string | number>;\n\ntype RegisterArrayNode = {\n  __kind: \"array\";\n  name: string;\n  address_offset: number;\n  count: number;\n  stride: number;\n  description?: string;\n  registers: Register[];\n};\n\nconst isArrayNode = (node: any): node is RegisterArrayNode => {\n  return (\n    !!node &&\n    typeof node === \"object\" &&\n    node.__kind === \"array\" &&\n    typeof node.count === \"number\" &&\n    typeof node.stride === \"number\"\n  );\n};\n\nconst toHex = (n: number) => `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n\ninterface OutlineProps {\n  memoryMap: MemoryMap;\n  selectedId: string | null;\n  onSelect: (selection: {\n    id: string;\n    type: \"memoryMap\" | \"block\" | \"register\" | \"array\";\n    object: any;\n    breadcrumbs: string[];\n    path: YamlPath;\n    meta?: {\n      absoluteAddress?: number;\n      relativeOffset?: number;\n      focusDetails?: boolean;\n    };\n  }) => void;\n  /** Called when user renames an item via F2 or 'e' key */\n  onRename?: (path: YamlPath, newName: string) => void;\n}\n\nexport type OutlineHandle = {\n  focus: () => void;\n};\n\nconst Outline = React.forwardRef<OutlineHandle, OutlineProps>(\n  ({ memoryMap, selectedId, onSelect, onRename }, ref) => {\n    // By default, expand all blocks and registers\n    const allIds = useMemo(() => {\n      const ids = new Set<string>([\"root\"]);\n      (memoryMap.address_blocks ?? []).forEach((block, blockIdx) => {\n        const blockId = `block-${blockIdx}`;\n        ids.add(blockId);\n        const regs = ((block as any).registers ?? []) as any[];\n        regs.forEach((reg, regIdx) => {\n          if (reg && reg.__kind === \"array\") {\n            ids.add(`block-${blockIdx}-arrreg-${regIdx}`);\n          }\n        });\n        ((block as any).register_arrays ?? []).forEach(\n          (arr: any, arrIdx: number) => {\n            ids.add(`block-${blockIdx}-arr-${arrIdx}`);\n          },\n        );\n      });\n      return ids;\n    }, [memoryMap]);\n    const [expanded, setExpanded] = useState<Set<string>>(allIds);\n    const [query, setQuery] = useState(\"\");\n    const treeFocusRef = useRef<HTMLDivElement | null>(null);\n\n    // Inline editing state\n    const [editingId, setEditingId] = useState<string | null>(null);\n    const [editingValue, setEditingValue] = useState(\"\");\n    const editInputRef = useRef<HTMLInputElement | null>(null);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        focus: () => {\n          treeFocusRef.current?.focus();\n        },\n      }),\n      [],\n    );\n\n    const toggleExpand = (id: string, e: React.MouseEvent) => {\n      e.stopPropagation();\n      const newExpanded = new Set(expanded);\n      if (newExpanded.has(id)) {\n        newExpanded.delete(id);\n      } else {\n        newExpanded.add(id);\n      }\n      setExpanded(newExpanded);\n    };\n\n    /**\n     * Start inline edit mode for the given item.\n     */\n    const startEditing = (id: string, currentName: string) => {\n      if (!onRename) {return;}\n      setEditingId(id);\n      setEditingValue(currentName);\n      // Focus input after render\n      setTimeout(() => {\n        editInputRef.current?.focus();\n        editInputRef.current?.select();\n      }, 0);\n    };\n\n    /**\n     * Commit the rename and exit edit mode.\n     */\n    const commitEdit = (path: YamlPath) => {\n      if (!onRename || !editingId) {return;}\n      const trimmed = editingValue.trim();\n      if (trimmed) {\n        onRename([...path, \"name\"], trimmed);\n      }\n      setEditingId(null);\n      setEditingValue(\"\");\n      treeFocusRef.current?.focus();\n    };\n\n    /**\n     * Cancel editing without saving.\n     */\n    const cancelEdit = () => {\n      setEditingId(null);\n      setEditingValue(\"\");\n      treeFocusRef.current?.focus();\n    };\n\n    /**\n     * Render either an inline edit input or the static name text.\n     */\n    const renderNameOrEdit = (\n      id: string,\n      name: string,\n      path: YamlPath,\n      className?: string,\n    ) => {\n      if (editingId === id) {\n        return (\n          <input\n            ref={editInputRef}\n            type=\"text\"\n            className=\"outline-inline-edit px-1 py-0 text-sm rounded border\"\n            style={{\n              background: \"var(--vscode-input-background)\",\n              color: \"var(--vscode-input-foreground)\",\n              borderColor: \"var(--vscode-focusBorder)\",\n              minWidth: \"80px\",\n              width: `${Math.max(80, editingValue.length * 8)}px`,\n            }}\n            value={editingValue}\n            onChange={(e) => setEditingValue(e.target.value)}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                e.stopPropagation();\n                commitEdit(path);\n              } else if (e.key === \"Escape\") {\n                e.preventDefault();\n                e.stopPropagation();\n                cancelEdit();\n              }\n            }}\n            onBlur={() => commitEdit(path)}\n            onClick={(e) => e.stopPropagation()}\n          />\n        );\n      }\n      return <span className={className}>{name}</span>;\n    };\n\n    const renderLeafRegister = (\n      reg: Register,\n      blockIndex: number,\n      regIndex: number,\n    ) => {\n      const id = `block-${blockIndex}-reg-${regIndex}`;\n      const isSelected = selectedId === id;\n      const block = memoryMap.address_blocks?.[blockIndex];\n      const absolute = (block?.base_address ?? 0) + (reg.address_offset ?? 0);\n      return (\n        <div\n          key={id}\n          className={`tree-item ${isSelected ? \"selected\" : \"\"} gap-2 text-sm`}\n          onClick={() => {\n            treeFocusRef.current?.focus();\n            onSelect({\n              id,\n              type: \"register\",\n              object: reg,\n              breadcrumbs: [\n                memoryMap.name || \"Memory Map\",\n                memoryMap.address_blocks?.[blockIndex]?.name ?? \"\",\n                reg.name,\n              ],\n              path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n              meta: {\n                absoluteAddress: absolute,\n                relativeOffset: reg.address_offset ?? 0,\n              },\n            });\n          }}\n          style={{ paddingLeft: \"40px\" }}\n        >\n          <span\n            className={`codicon codicon-symbol-variable text-[16px] ${isSelected ? \"\" : \"opacity-70\"}`}\n          ></span>\n          {renderNameOrEdit(\n            id,\n            reg.name,\n            [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n            \"flex-1\",\n          )}\n          <span className=\"text-[10px] vscode-muted font-mono\">\n            {toHex(reg.address_offset)}\n          </span>\n        </div>\n      );\n    };\n\n    const renderArrayRegister = (\n      arr: RegisterArrayNode,\n      block: AddressBlock,\n      blockIndex: number,\n      regIndex: number,\n    ) => {\n      const id = `block-${blockIndex}-arrreg-${regIndex}`;\n      const isSelected = selectedId === id;\n      const isExpanded = expanded.has(id);\n\n      const start = (block.base_address ?? 0) + (arr.address_offset ?? 0);\n      const end = start + Math.max(1, arr.count) * Math.max(1, arr.stride) - 1;\n\n      return (\n        <div key={id}>\n          <div\n            className={`tree-item ${isSelected ? \"selected\" : \"\"}`}\n            onClick={() => {\n              treeFocusRef.current?.focus();\n              onSelect({\n                id,\n                type: \"array\",\n                object: arr,\n                breadcrumbs: [\n                  memoryMap.name || \"Memory Map\",\n                  block.name,\n                  arr.name,\n                ],\n                path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n              });\n            }}\n            style={{ paddingLeft: \"40px\" }}\n          >\n            <span\n              className={`codicon codicon-chevron-${isExpanded ? \"down\" : \"right\"}`}\n              onClick={(e) => toggleExpand(id, e)}\n              style={{ marginRight: \"6px\", cursor: \"pointer\" }}\n            ></span>\n            <span\n              className=\"codicon codicon-symbol-array\"\n              style={{ marginRight: \"6px\" }}\n            ></span>\n            {renderNameOrEdit(id, arr.name, [\n              \"addressBlocks\",\n              blockIndex,\n              \"registers\",\n              regIndex,\n            ])}{\" \"}\n            <span className=\"opacity-50\">\n              @ {toHex(start)}-{toHex(end)} [{arr.count}]\n            </span>\n          </div>\n\n          {isExpanded && (\n            <div>\n              {Array.from({ length: arr.count }).map((_, elementIndex) => {\n                const elementId = `${id}-el-${elementIndex}`;\n                const elementBase = start + elementIndex * arr.stride;\n                const isElementSelected = selectedId === elementId;\n                return (\n                  <div key={elementId}>\n                    <div\n                      className={`tree-item ${isElementSelected ? \"selected\" : \"\"}`}\n                      onClick={() => {\n                        treeFocusRef.current?.focus();\n                        onSelect({\n                          id: elementId,\n                          type: \"array\",\n                          object: {\n                            ...arr,\n                            __element_index: elementIndex,\n                            __element_base: elementBase,\n                          },\n                          breadcrumbs: [\n                            memoryMap.name || \"Memory Map\",\n                            block.name,\n                            `${arr.name}[${elementIndex}]`,\n                          ],\n                          path: [\n                            \"addressBlocks\",\n                            blockIndex,\n                            \"registers\",\n                            regIndex,\n                          ],\n                        });\n                      }}\n                      style={{ paddingLeft: \"60px\" }}\n                    >\n                      <span\n                        className=\"codicon codicon-symbol-namespace\"\n                        style={{ marginRight: \"6px\" }}\n                      ></span>\n                      {arr.name}[{elementIndex}]{\" \"}\n                      <span className=\"opacity-50\">@ {toHex(elementBase)}</span>\n                    </div>\n\n                    {arr.registers?.map((reg, childIndex) => {\n                      const childId = `${elementId}-reg-${childIndex}`;\n                      const isChildSelected = selectedId === childId;\n                      const absolute = elementBase + (reg.address_offset ?? 0);\n                      return (\n                        <div\n                          key={childId}\n                          className={`tree-item ${isChildSelected ? \"selected\" : \"\"}`}\n                          onClick={() => {\n                            treeFocusRef.current?.focus();\n                            onSelect({\n                              id: childId,\n                              type: \"register\",\n                              object: reg,\n                              breadcrumbs: [\n                                memoryMap.name || \"Memory Map\",\n                                block.name,\n                                `${arr.name}[${elementIndex}]`,\n                                reg.name,\n                              ],\n                              path: [\n                                \"addressBlocks\",\n                                blockIndex,\n                                \"registers\",\n                                regIndex,\n                                \"registers\",\n                                childIndex,\n                              ],\n                              meta: {\n                                absoluteAddress: absolute,\n                                relativeOffset: reg.address_offset ?? 0,\n                              },\n                            });\n                          }}\n                          style={{ paddingLeft: \"80px\" }}\n                        >\n                          <span\n                            className=\"codicon codicon-symbol-variable\"\n                            style={{ marginRight: \"6px\" }}\n                          ></span>\n                          {renderNameOrEdit(childId, reg.name, [\n                            \"addressBlocks\",\n                            blockIndex,\n                            \"registers\",\n                            regIndex,\n                            \"registers\",\n                            childIndex,\n                          ])}{\" \"}\n                          <span className=\"opacity-50\">\n                            @ {toHex(absolute)}\n                          </span>\n                        </div>\n                      );\n                    })}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const renderArray = (arr: any, blockIndex: number, arrayIndex: number) => {\n      const id = `block-${blockIndex}-arr-${arrayIndex}`;\n      const isSelected = selectedId === id;\n      const isExpanded = expanded.has(id);\n      return (\n        <div key={id}>\n          <div\n            className={`tree-item ${isSelected ? \"selected\" : \"\"}`}\n            onClick={() => {\n              treeFocusRef.current?.focus();\n              onSelect({\n                id,\n                type: \"array\",\n                object: arr,\n                breadcrumbs: [\n                  memoryMap.name || \"Memory Map\",\n                  memoryMap.address_blocks?.[blockIndex]?.name ?? \"\",\n                  arr.name,\n                ],\n                path: [\n                  \"addressBlocks\",\n                  blockIndex,\n                  \"register_arrays\",\n                  arrayIndex,\n                ],\n              });\n            }}\n            style={{ paddingLeft: \"40px\" }}\n          >\n            <span\n              className={`codicon codicon-chevron-${isExpanded ? \"down\" : \"right\"}`}\n              onClick={(e) => toggleExpand(id, e)}\n              style={{ marginRight: \"6px\", cursor: \"pointer\" }}\n            ></span>\n            <span\n              className=\"codicon codicon-symbol-array\"\n              style={{ marginRight: \"6px\" }}\n            ></span>\n            {renderNameOrEdit(id, arr.name, [\n              \"addressBlocks\",\n              blockIndex,\n              \"register_arrays\",\n              arrayIndex,\n            ])}{\" \"}\n            <span className=\"opacity-50\">[{arr.count}]</span>\n          </div>\n          {isExpanded && Array.isArray(arr.children_registers) && (\n            <div>\n              {arr.children_registers.map((reg: Register, idx: number) =>\n                renderLeafRegister(reg, blockIndex, idx),\n              )}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const renderBlock = (block: AddressBlock, blockIndex: number) => {\n      const id = `block-${blockIndex}`;\n      const isExpanded = expanded.has(id);\n      const isSelected = selectedId === id;\n\n      const regsAny = ((block as any).registers ?? []) as any[];\n\n      return (\n        <div key={id}>\n          <div\n            className={`tree-item ${isSelected ? \"selected\" : \"\"}`}\n            onClick={() => {\n              treeFocusRef.current?.focus();\n              onSelect({\n                id,\n                type: \"block\",\n                object: block,\n                breadcrumbs: [memoryMap.name || \"Memory Map\", block.name],\n                path: [\"addressBlocks\", blockIndex],\n              });\n            }}\n            style={{ paddingLeft: \"20px\" }}\n          >\n            <span\n              className={`codicon codicon-chevron-${isExpanded ? \"down\" : \"right\"}`}\n              onClick={(e) => toggleExpand(id, e)}\n              style={{ marginRight: \"6px\", cursor: \"pointer\" }}\n            ></span>\n            <span\n              className=\"codicon codicon-package\"\n              style={{ marginRight: \"6px\" }}\n            ></span>\n            {renderNameOrEdit(id, block.name, [\"addressBlocks\", blockIndex])}{\" \"}\n            <span className=\"opacity-50\">\n              @ 0x{block.base_address.toString(16).toUpperCase()}\n            </span>\n          </div>\n          {isExpanded && (\n            <div>\n              {regsAny.map((node, idx) => {\n                if (isArrayNode(node)) {\n                  return renderArrayRegister(node, block, blockIndex, idx);\n                }\n                return renderLeafRegister(node as Register, blockIndex, idx);\n              })}\n              {(block as any).register_arrays?.map(\n                (arr: RegisterArray, idx: number) =>\n                  renderArray(arr, blockIndex, idx),\n              )}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const rootId = \"root\";\n    const isRootExpanded = expanded.has(rootId);\n    const isRootSelected = selectedId === rootId;\n\n    const filteredBlocks = useMemo(() => {\n      const q = query.trim().toLowerCase();\n      const blocks = (memoryMap.address_blocks ?? []).map((block, index) => ({\n        block,\n        index,\n      }));\n      if (!q) {\n        return blocks;\n      }\n\n      return blocks.filter(({ block }) => {\n        if ((block.name ?? \"\").toLowerCase().includes(q)) {\n          return true;\n        }\n        const regs = ((block as any).registers ?? []) as any[];\n        if (\n          regs.some((r) => {\n            if (!r) {\n              return false;\n            }\n            if (\n              String(r.name ?? \"\")\n                .toLowerCase()\n                .includes(q)\n            ) {\n              return true;\n            }\n            if (isArrayNode(r)) {\n              return (r.registers ?? []).some((rr) =>\n                String(rr.name ?? \"\")\n                  .toLowerCase()\n                  .includes(q),\n              );\n            }\n            return false;\n          })\n        ) {\n          return true;\n        }\n        const arrays = ((block as any).register_arrays ?? []) as any[];\n        if (arrays.some((a) => (a.name ?? \"\").toLowerCase().includes(q))) {\n          return true;\n        }\n        return false;\n      });\n    }, [memoryMap, query]);\n\n    const visibleSelections = useMemo(() => {\n      const items: Array<\n        OutlineProps[\"onSelect\"] extends (arg: infer A) => any ? A : never\n      > = [];\n\n      // Root\n      items.push({\n        id: rootId,\n        type: \"memoryMap\",\n        object: memoryMap,\n        breadcrumbs: [memoryMap.name || \"Memory Map\"],\n        path: [],\n      });\n\n      if (!expanded.has(rootId)) {\n        return items;\n      }\n\n      filteredBlocks.forEach(({ block, index: blockIndex }) => {\n        const blockId = `block-${blockIndex}`;\n        items.push({\n          id: blockId,\n          type: \"block\",\n          object: block,\n          breadcrumbs: [memoryMap.name || \"Memory Map\", block.name],\n          path: [\"addressBlocks\", blockIndex],\n        });\n\n        if (!expanded.has(blockId)) {\n          return;\n        }\n\n        const regsAny = ((block as any).registers ?? []) as any[];\n        regsAny.forEach((node: any, regIndex: number) => {\n          if (isArrayNode(node)) {\n            const arr = node;\n            const arrId = `block-${blockIndex}-arrreg-${regIndex}`;\n            items.push({\n              id: arrId,\n              type: \"array\",\n              object: arr,\n              breadcrumbs: [\n                memoryMap.name || \"Memory Map\",\n                block.name,\n                arr.name,\n              ],\n              path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n            });\n\n            if (!expanded.has(arrId)) {\n              return;\n            }\n\n            const start = (block.base_address ?? 0) + (arr.address_offset ?? 0);\n            Array.from({ length: arr.count }).forEach((_, elementIndex) => {\n              const elementId = `${arrId}-el-${elementIndex}`;\n              const elementBase = start + elementIndex * arr.stride;\n              items.push({\n                id: elementId,\n                type: \"array\",\n                object: {\n                  ...arr,\n                  __element_index: elementIndex,\n                  __element_base: elementBase,\n                },\n                breadcrumbs: [\n                  memoryMap.name || \"Memory Map\",\n                  block.name,\n                  `${arr.name}[${elementIndex}]`,\n                ],\n                path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n              });\n\n              (arr.registers ?? []).forEach(\n                (reg: Register, childIndex: number) => {\n                  const childId = `${elementId}-reg-${childIndex}`;\n                  const absolute = elementBase + (reg.address_offset ?? 0);\n                  items.push({\n                    id: childId,\n                    type: \"register\",\n                    object: reg,\n                    breadcrumbs: [\n                      memoryMap.name || \"Memory Map\",\n                      block.name,\n                      `${arr.name}[${elementIndex}]`,\n                      reg.name,\n                    ],\n                    path: [\n                      \"addressBlocks\",\n                      blockIndex,\n                      \"registers\",\n                      regIndex,\n                      \"registers\",\n                      childIndex,\n                    ],\n                    meta: {\n                      absoluteAddress: absolute,\n                      relativeOffset: reg.address_offset ?? 0,\n                    },\n                  });\n                },\n              );\n            });\n            return;\n          }\n\n          const reg = node as Register;\n          const regId = `block-${blockIndex}-reg-${regIndex}`;\n          const absolute =\n            (block.base_address ?? 0) + (reg.address_offset ?? 0);\n          items.push({\n            id: regId,\n            type: \"register\",\n            object: reg,\n            breadcrumbs: [\n              memoryMap.name || \"Memory Map\",\n              memoryMap.address_blocks?.[blockIndex]?.name ?? \"\",\n              reg.name,\n            ],\n            path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n            meta: {\n              absoluteAddress: absolute,\n              relativeOffset: reg.address_offset ?? 0,\n            },\n          });\n        });\n\n        ((block as any).register_arrays ?? []).forEach(\n          (arr: any, arrayIndex: number) => {\n            const arrId = `block-${blockIndex}-arr-${arrayIndex}`;\n            items.push({\n              id: arrId,\n              type: \"array\",\n              object: arr,\n              breadcrumbs: [\n                memoryMap.name || \"Memory Map\",\n                memoryMap.address_blocks?.[blockIndex]?.name ?? \"\",\n                arr.name,\n              ],\n              path: [\n                \"addressBlocks\",\n                blockIndex,\n                \"register_arrays\",\n                arrayIndex,\n              ],\n            });\n\n            if (!expanded.has(arrId)) {\n              return;\n            }\n            if (!Array.isArray(arr.children_registers)) {\n              return;\n            }\n            arr.children_registers.forEach(\n              (reg: Register, regIndex: number) => {\n                // Matches existing render behavior (renderLeafRegister)\n                const regId = `block-${blockIndex}-reg-${regIndex}`;\n                const absolute =\n                  (block.base_address ?? 0) + (reg.address_offset ?? 0);\n                items.push({\n                  id: regId,\n                  type: \"register\",\n                  object: reg,\n                  breadcrumbs: [\n                    memoryMap.name || \"Memory Map\",\n                    memoryMap.address_blocks?.[blockIndex]?.name ?? \"\",\n                    reg.name,\n                  ],\n                  path: [\"addressBlocks\", blockIndex, \"registers\", regIndex],\n                  meta: {\n                    absoluteAddress: absolute,\n                    relativeOffset: reg.address_offset ?? 0,\n                  },\n                });\n              },\n            );\n          },\n        );\n      });\n\n      return items;\n    }, [memoryMap, expanded, filteredBlocks]);\n\n    const onTreeKeyDown = (e: React.KeyboardEvent) => {\n      // If currently editing, don't handle tree navigation\n      if (editingId) {return;}\n\n      const keyLower = (e.key || \"\").toLowerCase();\n      const isDown = e.key === \"ArrowDown\" || keyLower === \"j\";\n      const isUp = e.key === \"ArrowUp\" || keyLower === \"k\";\n      const isToggleExpand =\n        e.key === \" \" || (e.key === \"Enter\" && !e.shiftKey);\n      const isFocusDetails =\n        (e.key === \"Enter\" && !isToggleExpand) ||\n        e.key === \"ArrowRight\" ||\n        keyLower === \"l\";\n      const isRename = e.key === \"F2\" || keyLower === \"e\";\n\n      if (!isDown && !isUp && !isFocusDetails && !isToggleExpand && !isRename) {\n        return;\n      }\n      if (e.ctrlKey || e.metaKey || e.altKey) {\n        return;\n      }\n\n      const currentId = selectedId ?? rootId;\n      const currentIndex = Math.max(\n        0,\n        visibleSelections.findIndex((s) => s.id === currentId),\n      );\n      const currentSel =\n        visibleSelections[currentIndex] ?? visibleSelections[0];\n      if (!currentSel) {\n        return;\n      }\n\n      // Handle F2 or 'e' to start renaming\n      if (isRename && onRename) {\n        e.preventDefault();\n        e.stopPropagation();\n        const name = currentSel.object?.name ?? \"\";\n        if (name) {\n          startEditing(currentId, name);\n        }\n        return;\n      }\n\n      // Handle Space or Enter to toggle expand/collapse\n      if (isToggleExpand) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        // Check if current node has children\n        const hasChildren = (() => {\n          if (currentId === rootId) {\n            return true; // Root always has blocks\n          }\n          if (currentId.startsWith(\"block-\") && !currentId.includes(\"-reg-\")) {\n            const blockIdx = parseInt(currentId.split(\"-\")[1], 10);\n            const block = memoryMap.address_blocks?.[blockIdx];\n            return (\n              block &&\n              Array.isArray(block.registers) &&\n              block.registers.length > 0\n            );\n          }\n          if (\n            currentId.includes(\"-reg-\") &&\n            currentId.split(\"-reg-\")[1].includes(\"-\")\n          ) {\n            // This is a register array\n            const parts = currentId.split(\"-\");\n            const blockIdx = parseInt(parts[1], 10);\n            const regIdx = parseInt(parts[3], 10);\n            const block = memoryMap.address_blocks?.[blockIdx];\n            const reg = block?.registers?.[regIdx] as any;\n            return reg && (reg.count ?? 0) > 1;\n          }\n          return false;\n        })();\n\n        if (hasChildren) {\n          const newExpanded = new Set(expanded);\n          if (newExpanded.has(currentId)) {\n            newExpanded.delete(currentId);\n          } else {\n            newExpanded.add(currentId);\n          }\n          setExpanded(newExpanded);\n        }\n        return;\n      }\n\n      if (isFocusDetails) {\n        e.preventDefault();\n        e.stopPropagation();\n        onSelect({\n          ...currentSel,\n          meta: { ...(currentSel.meta ?? {}), focusDetails: true },\n        });\n        return;\n      }\n\n      const nextIndex = isDown\n        ? Math.min(visibleSelections.length - 1, currentIndex + 1)\n        : Math.max(0, currentIndex - 1);\n      const nextSel = visibleSelections[nextIndex];\n      if (!nextSel) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      onSelect({\n        ...nextSel,\n        meta: { ...(nextSel.meta ?? {}), focusDetails: false },\n      });\n    };\n\n    return (\n      <>\n        <div className=\"p-3 border-b vscode-border vscode-surface flex items-center gap-2\">\n          <div className=\"relative flex-1\">\n            <span className=\"codicon codicon-search absolute left-2.5 top-2 vscode-muted text-[18px]\"></span>\n            <input\n              className=\"outline-filter-input w-full pl-9 pr-3 py-1.5 text-sm rounded-md outline-none\"\n              placeholder=\"Filter registers...\"\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n            />\n          </div>\n          <button\n            className=\"outline-filter-button ml-2 p-2 rounded flex items-center justify-center\"\n            title={\n              expanded.size === allIds.size ? \"Collapse All\" : \"Expand All\"\n            }\n            onClick={() => {\n              if (expanded.size === allIds.size) {\n                setExpanded(new Set([\"root\"]));\n              } else {\n                setExpanded(new Set(allIds));\n              }\n            }}\n          >\n            {expanded.size === allIds.size ? (\n              // Collapse All SVG icon\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 20 20\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <rect\n                  x=\"3\"\n                  y=\"3\"\n                  width=\"14\"\n                  height=\"14\"\n                  rx=\"3\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"1.5\"\n                />\n                <rect\n                  x=\"6\"\n                  y=\"9\"\n                  width=\"8\"\n                  height=\"2\"\n                  rx=\"1\"\n                  fill=\"currentColor\"\n                />\n              </svg>\n            ) : (\n              // Expand All SVG icon\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 20 20\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <rect\n                  x=\"3\"\n                  y=\"3\"\n                  width=\"14\"\n                  height=\"14\"\n                  rx=\"3\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"1.5\"\n                />\n                <rect\n                  x=\"6\"\n                  y=\"9\"\n                  width=\"8\"\n                  height=\"2\"\n                  rx=\"1\"\n                  fill=\"currentColor\"\n                />\n                <rect\n                  x=\"9\"\n                  y=\"6\"\n                  width=\"2\"\n                  height=\"8\"\n                  rx=\"1\"\n                  fill=\"currentColor\"\n                />\n              </svg>\n            )}\n          </button>\n        </div>\n        <div className=\"flex-1 overflow-y-auto py-2\">\n          <div className=\"px-3 mb-2 text-xs font-bold vscode-muted uppercase tracking-wider\">\n            Memory Map\n          </div>\n          <div\n            ref={treeFocusRef}\n            tabIndex={0}\n            onKeyDown={onTreeKeyDown}\n            className=\"outline-none focus:outline-none\"\n          >\n            <div\n              className={`tree-item ${isRootSelected ? \"selected\" : \"\"} gap-2 text-sm`}\n              onClick={() => {\n                treeFocusRef.current?.focus();\n                onSelect({\n                  id: rootId,\n                  type: \"memoryMap\",\n                  object: memoryMap,\n                  breadcrumbs: [memoryMap.name || \"Memory Map\"],\n                  path: [],\n                });\n              }}\n            >\n              <span\n                className={`codicon codicon-chevron-${isRootExpanded ? \"down\" : \"right\"} text-[16px] ${isRootSelected ? \"\" : \"opacity-70\"}`}\n                onClick={(e) => toggleExpand(rootId, e)}\n              ></span>\n              <span\n                className={`codicon codicon-map text-[16px] ${isRootSelected ? \"\" : \"opacity-70\"}`}\n              ></span>\n              {renderNameOrEdit(\n                rootId,\n                memoryMap.name || \"Memory Map\",\n                [],\n                \"flex-1\",\n              )}\n            </div>\n            {isRootExpanded &&\n              filteredBlocks.map(({ block, index }) =>\n                renderBlock(block, index),\n              )}\n          </div>\n        </div>\n        <div className=\"outline-footer p-3 text-xs vscode-muted flex justify-between\">\n          <span>{filteredBlocks.length} Items</span>\n          <span>\n            Base: {toHex(memoryMap.address_blocks?.[0]?.base_address ?? 0)}\n          </span>\n        </div>\n      </>\n    );\n  },\n);\n\nexport default Outline;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/RegisterMapVisualizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[181,184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[181,184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[338,341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[338,341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":2,"message":"Unexpected empty arrow function.","line":37,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":37,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":57,"column":26,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":57,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of an `any` array value.","line":58,"column":15,"nodeType":"ArrayPattern","messageId":"unsafeArrayPattern","endLine":58,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":64,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":64,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":65,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":65,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":67,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":67,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":68,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":68,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":68,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":68,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":114,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":114,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":114,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":114,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":114,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":114,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":118,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":118,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":119,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":119,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":119,"column":36,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":119,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .size on an `any` value.","line":121,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":121,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .size on an `any` value.","line":123,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":123,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":127,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":127,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":127,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":127,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":128,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":128,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":129,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":129,"endColumn":46},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":129,"column":40,"nodeType":"Identifier","messageId":"invalid","endLine":129,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":132,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":132,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":132,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":132,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":133,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":133,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":133,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":133,"endColumn":27},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":219,"column":44,"nodeType":"MemberExpression","messageId":"invalidType","endLine":219,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":240,"column":28,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":240,"endColumn":49},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":241,"column":28,"nodeType":"MemberExpression","messageId":"invalid","endLine":241,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":246,"column":29,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":246,"endColumn":41}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useMemo, useState } from \"react\";\nimport { FIELD_COLORS, FIELD_COLOR_KEYS } from \"../shared/colors\";\n\ninterface RegisterMapVisualizerProps {\n  registers: any[];\n  hoveredRegIndex?: number | null;\n  setHoveredRegIndex?: (idx: number | null) => void;\n  baseAddress?: number;\n  onReorderRegisters?: (newRegisters: any[]) => void;\n  onRegisterClick?: (regIndex: number) => void;\n}\n\nfunction getRegColor(idx: number) {\n  return FIELD_COLOR_KEYS[idx % FIELD_COLOR_KEYS.length];\n}\n\nfunction toHex(n: number): string {\n  return `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n}\n\n// Ctrl-drag state for reordering registers\ninterface CtrlDragState {\n  active: boolean;\n  draggedRegIndex: number | null;\n  targetIndex: number | null;\n}\n\nconst CTRL_DRAG_INITIAL: CtrlDragState = {\n  active: false,\n  draggedRegIndex: null,\n  targetIndex: null,\n};\n\nconst RegisterMapVisualizer: React.FC<RegisterMapVisualizerProps> = ({\n  registers,\n  hoveredRegIndex = null,\n  setHoveredRegIndex = () => {},\n  baseAddress = 0,\n  onReorderRegisters,\n  onRegisterClick,\n}) => {\n  const [ctrlDrag, setCtrlDrag] = useState<CtrlDragState>(CTRL_DRAG_INITIAL);\n\n  // Ctrl-drag: cleanup on pointer up\n  useEffect(() => {\n    if (!ctrlDrag.active) {\n      return;\n    }\n    const commitCtrlDrag = () => {\n      if (\n        ctrlDrag.draggedRegIndex !== null &&\n        ctrlDrag.targetIndex !== null &&\n        ctrlDrag.draggedRegIndex !== ctrlDrag.targetIndex &&\n        onReorderRegisters\n      ) {\n        // Reorder registers\n        const newRegs = [...registers];\n        const [removed] = newRegs.splice(ctrlDrag.draggedRegIndex, 1);\n        newRegs.splice(ctrlDrag.targetIndex, 0, removed);\n\n        // Recalculate offsets - account for arrays (count * stride)\n        let runningOffset = 0;\n        newRegs.forEach((r) => {\n          r.offset = runningOffset;\n          r.address_offset = runningOffset;\n          // Calculate size for this item\n          if (r.__kind === \"array\") {\n            runningOffset += (r.count || 1) * (r.stride || 4);\n          } else {\n            runningOffset += 4; // Regular register = 4 bytes\n          }\n        });\n\n        onReorderRegisters(newRegs);\n      }\n      setCtrlDrag(CTRL_DRAG_INITIAL);\n    };\n    const cancelCtrlDrag = () => setCtrlDrag(CTRL_DRAG_INITIAL);\n\n    window.addEventListener(\"pointerup\", commitCtrlDrag);\n    window.addEventListener(\"pointercancel\", cancelCtrlDrag);\n    window.addEventListener(\"blur\", cancelCtrlDrag);\n    return () => {\n      window.removeEventListener(\"pointerup\", commitCtrlDrag);\n      window.removeEventListener(\"pointercancel\", cancelCtrlDrag);\n      window.removeEventListener(\"blur\", cancelCtrlDrag);\n    };\n  }, [ctrlDrag, registers, onReorderRegisters]);\n\n  const handleCtrlPointerDown = (regIdx: number, e: React.PointerEvent) => {\n    if (!e.ctrlKey && !e.metaKey) {return;}\n    if (e.button !== 0) {return;}\n    if (!onReorderRegisters) {return;}\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    setCtrlDrag({\n      active: true,\n      draggedRegIndex: regIdx,\n      targetIndex: regIdx,\n    });\n  };\n\n  const handlePointerMove = (regIdx: number) => {\n    if (!ctrlDrag.active) {return;}\n    if (ctrlDrag.targetIndex !== regIdx) {\n      setCtrlDrag((prev) => ({ ...prev, targetIndex: regIdx }));\n    }\n  };\n\n  const groups = useMemo(() => {\n    return registers.map((reg, idx) => {\n      const offset = reg.address_offset ?? reg.offset ?? idx * 4;\n      // Calculate size - arrays use count * stride, registers use 4 bytes (32-bit default)\n      let size = 4; // Default: 4 bytes (32-bit register)\n      let isArray = false;\n      if (reg.__kind === \"array\") {\n        size = (reg.count || 1) * (reg.stride || 4);\n        isArray = true;\n      } else if (reg.size) {\n        // reg.size is in BITS (e.g., 32 = 32-bit), convert to bytes\n        size = Math.max(1, Math.floor(reg.size / 8));\n      }\n      return {\n        idx,\n        name: reg.name || `Reg ${idx}`,\n        offset,\n        absoluteAddress: baseAddress + offset,\n        size,\n        isArray,\n        count: reg.count,\n        stride: reg.stride,\n        color: getRegColor(idx),\n      };\n    });\n  }, [registers, baseAddress]);\n\n  // Compute preview order during drag\n  const displayGroups = useMemo(() => {\n    if (\n      !ctrlDrag.active ||\n      ctrlDrag.draggedRegIndex === null ||\n      ctrlDrag.targetIndex === null ||\n      ctrlDrag.draggedRegIndex === ctrlDrag.targetIndex\n    ) {\n      return groups;\n    }\n\n    // Reorder for preview\n    const newGroups = [...groups];\n    const [removed] = newGroups.splice(ctrlDrag.draggedRegIndex, 1);\n    newGroups.splice(ctrlDrag.targetIndex, 0, removed);\n    return newGroups;\n  }, [groups, ctrlDrag]);\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"relative w-full flex items-start overflow-x-auto pb-2\">\n        {/* Register grid background */}\n        <div className=\"relative flex flex-row items-end gap-0 pl-4 pr-2 pt-12 pb-2 min-h-[64px] w-full\">\n          {displayGroups.map((group, displayIdx) => {\n            const isHovered = hoveredRegIndex === group.idx;\n            const isDragging =\n              ctrlDrag.active && ctrlDrag.draggedRegIndex === group.idx;\n            const isDropTarget =\n              ctrlDrag.active &&\n              ctrlDrag.targetIndex === displayIdx &&\n              ctrlDrag.draggedRegIndex !== displayIdx;\n            const separatorShadow =\n              \"inset 0 0 0 1px var(--vscode-panel-border)\";\n\n            return (\n              <div\n                key={group.idx}\n                className={`relative flex-1 flex flex-col items-center justify-end select-none min-w-[120px] ${isHovered ? \"z-10\" : \"\"} ${isDragging ? \"opacity-50\" : \"\"}`}\n                style={{\n                  cursor: ctrlDrag.active\n                    ? \"grabbing\"\n                    : onRegisterClick || onReorderRegisters\n                      ? \"pointer\"\n                      : \"default\",\n                }}\n                onMouseEnter={() => setHoveredRegIndex(group.idx)}\n                onMouseLeave={() => setHoveredRegIndex(null)}\n                onClick={(e) => {\n                  if (!ctrlDrag.active && onRegisterClick) {\n                    e.stopPropagation();\n                    onRegisterClick(group.idx);\n                  }\n                }}\n                onPointerDown={(e) => handleCtrlPointerDown(group.idx, e)}\n                onPointerMove={() => handlePointerMove(displayIdx)}\n                onPointerEnter={() => {\n                  if (ctrlDrag.active) {handlePointerMove(displayIdx);}\n                }}\n              >\n                <div\n                  className={`h-20 w-full overflow-hidden flex items-center justify-center px-2 rounded-md ${group.isArray ? \"border-2 border-dashed border-white/30\" : \"\"}`}\n                  style={{\n                    background: FIELD_COLORS[group.color],\n                    opacity: 1,\n                    transform: isHovered ? \"translateY(-2px)\" : undefined,\n                    filter: isHovered\n                      ? \"saturate(1.15) brightness(1.05)\"\n                      : undefined,\n                    boxShadow: isDropTarget\n                      ? `${separatorShadow}, 0 0 0 3px var(--vscode-focusBorder), 0 0 12px var(--vscode-focusBorder)`\n                      : isHovered\n                        ? `${separatorShadow}, 0 0 0 2px var(--vscode-focusBorder), 0 10px 20px color-mix(in srgb, var(--vscode-foreground) 22%, transparent)`\n                        : separatorShadow,\n                  }}\n                >\n                  <div className=\"flex flex-col items-center gap-0.5\">\n                    <span className=\"text-lg select-none\">\n                      {group.isArray ? \"📦\" : \"📋\"}\n                    </span>\n                    <span className=\"text-[10px] font-mono text-white/80 font-semibold select-none text-center leading-tight\">\n                      {group.isArray ? `[${group.count}]` : \"REG\"}\n                    </span>\n                  </div>\n                </div>\n                <div\n                  className={`absolute -top-12 px-2 py-0.5 rounded border shadow text-xs whitespace-nowrap pointer-events-none ${\n                    displayIdx === 0 ? \"left-0\" : \"left-1/2 -translate-x-1/2\"\n                  }`}\n                  style={{\n                    background: \"var(--vscode-editorWidget-background)\",\n                    color: \"var(--vscode-foreground)\",\n                    borderColor: \"var(--vscode-panel-border)\",\n                  }}\n                >\n                  <div className=\"font-bold\">\n                    {group.name}\n                    <span className=\"ml-2 vscode-muted font-mono text-[11px]\">\n                      [{group.size}B]\n                    </span>\n                  </div>\n                  <div className=\"text-[11px] vscode-muted font-mono\">\n                    {toHex(group.absoluteAddress)} →{\" \"}\n                    {toHex(group.absoluteAddress + group.size - 1)}\n                  </div>\n                </div>\n                <div className=\"flex w-full justify-center\">\n                  <div className=\"text-center text-[11px] vscode-muted font-mono mt-1\">\n                    +{toHex(group.offset)}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterMapVisualizer;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/memorymap/BlockEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1172,1175],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1172,1175],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":58,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":58,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":58,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":58,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":59,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":59,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .base_address on an `any` value.","line":59,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":59,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":59,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":59,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":80,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":80,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":84,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":84,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":84,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":84,"endColumn":38},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":100,"column":9,"endLine":100,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":101,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":101,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":101,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":101,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":101,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":101,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .blur on an `any` value.","line":116,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":116,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":116,"column":19,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":116,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4394,4397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4394,4397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":125,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":125,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":125,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":125,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `RegisterRuntimeDef[]`.","line":130,"column":63,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":130,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `RegisterRuntimeDef[]`.","line":131,"column":64,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":131,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":216,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":216,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":233,"column":27,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":233,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":233,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":233,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":233,"column":35,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":233,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":234,"column":64,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":234,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [1] on an `any` value.","line":234,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":234,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":237,"column":75,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":237,"endColumn":95},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":238,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":238,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [selIdx] on an `any` value.","line":238,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":238,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":239,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":239,"endColumn":89},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":239,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":239,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":239,"column":68,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":239,"endColumn":84},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":241,"column":21,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":241,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":242,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":242,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":242,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":242,"endColumn":82},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":245,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":245,"endColumn":103},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":245,"column":57,"nodeType":"Identifier","messageId":"invalid","endLine":245,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":249,"column":21,"nodeType":"Property","messageId":"anyAssignment","endLine":249,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":250,"column":21,"nodeType":"Property","messageId":"anyAssignment","endLine":250,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":265,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11392,11395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11392,11395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":269,"column":25,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":269,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":269,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":269,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":269,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":269,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":271,"column":25,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":271,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":271,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":271,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":271,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":271,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":276,"column":25,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":276,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":276,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":276,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":276,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":276,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":278,"column":25,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":282,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":278,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":278,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":278,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":278,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":278,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":278,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":278,"column":28,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":278,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":278,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":278,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11943,11946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11943,11946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":278,"column":73,"nodeType":"ObjectExpression","messageId":"unsafeReturn","endLine":282,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":280,"column":29,"nodeType":"Property","messageId":"anyAssignment","endLine":280,"endColumn":87},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":280,"column":38,"nodeType":"LogicalExpression","messageId":"invalid","endLine":280,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":280,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":280,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":280,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":280,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":281,"column":29,"nodeType":"Property","messageId":"anyAssignment","endLine":281,"endColumn":95},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":281,"column":46,"nodeType":"LogicalExpression","messageId":"invalid","endLine":281,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":281,"column":46,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":281,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":281,"column":66,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":281,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":293,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":293,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":295,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":295,"endColumn":94},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .filter on an `any` value.","line":295,"column":33,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":295,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":295,"column":33,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":295,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":295,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12751,12754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12751,12754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":297,"column":67,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":297,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":305,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":305,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":313,"column":41,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":313,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":314,"column":34,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":314,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":315,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":315,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":316,"column":17,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":316,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":317,"column":17,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":317,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":318,"column":45,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":318,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":318,"column":63,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":318,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":328,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":328,"endColumn":74},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":347,"column":9,"endLine":347,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":357,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":357,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":360,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":360,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":360,"column":67,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":360,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .usage on an `any` value.","line":361,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":361,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":367,"column":36,"nodeType":"Identifier","messageId":"anyAssignment","endLine":367,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":370,"column":38,"nodeType":"Identifier","messageId":"anyAssignment","endLine":370,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":407,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":407,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":407,"column":34,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":407,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":407,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":407,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18770,18773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18770,18773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":409,"column":43,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":409,"endColumn":95},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":409,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":409,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":409,"column":74,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":409,"endColumn":84},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":451,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":451,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":451,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":451,"endColumn":72},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":452,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":452,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22075,22078],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22075,22078],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":453,"column":98,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":453,"endColumn":106},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":475,"column":66,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":475,"endColumn":72},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":476,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":476,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23815,23818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23815,23818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":477,"column":85,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":477,"endColumn":99},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":477,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":477,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":501,"column":60,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":501,"endColumn":86},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":501,"column":60,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":501,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":502,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":502,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25710,25713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25710,25713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":503,"column":96,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":503,"endColumn":104},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":529,"column":60,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":529,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":529,"column":60,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":529,"endColumn":75},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":530,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":530,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27775,27778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27775,27778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":531,"column":101,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":531,"endColumn":109}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":103,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from \"react\";\nimport type { YamlUpdateHandler } from \"../../types/editor\";\nimport {\n    VSCodeDropdown,\n    VSCodeOption,\n    VSCodeTextField,\n    VSCodeTextArea,\n} from \"@vscode/webview-ui-toolkit/react\";\nimport { KeyboardShortcutsButton } from \"../../shared/components\";\nimport RegisterMapVisualizer from \"../RegisterMapVisualizer\";\nimport { FIELD_COLORS, FIELD_COLOR_KEYS } from \"../../shared/colors\";\nimport { SpatialInsertionService } from \"../../services/SpatialInsertionService\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\ntype RegEditKey = \"name\" | \"offset\" | \"access\" | \"description\";\ntype RegActiveCell = { rowIndex: number; key: RegEditKey };\nconst REG_COLUMN_ORDER: RegEditKey[] = [\"name\", \"offset\", \"access\", \"description\"];\n\nconst ACCESS_OPTIONS = [\n    \"read-only\",\n    \"write-only\",\n    \"read-write\",\n    \"write-1-to-clear\",\n    \"read-write-1-to-clear\",\n];\n\nexport interface BlockEditorProps {\n    /** The address block object (has name, base_address, registers, etc.). */\n    block: any;\n    selectionMeta?: {\n        absoluteAddress?: number;\n        relativeOffset?: number;\n        focusDetails?: boolean;\n    };\n    onUpdate: YamlUpdateHandler;\n    onNavigateToRegister?: (regIndex: number) => void;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\n/**\n * Renders and manages editing of a single address block's properties, including:\n * - Block header / description\n * - RegisterMapVisualizer\n * - Keyboard-navigable registers table with insert / delete / reorder support\n */\nexport function BlockEditor({\n    block,\n    selectionMeta,\n    onUpdate,\n    onNavigateToRegister,\n}: BlockEditorProps) {\n    const registers = block?.registers || [];\n    const baseAddress = block?.base_address ?? block?.offset ?? 0;\n\n    const [selectedRegIndex, setSelectedRegIndex] = useState<number>(-1);\n    const [hoveredRegIndex, setHoveredRegIndex] = useState<number | null>(null);\n    const [regActiveCell, setRegActiveCell] = useState<RegActiveCell>({\n        rowIndex: -1,\n        key: \"name\",\n    });\n    const [insertError, setInsertError] = useState<string | null>(null);\n\n    const focusRef = useRef<HTMLDivElement | null>(null);\n    const errorRef = useRef<HTMLDivElement | null>(null);\n\n    const toHex = (n: number) => `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n    const getRegColor = (idx: number) => FIELD_COLOR_KEYS[idx % FIELD_COLOR_KEYS.length];\n\n    // Auto-focus on explicit request.\n    useEffect(() => {\n        if (!selectionMeta?.focusDetails) {return;}\n        const id = window.setTimeout(() => focusRef.current?.focus(), 0);\n        return () => window.clearTimeout(id);\n    }, [selectionMeta?.focusDetails, block?.name]);\n\n    // Clamp selection when block changes.\n    useEffect(() => {\n        const regs = block?.registers || [];\n        if (!Array.isArray(regs) || regs.length === 0) {\n            setSelectedRegIndex(-1);\n            setRegActiveCell({ rowIndex: -1, key: \"name\" });\n            return;\n        }\n        setSelectedRegIndex((prev) => {\n            if (prev < 0) {return 0;}\n            if (prev >= regs.length) {return regs.length - 1;}\n            return prev;\n        });\n        setRegActiveCell((prev) => {\n            const rowIndex = prev.rowIndex < 0 ? 0 : Math.min(regs.length - 1, prev.rowIndex);\n            const key = REG_COLUMN_ORDER.includes(prev.key) ? prev.key : \"name\";\n            return { rowIndex, key };\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [block?.name, (block?.registers || []).length]);\n\n    // Escape: return focus back to the table.\n    useEffect(() => {\n        const onKeyDown = (e: KeyboardEvent) => {\n            if (e.key !== \"Escape\") {return;}\n            const activeEl = document.activeElement as HTMLElement | null;\n            if (!activeEl) {return;}\n            const inRegs =\n                !!focusRef.current &&\n                focusRef.current.contains(activeEl) &&\n                activeEl !== focusRef.current;\n            if (!inRegs) {return;}\n            e.preventDefault();\n            e.stopPropagation();\n            try { (activeEl as any).blur?.(); } catch { /* ignore */ }\n            window.setTimeout(() => focusRef.current?.focus(), 0);\n        };\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, []);\n\n    // Keyboard shortcuts (o/O insert, arrow nav, F2/e edit, d delete, Shift+A/I array insert).\n    useEffect(() => {\n        const liveRegisters = block?.registers || [];\n\n        const tryInsertReg = (after: boolean) => {\n            setInsertError(null);\n            const result = after\n                ? SpatialInsertionService.insertRegisterAfter(liveRegisters, selectedRegIndex)\n                : SpatialInsertionService.insertRegisterBefore(liveRegisters, selectedRegIndex);\n\n            if (result.error) {\n                setInsertError(result.error);\n                return;\n            }\n\n            const newIdx = result.newIndex;\n            onUpdate([\"registers\"], result.items);\n            setSelectedRegIndex(newIdx);\n            setHoveredRegIndex(newIdx);\n            setRegActiveCell({ rowIndex: newIdx, key: \"name\" });\n            window.setTimeout(() => {\n                document\n                    .querySelector(`tr[data-reg-idx=\"${newIdx}\"]`)\n                    ?.scrollIntoView({ block: \"center\" });\n            }, 100);\n        };\n\n        const onKeyDown = (e: KeyboardEvent) => {\n            let keyLower = (e.key || \"\").toLowerCase();\n            if (e.altKey && e.code) {\n                if (e.code === \"KeyH\") {keyLower = \"h\";}\n                if (e.code === \"KeyJ\") {keyLower = \"j\";}\n                if (e.code === \"KeyK\") {keyLower = \"k\";}\n                if (e.code === \"KeyL\") {keyLower = \"l\";}\n            }\n            const vimToArrow: Record<string, \"ArrowLeft\" | \"ArrowDown\" | \"ArrowUp\" | \"ArrowRight\"> = {\n                h: \"ArrowLeft\", j: \"ArrowDown\", k: \"ArrowUp\", l: \"ArrowRight\",\n            };\n            const normalizedKey: string = vimToArrow[keyLower] ?? e.key;\n\n            const isArrow = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(normalizedKey);\n            const isEdit = normalizedKey === \"F2\" || keyLower === \"e\";\n            const isDelete = keyLower === \"d\" || e.key === \"Delete\";\n            const isInsertAfter = keyLower === \"o\" && !e.shiftKey;\n            const isInsertBefore = keyLower === \"o\" && e.shiftKey;\n            const isInsertArrayAfter = keyLower === \"a\" && e.shiftKey;\n            const isInsertArrayBefore = keyLower === \"i\" && e.shiftKey;\n\n            if (!isArrow && !isEdit && !isDelete && !isInsertAfter && !isInsertBefore &&\n                !isInsertArrayAfter && !isInsertArrayBefore) {return;}\n            if (e.ctrlKey || e.metaKey) {return;}\n\n            const activeEl = document.activeElement as HTMLElement | null;\n            const isInRegsArea =\n                !!focusRef.current &&\n                !!activeEl &&\n                (activeEl === focusRef.current || focusRef.current.contains(activeEl));\n            if (!isInRegsArea) {return;}\n\n            const target = e.target as HTMLElement | null;\n            const isTypingTarget = !!target?.closest(\n                'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area, vscode-dropdown',\n            );\n            if (isTypingTarget) {return;}\n\n            const scrollToCell = (rowIndex: number, key: RegEditKey) => {\n                window.setTimeout(() => {\n                    const row = document.querySelector(`tr[data-reg-idx=\"${rowIndex}\"]`);\n                    row?.scrollIntoView({ block: \"nearest\" });\n                    const cell = row?.querySelector(`td[data-col-key=\"${key}\"]`) as HTMLElement | null;\n                    cell?.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n                }, 0);\n            };\n\n            const focusEditor = (rowIndex: number, key: RegEditKey) => {\n                window.setTimeout(() => {\n                    const row = document.querySelector(`tr[data-reg-idx=\"${rowIndex}\"]`);\n                    const editor = row?.querySelector(`[data-edit-key=\"${key}\"]`) as HTMLElement | null;\n                    editor?.focus?.();\n                }, 0);\n            };\n\n            const currentRow =\n                regActiveCell.rowIndex >= 0\n                    ? regActiveCell.rowIndex\n                    : selectedRegIndex >= 0\n                        ? selectedRegIndex\n                        : 0;\n            const currentKey: RegEditKey = REG_COLUMN_ORDER.includes(regActiveCell.key)\n                ? regActiveCell.key\n                : \"name\";\n\n            if (isEdit) {\n                if (currentRow < 0 || currentRow >= liveRegisters.length) {return;}\n                e.preventDefault(); e.stopPropagation();\n                setSelectedRegIndex(currentRow);\n                setHoveredRegIndex(currentRow);\n                setRegActiveCell({ rowIndex: currentRow, key: currentKey });\n                focusEditor(currentRow, currentKey);\n                return;\n            }\n            if (isInsertAfter || isInsertBefore) {\n                e.preventDefault(); e.stopPropagation();\n                tryInsertReg(isInsertAfter);\n                return;\n            }\n            if (isInsertArrayAfter || isInsertArrayBefore) {\n                e.preventDefault(); e.stopPropagation();\n                let maxN = 0;\n                for (const r of liveRegisters) {\n                    const match = r.name?.match(/^ARRAY_(\\d+)$/i);\n                    if (match) {maxN = Math.max(maxN, parseInt(match[1], 10));}\n                }\n                const arrayName = `ARRAY_${maxN + 1}`;\n                const selIdx = selectedRegIndex >= 0 ? selectedRegIndex : liveRegisters.length - 1;\n                const selected = liveRegisters[selIdx];\n                const selectedOffset = selected?.address_offset ?? selected?.offset ?? 0;\n                let selectedSize = 4;\n                if ((selected )?.__kind === \"array\") {\n                    selectedSize = ((selected ).count || 1) * ((selected ).stride || 4);\n                }\n                const newArraySize = 8;\n                const baseOffset = isInsertArrayAfter ? selectedOffset + selectedSize : selectedOffset;\n                const newArray = {\n                    __kind: \"array\",\n                    name: arrayName,\n                    address_offset: baseOffset,\n                    offset: baseOffset,\n                    count: 2,\n                    stride: 4,\n                    description: \"\",\n                    registers: [\n                        {\n                            name: \"reg0\",\n                            offset: 0,\n                            address_offset: 0,\n                            access: \"read-write\",\n                            description: \"\",\n                            fields: [{ name: \"data\", bits: \"[31:0]\", access: \"read-write\", description: \"\" }],\n                        },\n                    ],\n                };\n                let newRegs: any[];\n                let newIdx: number;\n                if (isInsertArrayAfter) {\n                    newRegs = [\n                        ...liveRegisters.slice(0, selIdx + 1),\n                        newArray,\n                        ...liveRegisters.slice(selIdx + 1),\n                    ];\n                    newIdx = selIdx + 1;\n                } else {\n                    newRegs = [\n                        ...liveRegisters.slice(0, selIdx),\n                        newArray,\n                        ...liveRegisters.slice(selIdx).map((r: any) => ({\n                            ...r,\n                            offset: (r.offset ?? r.address_offset ?? 0) + newArraySize,\n                            address_offset: (r.address_offset ?? r.offset ?? 0) + newArraySize,\n                        })),\n                    ];\n                    newIdx = selIdx;\n                }\n                onUpdate([\"registers\"], newRegs);\n                setSelectedRegIndex(newIdx);\n                setHoveredRegIndex(newIdx);\n                setRegActiveCell({ rowIndex: newIdx, key: \"name\" });\n                return;\n            }\n            if (isDelete) {\n                if (currentRow < 0 || currentRow >= liveRegisters.length) {return;}\n                e.preventDefault(); e.stopPropagation();\n                const newRegs = liveRegisters.filter((_: any, i: number) => i !== currentRow);\n                onUpdate([\"registers\"], newRegs);\n                const nextRow = currentRow > 0 ? currentRow - 1 : newRegs.length > 0 ? 0 : -1;\n                setSelectedRegIndex(nextRow);\n                setHoveredRegIndex(nextRow);\n                setRegActiveCell({ rowIndex: nextRow, key: currentKey });\n                return;\n            }\n\n            e.preventDefault(); e.stopPropagation();\n            if (liveRegisters.length === 0) {return;}\n\n            const isVertical = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowDown\";\n            const delta = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowLeft\" ? -1 : 1;\n\n            if (e.altKey && isVertical) {\n                if (selectedRegIndex < 0) {return;}\n                const next = selectedRegIndex + delta;\n                if (next < 0 || next >= liveRegisters.length) {return;}\n                const newRegs = [...liveRegisters];\n                const temp = newRegs[selectedRegIndex];\n                newRegs[selectedRegIndex] = newRegs[next];\n                newRegs[next] = temp;\n                newRegs.forEach((r, i) => { r.offset = i * 4; r.address_offset = i * 4; });\n                onUpdate([\"registers\"], newRegs);\n                setSelectedRegIndex(next);\n                setHoveredRegIndex(next);\n                setRegActiveCell((prev) => ({ rowIndex: next, key: prev.key }));\n                scrollToCell(next, currentKey);\n                return;\n            }\n\n            if (isVertical) {\n                const nextRow = Math.max(0, Math.min(liveRegisters.length - 1, currentRow + delta));\n                setSelectedRegIndex(nextRow);\n                setHoveredRegIndex(nextRow);\n                setRegActiveCell({ rowIndex: nextRow, key: currentKey });\n                scrollToCell(nextRow, currentKey);\n                return;\n            }\n\n            const currentCol = Math.max(0, REG_COLUMN_ORDER.indexOf(currentKey));\n            const nextCol = Math.max(0, Math.min(REG_COLUMN_ORDER.length - 1, currentCol + delta));\n            const nextKey = REG_COLUMN_ORDER[nextCol] ?? \"name\";\n            setSelectedRegIndex(currentRow);\n            setHoveredRegIndex(currentRow);\n            setRegActiveCell({ rowIndex: currentRow, key: nextKey });\n            scrollToCell(currentRow, nextKey);\n        };\n\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [block, selectedRegIndex, hoveredRegIndex, regActiveCell, onUpdate]);\n\n    return (\n        <div className=\"flex flex-col w-full h-full min-h-0\">\n            {/* Header + RegisterMapVisualizer */}\n            <div className=\"vscode-surface border-b vscode-border p-8 flex flex-col gap-6 shrink-0 relative overflow-hidden\">\n                <div className=\"flex justify-between items-start relative z-10\">\n                    <div>\n                        <h2 className=\"text-2xl font-bold font-mono tracking-tight\">\n                            {block?.name || \"Address Block\"}\n                        </h2>\n                        <p className=\"vscode-muted text-sm mt-1 max-w-2xl\">\n                            {block?.description || `Base: ${toHex(baseAddress)}`} •{\" \"}\n                            {block?.usage || \"register\"}\n                        </p>\n                    </div>\n                </div>\n                <div className=\"w-full relative z-10 mt-2 select-none\">\n                    <RegisterMapVisualizer\n                        registers={registers}\n                        hoveredRegIndex={hoveredRegIndex}\n                        setHoveredRegIndex={setHoveredRegIndex}\n                        baseAddress={baseAddress}\n                        onReorderRegisters={(newRegs) => onUpdate([\"registers\"], newRegs)}\n                        onRegisterClick={onNavigateToRegister}\n                    />\n                </div>\n            </div>\n\n            {/* Registers table */}\n            <div className=\"flex-1 flex overflow-hidden min-h-0\">\n                <div className=\"flex-1 vscode-surface min-h-0 flex flex-col\">\n                    <div\n                        ref={focusRef}\n                        tabIndex={0}\n                        data-regs-table=\"true\"\n                        className=\"flex-1 overflow-auto min-h-0 outline-none focus:outline-none\"\n                    >\n                        {insertError ? (\n                            <div ref={errorRef} className=\"vscode-error px-4 py-2 text-xs\">\n                                {insertError}\n                            </div>\n                        ) : null}\n                        <table className=\"w-full text-left border-collapse table-fixed\">\n                            <colgroup>\n                                <col className=\"w-[30%] min-w-[200px]\" />\n                                <col className=\"w-[20%] min-w-[120px]\" />\n                                <col className=\"w-[15%] min-w-[100px]\" />\n                                <col className=\"w-[35%]\" />\n                            </colgroup>\n                            <thead className=\"vscode-surface-alt text-xs font-semibold vscode-muted uppercase tracking-wider sticky top-0 z-10 shadow-sm\">\n                                <tr className=\"h-12\">\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Name</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Offset</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Access</th>\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Description</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y vscode-border text-sm\">\n                                {registers.map((reg: any, idx: number) => {\n                                    const color = getRegColor(idx);\n                                    const offset = reg.address_offset ?? reg.offset ?? idx * 4;\n\n                                    return (\n                                        <tr\n                                            key={idx}\n                                            data-reg-idx={idx}\n                                            className={`group transition-colors border-l-4 border-transparent h-12 ${idx === selectedRegIndex\n                                                    ? \"vscode-focus-border vscode-row-selected\"\n                                                    : idx === hoveredRegIndex\n                                                        ? \"vscode-focus-border vscode-row-hover\"\n                                                        : \"\"\n                                                }`}\n                                            onMouseEnter={() => setHoveredRegIndex(idx)}\n                                            onMouseLeave={() => setHoveredRegIndex(null)}\n                                            onClick={() => {\n                                                setSelectedRegIndex(idx);\n                                                setHoveredRegIndex(idx);\n                                                setRegActiveCell((prev) => ({ rowIndex: idx, key: prev.key }));\n                                            }}\n                                        >\n                                            {/* NAME */}\n                                            <td\n                                                data-col-key=\"name\"\n                                                className={`px-6 py-2 font-medium align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"name\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setHoveredRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"name\" });\n                                                }}\n                                            >\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div\n                                                        className=\"w-2.5 h-2.5 rounded-sm\"\n                                                        style={{ backgroundColor: FIELD_COLORS[color] || color }}\n                                                    />\n                                                    <VSCodeTextField\n                                                        data-edit-key=\"name\"\n                                                        className=\"flex-1\"\n                                                        value={reg.name || \"\"}\n                                                        onBlur={(e: any) =>\n                                                            onUpdate([\"registers\", idx, \"name\"], e.target.value)\n                                                        }\n                                                    />\n                                                </div>\n                                            </td>\n                                            {/* OFFSET */}\n                                            <td\n                                                data-col-key=\"offset\"\n                                                className={`px-4 py-2 font-mono vscode-muted align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"offset\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setHoveredRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"offset\" });\n                                                }}\n                                            >\n                                                <VSCodeTextField\n                                                    data-edit-key=\"offset\"\n                                                    className=\"w-full font-mono\"\n                                                    value={toHex(offset)}\n                                                    onInput={(e: any) => {\n                                                        const val = Number.parseInt(e.target.value, 0);\n                                                        if (!Number.isNaN(val)) {\n                                                            onUpdate([\"registers\", idx, \"offset\"], val);\n                                                        }\n                                                    }}\n                                                />\n                                            </td>\n                                            {/* ACCESS */}\n                                            <td\n                                                data-col-key=\"access\"\n                                                className={`px-4 py-2 align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"access\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setHoveredRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"access\" });\n                                                }}\n                                            >\n                                                <VSCodeDropdown\n                                                    data-edit-key=\"access\"\n                                                    className=\"w-full\"\n                                                    value={reg.access || \"read-write\"}\n                                                    onInput={(e: any) =>\n                                                        onUpdate([\"registers\", idx, \"access\"], e.target.value)\n                                                    }\n                                                >\n                                                    {ACCESS_OPTIONS.map((opt) => (\n                                                        <VSCodeOption key={opt} value={opt}>{opt}</VSCodeOption>\n                                                    ))}\n                                                </VSCodeDropdown>\n                                            </td>\n                                            {/* DESCRIPTION */}\n                                            <td\n                                                data-col-key=\"description\"\n                                                className={`px-6 py-2 vscode-muted align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"description\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setHoveredRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"description\" });\n                                                }}\n                                            >\n                                                <VSCodeTextArea\n                                                    data-edit-key=\"description\"\n                                                    className=\"w-full\"\n                                                    rows={1}\n                                                    value={reg.description || \"\"}\n                                                    onInput={(e: any) =>\n                                                        onUpdate([\"registers\", idx, \"description\"], e.target.value)\n                                                    }\n                                                />\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <KeyboardShortcutsButton context=\"block\" />\n        </div>\n    );\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/memorymap/MemoryMapEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1060,1063],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1060,1063],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1577,1580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1577,1580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":46,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":46,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":46,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":46,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":47,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":47,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":48,"column":9,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":48,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .size on an `any` value.","line":48,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":48,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .range on an `any` value.","line":48,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":48,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":52,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":52,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":53,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":53,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":53,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":53,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":54,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":54,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":54,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":54,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":77,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":78,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_blocks on an `any` value.","line":78,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":78,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressBlocks on an `any` value.","line":78,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":78,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":101,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":101,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":105,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":106,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_blocks on an `any` value.","line":106,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":106,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressBlocks on an `any` value.","line":106,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":106,"endColumn":66},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":125,"column":9,"endLine":125,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":126,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":126,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":126,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":126,"endColumn":94},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_blocks on an `any` value.","line":126,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":126,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressBlocks on an `any` value.","line":126,"column":56,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":126,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .blur on an `any` value.","line":142,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":142,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":142,"column":17,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":142,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":142,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5033,5036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5033,5036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":154,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":155,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_blocks on an `any` value.","line":155,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":155,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .addressBlocks on an `any` value.","line":155,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":155,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `AddressBlockRuntimeDef[]`.","line":160,"column":60,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":160,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `AddressBlockRuntimeDef[]`.","line":161,"column":61,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":161,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":242,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":242,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":256,"column":53,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":256,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":258,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":258,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .filter on an `any` value.","line":258,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":258,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":258,"column":35,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":258,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":258,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":258,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10306,10309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10306,10309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":260,"column":67,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":260,"endColumn":83},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":268,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":268,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":274,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":274,"endColumn":71},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":293,"column":9,"endLine":293,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":306,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":306,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":309,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":309,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":315,"column":33,"nodeType":"Identifier","messageId":"anyAssignment","endLine":315,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":353,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":353,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":353,"column":34,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":353,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":353,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":353,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15611,15614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15611,15614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":355,"column":43,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":355,"endColumn":89},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .base_address on an `any` value.","line":355,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":355,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":355,"column":72,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":355,"endColumn":84},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":397,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":397,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":397,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":397,"endColumn":74},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":398,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":398,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18959,18962],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18959,18962],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":399,"column":102,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":399,"endColumn":110},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":420,"column":66,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":420,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":421,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":421,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20644,20647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20644,20647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":422,"column":85,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":422,"endColumn":99},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":422,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":422,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .usage on an `any` value.","line":458,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":458,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":478,"column":60,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":478,"endColumn":83},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":478,"column":60,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":478,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":479,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":479,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25020,25023],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25020,25023],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":482,"column":61,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":482,"endColumn":69}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":63,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from \"react\";\nimport type { YamlUpdateHandler } from \"../../types/editor\";\nimport {\n    VSCodeTextField,\n    VSCodeTextArea,\n} from \"@vscode/webview-ui-toolkit/react\";\nimport { KeyboardShortcutsButton } from \"../../shared/components\";\nimport AddressMapVisualizer from \"../AddressMapVisualizer\";\nimport { FIELD_COLORS, FIELD_COLOR_KEYS } from \"../../shared/colors\";\nimport { SpatialInsertionService } from \"../../services/SpatialInsertionService\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\ntype BlockEditKey = \"name\" | \"base\" | \"size\" | \"usage\" | \"description\";\ntype BlockActiveCell = { rowIndex: number; key: BlockEditKey };\nconst BLOCK_COLUMN_ORDER: BlockEditKey[] = [\n    \"name\",\n    \"base\",\n    \"size\",\n    \"usage\",\n    \"description\",\n];\n\nexport interface MemoryMapEditorProps {\n    /** The memory map object (has name, description, address_blocks / addressBlocks). */\n    memoryMap: any;\n    selectionMeta?: {\n        absoluteAddress?: number;\n        relativeOffset?: number;\n        focusDetails?: boolean;\n    };\n    onUpdate: YamlUpdateHandler;\n    onNavigateToBlock?: (blockIndex: number) => void;\n}\n\n// ---------------------------------------------------------------------------\n// Helpers\n// ---------------------------------------------------------------------------\n\n/**\n * Calculates block size in bytes based on its registers or explicit size field.\n */\nfunction calculateBlockSize(block: any): number {\n    const registers = block?.registers || [];\n    if (registers.length === 0) {\n        return block?.size ?? block?.range ?? 4;\n    }\n    let totalSize = 0;\n    for (const reg of registers) {\n        if (reg.__kind === \"array\") {\n            const count = reg.count || 1;\n            const stride = reg.stride || 4;\n            totalSize += count * stride;\n        } else {\n            totalSize += 4;\n        }\n    }\n    return totalSize;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\n/**\n * Renders and manages editing of a memory map's address blocks,\n * including the AddressMapVisualizer and keyboard-navigable blocks table.\n */\nexport function MemoryMapEditor({\n    memoryMap,\n    selectionMeta,\n    onUpdate,\n    onNavigateToBlock,\n}: MemoryMapEditorProps) {\n    const blocks =\n        memoryMap?.address_blocks || memoryMap?.addressBlocks || [];\n\n    const [selectedBlockIndex, setSelectedBlockIndex] = useState<number>(-1);\n    const [hoveredBlockIndex, setHoveredBlockIndex] = useState<number | null>(\n        null,\n    );\n    const [blockActiveCell, setBlockActiveCell] = useState<BlockActiveCell>({\n        rowIndex: -1,\n        key: \"name\",\n    });\n    const [insertError, setInsertError] = useState<string | null>(null);\n\n    const focusRef = useRef<HTMLDivElement | null>(null);\n\n    // Auto-focus on explicit request.\n    useEffect(() => {\n        if (!selectionMeta?.focusDetails) {\n            return;\n        }\n        const id = window.setTimeout(() => {\n            focusRef.current?.focus();\n        }, 0);\n        return () => window.clearTimeout(id);\n    }, [selectionMeta?.focusDetails, memoryMap?.name]);\n\n    // Clamp selection when map changes.\n    useEffect(() => {\n        const currentBlocks =\n            memoryMap?.address_blocks || memoryMap?.addressBlocks || [];\n        if (!Array.isArray(currentBlocks) || currentBlocks.length === 0) {\n            setSelectedBlockIndex(-1);\n            setBlockActiveCell({ rowIndex: -1, key: \"name\" });\n            return;\n        }\n        setSelectedBlockIndex((prev) => {\n            if (prev < 0) {return 0;}\n            if (prev >= currentBlocks.length) {return currentBlocks.length - 1;}\n            return prev;\n        });\n        setBlockActiveCell((prev) => {\n            const rowIndex =\n                prev.rowIndex < 0\n                    ? 0\n                    : Math.min(currentBlocks.length - 1, prev.rowIndex);\n            const key = BLOCK_COLUMN_ORDER.includes(prev.key) ? prev.key : \"name\";\n            return { rowIndex, key };\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [memoryMap?.name, (memoryMap?.address_blocks || memoryMap?.addressBlocks || []).length]);\n\n    // Escape: return focus from inline editor back to the table.\n    useEffect(() => {\n        const onKeyDown = (e: KeyboardEvent) => {\n            if (e.key !== \"Escape\") {return;}\n            const activeEl = document.activeElement as HTMLElement | null;\n            if (!activeEl) {return;}\n            const inBlocks =\n                !!focusRef.current &&\n                focusRef.current.contains(activeEl) &&\n                activeEl !== focusRef.current;\n            if (!inBlocks) {return;}\n            e.preventDefault();\n            e.stopPropagation();\n            try {\n                (activeEl as any).blur?.();\n            } catch {\n                // ignore\n            }\n            window.setTimeout(() => focusRef.current?.focus(), 0);\n        };\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, []);\n\n    // Keyboard shortcuts.\n    useEffect(() => {\n        const liveBlocks =\n            memoryMap?.address_blocks || memoryMap?.addressBlocks || [];\n\n        const tryInsertBlock = (after: boolean) => {\n            setInsertError(null);\n            const result = after\n                ? SpatialInsertionService.insertBlockAfter(liveBlocks, selectedBlockIndex)\n                : SpatialInsertionService.insertBlockBefore(liveBlocks, selectedBlockIndex);\n\n            if (result.error) {\n                setInsertError(result.error);\n                return;\n            }\n\n            const newIdx = result.newIndex;\n            onUpdate([\"addressBlocks\"], result.items);\n            setSelectedBlockIndex(newIdx);\n            setHoveredBlockIndex(newIdx);\n            setBlockActiveCell({ rowIndex: newIdx, key: \"name\" });\n            window.setTimeout(() => {\n                document\n                    .querySelector(`tr[data-block-idx=\"${newIdx}\"]`)\n                    ?.scrollIntoView({ block: \"center\" });\n            }, 100);\n        };\n\n        const onKeyDown = (e: KeyboardEvent) => {\n            let keyLower = (e.key || \"\").toLowerCase();\n            if (e.altKey && e.code) {\n                if (e.code === \"KeyH\") {keyLower = \"h\";}\n                if (e.code === \"KeyJ\") {keyLower = \"j\";}\n                if (e.code === \"KeyK\") {keyLower = \"k\";}\n                if (e.code === \"KeyL\") {keyLower = \"l\";}\n            }\n            const vimToArrow: Record<string, \"ArrowLeft\" | \"ArrowDown\" | \"ArrowUp\" | \"ArrowRight\"> = {\n                h: \"ArrowLeft\", j: \"ArrowDown\", k: \"ArrowUp\", l: \"ArrowRight\",\n            };\n            const normalizedKey: string = vimToArrow[keyLower] ?? e.key;\n\n            const isArrow = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(normalizedKey);\n            const isEdit = normalizedKey === \"F2\" || keyLower === \"e\";\n            const isDelete = keyLower === \"d\" || e.key === \"Delete\";\n            const isInsertAfter = keyLower === \"o\" && !e.shiftKey;\n            const isInsertBefore = keyLower === \"o\" && e.shiftKey;\n            if (!isArrow && !isEdit && !isDelete && !isInsertAfter && !isInsertBefore) {return;}\n            if (e.ctrlKey || e.metaKey) {return;}\n\n            const activeEl = document.activeElement as HTMLElement | null;\n            const isInBlocksArea =\n                !!focusRef.current &&\n                !!activeEl &&\n                (activeEl === focusRef.current || focusRef.current.contains(activeEl));\n            if (!isInBlocksArea) {return;}\n\n            const target = e.target as HTMLElement | null;\n            const isTypingTarget = !!target?.closest(\n                'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area, vscode-dropdown',\n            );\n            if (isTypingTarget) {return;}\n\n            const scrollToCell = (rowIndex: number, key: BlockEditKey) => {\n                window.setTimeout(() => {\n                    const row = document.querySelector(`tr[data-block-idx=\"${rowIndex}\"]`);\n                    row?.scrollIntoView({ block: \"nearest\" });\n                    const cell = row?.querySelector(`td[data-col-key=\"${key}\"]`) as HTMLElement | null;\n                    cell?.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n                }, 0);\n            };\n\n            const focusEditor = (rowIndex: number, key: BlockEditKey) => {\n                window.setTimeout(() => {\n                    const row = document.querySelector(`tr[data-block-idx=\"${rowIndex}\"]`);\n                    const editor = row?.querySelector(`[data-edit-key=\"${key}\"]`) as HTMLElement | null;\n                    editor?.focus?.();\n                }, 0);\n            };\n\n            const currentRow =\n                blockActiveCell.rowIndex >= 0\n                    ? blockActiveCell.rowIndex\n                    : selectedBlockIndex >= 0\n                        ? selectedBlockIndex\n                        : 0;\n            const currentKey: BlockEditKey = BLOCK_COLUMN_ORDER.includes(blockActiveCell.key)\n                ? blockActiveCell.key\n                : \"name\";\n\n            if (isEdit) {\n                if (currentRow < 0 || currentRow >= liveBlocks.length) {return;}\n                e.preventDefault(); e.stopPropagation();\n                setSelectedBlockIndex(currentRow);\n                setHoveredBlockIndex(currentRow);\n                setBlockActiveCell({ rowIndex: currentRow, key: currentKey });\n                focusEditor(currentRow, currentKey);\n                return;\n            }\n            if (isInsertAfter || isInsertBefore) {\n                e.preventDefault(); e.stopPropagation();\n                tryInsertBlock(isInsertAfter);\n                return;\n            }\n            if (isDelete) {\n                if (currentRow < 0 || currentRow >= liveBlocks.length) {return;}\n                e.preventDefault(); e.stopPropagation();\n                const newBlocks = liveBlocks.filter((_: any, i: number) => i !== currentRow);\n                onUpdate([\"addressBlocks\"], newBlocks);\n                const nextRow = currentRow > 0 ? currentRow - 1 : newBlocks.length > 0 ? 0 : -1;\n                setSelectedBlockIndex(nextRow);\n                setHoveredBlockIndex(nextRow);\n                setBlockActiveCell({ rowIndex: nextRow, key: currentKey });\n                return;\n            }\n\n            e.preventDefault(); e.stopPropagation();\n            if (liveBlocks.length === 0) {return;}\n\n            const isVertical = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowDown\";\n            const delta = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowLeft\" ? -1 : 1;\n\n            if (isVertical) {\n                const nextRow = Math.max(0, Math.min(liveBlocks.length - 1, currentRow + delta));\n                setSelectedBlockIndex(nextRow);\n                setHoveredBlockIndex(nextRow);\n                setBlockActiveCell({ rowIndex: nextRow, key: currentKey });\n                scrollToCell(nextRow, currentKey);\n                return;\n            }\n\n            const currentCol = Math.max(0, BLOCK_COLUMN_ORDER.indexOf(currentKey));\n            const nextCol = Math.max(0, Math.min(BLOCK_COLUMN_ORDER.length - 1, currentCol + delta));\n            const nextKey = BLOCK_COLUMN_ORDER[nextCol] ?? \"name\";\n            setSelectedBlockIndex(currentRow);\n            setHoveredBlockIndex(currentRow);\n            setBlockActiveCell({ rowIndex: currentRow, key: nextKey });\n            scrollToCell(currentRow, nextKey);\n        };\n\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [memoryMap, selectedBlockIndex, hoveredBlockIndex, blockActiveCell, onUpdate]);\n\n    const toHex = (n: number) => `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n    const getBlockColor = (idx: number) => FIELD_COLOR_KEYS[idx % FIELD_COLOR_KEYS.length];\n\n    return (\n        <div className=\"flex flex-col w-full h-full min-h-0\">\n            {/* Header + AddressMapVisualizer */}\n            <div className=\"vscode-surface border-b vscode-border p-8 flex flex-col gap-6 shrink-0 relative overflow-hidden\">\n                <div className=\"flex justify-between items-start relative z-10\">\n                    <div>\n                        <h2 className=\"text-2xl font-bold font-mono tracking-tight\">\n                            {memoryMap?.name || \"Memory Map\"}\n                        </h2>\n                        <p className=\"vscode-muted text-sm mt-1 max-w-2xl\">\n                            {memoryMap?.description || \"Address space layout\"}\n                        </p>\n                    </div>\n                </div>\n                <div className=\"w-full relative z-10 mt-2 select-none\">\n                    <AddressMapVisualizer\n                        blocks={blocks}\n                        hoveredBlockIndex={hoveredBlockIndex}\n                        setHoveredBlockIndex={setHoveredBlockIndex}\n                        onBlockClick={onNavigateToBlock}\n                    />\n                </div>\n            </div>\n\n            {/* Blocks table */}\n            <div className=\"flex-1 flex overflow-hidden min-h-0\">\n                <div className=\"flex-1 vscode-surface min-h-0 flex flex-col\">\n                    <div\n                        ref={focusRef}\n                        tabIndex={0}\n                        data-blocks-table=\"true\"\n                        className=\"flex-1 overflow-auto min-h-0 outline-none focus:outline-none\"\n                    >\n                        {insertError ? (\n                            <div className=\"vscode-error px-4 py-2 text-xs\">{insertError}</div>\n                        ) : null}\n                        <table className=\"w-full text-left border-collapse table-fixed\">\n                            <colgroup>\n                                <col className=\"w-[25%] min-w-[200px]\" />\n                                <col className=\"w-[20%] min-w-[120px]\" />\n                                <col className=\"w-[15%] min-w-[100px]\" />\n                                <col className=\"w-[15%] min-w-[100px]\" />\n                                <col className=\"w-[25%]\" />\n                            </colgroup>\n                            <thead className=\"vscode-surface-alt text-xs font-semibold vscode-muted uppercase tracking-wider sticky top-0 z-10 shadow-sm\">\n                                <tr className=\"h-12\">\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Name</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Base Address</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Size</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Usage</th>\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Description</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y vscode-border text-sm\">\n                                {blocks.map((block: any, idx: number) => {\n                                    const color = getBlockColor(idx);\n                                    const base = block.base_address ?? block.offset ?? 0;\n                                    const size = calculateBlockSize(block);\n\n                                    return (\n                                        <tr\n                                            key={idx}\n                                            data-block-idx={idx}\n                                            className={`group transition-colors border-l-4 border-transparent h-12 ${idx === selectedBlockIndex\n                                                    ? \"vscode-focus-border vscode-row-selected\"\n                                                    : idx === hoveredBlockIndex\n                                                        ? \"vscode-focus-border vscode-row-hover\"\n                                                        : \"\"\n                                                }`}\n                                            onMouseEnter={() => setHoveredBlockIndex(idx)}\n                                            onMouseLeave={() => setHoveredBlockIndex(null)}\n                                            onClick={() => {\n                                                setSelectedBlockIndex(idx);\n                                                setHoveredBlockIndex(idx);\n                                                setBlockActiveCell((prev) => ({ rowIndex: idx, key: prev.key }));\n                                            }}\n                                        >\n                                            <td\n                                                data-col-key=\"name\"\n                                                className={`px-6 py-2 font-medium align-middle ${blockActiveCell.rowIndex === idx && blockActiveCell.key === \"name\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedBlockIndex(idx);\n                                                    setHoveredBlockIndex(idx);\n                                                    setBlockActiveCell({ rowIndex: idx, key: \"name\" });\n                                                }}\n                                            >\n                                                <div className=\"flex items-center gap-2\">\n                                                    <div\n                                                        className=\"w-2.5 h-2.5 rounded-sm\"\n                                                        style={{ backgroundColor: FIELD_COLORS[color] || color }}\n                                                    />\n                                                    <VSCodeTextField\n                                                        data-edit-key=\"name\"\n                                                        className=\"flex-1\"\n                                                        value={block.name || \"\"}\n                                                        onBlur={(e: any) =>\n                                                            onUpdate([\"addressBlocks\", idx, \"name\"], e.target.value)\n                                                        }\n                                                    />\n                                                </div>\n                                            </td>\n                                            <td\n                                                data-col-key=\"base\"\n                                                className={`px-4 py-2 font-mono vscode-muted align-middle ${blockActiveCell.rowIndex === idx && blockActiveCell.key === \"base\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedBlockIndex(idx);\n                                                    setHoveredBlockIndex(idx);\n                                                    setBlockActiveCell({ rowIndex: idx, key: \"base\" });\n                                                }}\n                                            >\n                                                <VSCodeTextField\n                                                    data-edit-key=\"base\"\n                                                    className=\"w-full font-mono\"\n                                                    value={toHex(base)}\n                                                    onInput={(e: any) => {\n                                                        const val = Number.parseInt(e.target.value, 0);\n                                                        if (!Number.isNaN(val)) {\n                                                            onUpdate([\"addressBlocks\", idx, \"offset\"], val);\n                                                        }\n                                                    }}\n                                                />\n                                            </td>\n                                            <td\n                                                data-col-key=\"size\"\n                                                className={`px-4 py-2 font-mono vscode-muted align-middle ${blockActiveCell.rowIndex === idx && blockActiveCell.key === \"size\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedBlockIndex(idx);\n                                                    setHoveredBlockIndex(idx);\n                                                    setBlockActiveCell({ rowIndex: idx, key: \"size\" });\n                                                }}\n                                            >\n                                                {size < 1024 ? `${size}B` : `${(size / 1024).toFixed(1)}KB`}\n                                            </td>\n                                            <td\n                                                data-col-key=\"usage\"\n                                                className={`px-4 py-2 align-middle ${blockActiveCell.rowIndex === idx && blockActiveCell.key === \"usage\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedBlockIndex(idx);\n                                                    setHoveredBlockIndex(idx);\n                                                    setBlockActiveCell({ rowIndex: idx, key: \"usage\" });\n                                                }}\n                                            >\n                                                <span className=\"px-2 py-0.5 rounded text-xs font-medium vscode-badge whitespace-nowrap\">\n                                                    {block.usage || \"register\"}\n                                                </span>\n                                            </td>\n                                            <td\n                                                data-col-key=\"description\"\n                                                className={`px-6 py-2 vscode-muted align-middle ${blockActiveCell.rowIndex === idx && blockActiveCell.key === \"description\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedBlockIndex(idx);\n                                                    setHoveredBlockIndex(idx);\n                                                    setBlockActiveCell({ rowIndex: idx, key: \"description\" });\n                                                }}\n                                            >\n                                                <VSCodeTextArea\n                                                    data-edit-key=\"description\"\n                                                    className=\"w-full\"\n                                                    rows={1}\n                                                    value={block.description || \"\"}\n                                                    onInput={(e: any) =>\n                                                        onUpdate(\n                                                            [\"addressBlocks\", idx, \"description\"],\n                                                            e.target.value,\n                                                        )\n                                                    }\n                                                />\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <KeyboardShortcutsButton context=\"memoryMap\" />\n        </div>\n    );\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/memorymap/RegisterArrayEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[814,817],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[814,817],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":38,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":38,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":39,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":39,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":39,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":39,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":40,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":40,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":40,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":93,"column":23,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":93,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":93,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":93,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":93,"column":31,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":93,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":94,"column":60,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":94,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [1] on an `any` value.","line":94,"column":60,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":94,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":97,"column":71,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":97,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":98,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":98,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [selIdx] on an `any` value.","line":98,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":98,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":99,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":99,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":99,"column":36,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":99,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":99,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":99,"endColumn":80},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":100,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":100,"endColumn":99},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":100,"column":47,"nodeType":"Identifier","messageId":"invalid","endLine":100,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":104,"column":17,"nodeType":"Property","messageId":"anyAssignment","endLine":104,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":105,"column":17,"nodeType":"Property","messageId":"anyAssignment","endLine":105,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4551,4554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4551,4554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":115,"column":21,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":115,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":115,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":115,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":115,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":115,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":117,"column":21,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":117,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":117,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":117,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":117,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":117,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":122,"column":21,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":122,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":122,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":122,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":122,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":122,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":124,"column":21,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":124,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .slice on an `any` value.","line":124,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":124,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":124,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":124,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":138,"column":49,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":138,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":141,"column":19,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":141,"endColumn":92},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .filter on an `any` value.","line":141,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":141,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":141,"column":29,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":141,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5600,5603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5600,5603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":143,"column":63,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":143,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":155,"column":51,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":155,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":184,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":184,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":187,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":187,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":187,"column":71,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":187,"endColumn":81},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":188,"column":30,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":188,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":198,"column":36,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":198,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":198,"column":36,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":198,"endColumn":45},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":199,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8321,8324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8321,8324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":199,"column":69,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":199,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":205,"column":68,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":205,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":210,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":210,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":211,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":211,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8958,8961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8958,8961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":212,"column":54,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":212,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":212,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":212,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":221,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":221,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":222,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9527,9530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9527,9530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":223,"column":54,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":223,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":223,"column":54,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":223,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":234,"column":32,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":234,"endColumn":42},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":235,"column":32,"nodeType":"Identifier","messageId":"invalid","endLine":235,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":235,"column":46,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":235,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":235,"column":66,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":235,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":238,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":238,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":238,"column":48,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":238,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":245,"column":36,"nodeType":"Identifier","messageId":"anyAssignment","endLine":245,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":283,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":283,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":283,"column":34,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":283,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":283,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12865,12868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12865,12868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":284,"column":43,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":284,"endColumn":92},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .address_offset on an `any` value.","line":284,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":284,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .offset on an `any` value.","line":284,"column":77,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":284,"endColumn":87},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":321,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":321,"endColumn":78},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":321,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":321,"endColumn":72},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":322,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":322,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15712,15715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15712,15715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":323,"column":98,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":323,"endColumn":106},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":329,"column":82,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":329,"endColumn":90},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":349,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":349,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17648,17651],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17648,17651],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":350,"column":82,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":350,"endColumn":96},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":350,"column":82,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":350,"endColumn":90},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":379,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":379,"endColumn":90},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":379,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":379,"endColumn":74},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":380,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":380,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19982,19985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19982,19985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":381,"column":100,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":381,"endColumn":108},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":393,"column":146,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":393,"endColumn":156},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":395,"column":67,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":395,"endColumn":77},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":400,"column":58,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":400,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":420,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":420,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":420,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":420,"endColumn":79},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":421,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":421,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23106,23109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23106,23109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":422,"column":105,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":422,"endColumn":113},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":429,"column":58,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":429,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":436,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":436,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .count on an `any` value.","line":451,"column":57,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":451,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .stride on an `any` value.","line":452,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":452,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":92,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\nimport type { YamlUpdateHandler } from \"../../types/editor\";\nimport {\n    VSCodeDropdown,\n    VSCodeTextField,\n} from \"@vscode/webview-ui-toolkit/react\";\nimport { KeyboardShortcutsButton } from \"../../shared/components\";\nimport RegisterMapVisualizer from \"../RegisterMapVisualizer\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\ntype RegEditKey = \"name\" | \"offset\" | \"access\" | \"description\";\ntype RegActiveCell = { rowIndex: number; key: RegEditKey };\nconst REG_COLUMN_ORDER: RegEditKey[] = [\"name\", \"offset\", \"access\", \"description\"];\n\nexport interface RegisterArrayEditorProps {\n    /** The register array definition object. */\n    registerArray: any;\n    onUpdate: YamlUpdateHandler;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\n/**\n * Renders and manages editing of a register array definition:\n * - Array name, base offset, count, stride\n * - Inline RegisterMapVisualizer for nested template registers\n * - Keyboard-navigable nested registers table\n */\nexport function RegisterArrayEditor({\n    registerArray,\n    onUpdate,\n}: RegisterArrayEditorProps) {\n    const arr = registerArray;\n    const nestedRegisters = arr?.registers || [];\n    const baseOffset = arr?.address_offset ?? 0;\n\n    const [selectedRegIndex, setSelectedRegIndex] = useState<number>(-1);\n    const [hoveredRegIndex, setHoveredRegIndex] = useState<number | null>(null);\n    const [regActiveCell, setRegActiveCell] = useState<RegActiveCell>({\n        rowIndex: -1,\n        key: \"name\",\n    });\n\n    const toHex = (n: number) => `0x${Math.max(0, n).toString(16).toUpperCase()}`;\n\n    const scrollToCell = (rowIndex: number, key: string) => {\n        window.setTimeout(() => {\n            const row = document.querySelector(`tr[data-reg-idx=\"${rowIndex}\"]`);\n            row?.scrollIntoView({ block: \"nearest\" });\n            const cell = row?.querySelector(`td[data-col-key=\"${key}\"]`);\n            cell?.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n        }, 0);\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n        const keyLower = e.key.toLowerCase();\n        const vimToArrow: Record<string, string> = {\n            h: \"ArrowLeft\",\n            j: \"ArrowDown\",\n            k: \"ArrowUp\",\n            l: \"ArrowRight\",\n        };\n        const normalizedKey = vimToArrow[keyLower] ?? e.key;\n\n        const isArrow = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(normalizedKey);\n        const isEdit = normalizedKey === \"F2\" || keyLower === \"e\" || keyLower === \"enter\";\n        const isDelete = keyLower === \"d\" || e.key === \"Delete\";\n        const isInsertAfter = keyLower === \"o\" && !e.shiftKey;\n        const isInsertBefore = keyLower === \"o\" && e.shiftKey;\n\n        if (!isArrow && !isEdit && !isDelete && !isInsertAfter && !isInsertBefore) {return;}\n        if (e.ctrlKey || e.metaKey) {return;}\n\n        const target = e.target as HTMLElement | null;\n        const isTypingTarget = !!target?.closest(\n            'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area, vscode-dropdown',\n        );\n        if (isTypingTarget) {return;}\n\n        const currentRow = selectedRegIndex >= 0 ? selectedRegIndex : 0;\n\n        if (isInsertAfter || isInsertBefore) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            let maxN = 0;\n            for (const r of nestedRegisters) {\n                const match = r.name?.match(/^reg(\\d+)$/i);\n                if (match) {maxN = Math.max(maxN, parseInt(match[1], 10));}\n            }\n            const newName = `reg${maxN + 1}`;\n            const selIdx = selectedRegIndex >= 0 ? selectedRegIndex : nestedRegisters.length - 1;\n            const selected = nestedRegisters[selIdx];\n            const selectedOffset = selected?.address_offset ?? selected?.offset ?? 0;\n            const newOffset = isInsertAfter ? selectedOffset + 4 : Math.max(0, selectedOffset - 4);\n\n            const newReg = {\n                name: newName,\n                offset: newOffset,\n                address_offset: newOffset,\n                access: \"read-write\",\n                description: \"\",\n                fields: [{ name: \"data\", bits: \"[31:0]\", access: \"read-write\", description: \"\" }],\n            };\n\n            let newRegs: any[];\n            let newIdx: number;\n            if (isInsertAfter) {\n                newRegs = [\n                    ...nestedRegisters.slice(0, selIdx + 1),\n                    newReg,\n                    ...nestedRegisters.slice(selIdx + 1),\n                ];\n                newIdx = selIdx + 1;\n            } else {\n                newRegs = [\n                    ...nestedRegisters.slice(0, selIdx),\n                    newReg,\n                    ...nestedRegisters.slice(selIdx),\n                ];\n                newIdx = selIdx;\n            }\n\n            onUpdate([\"registers\"], newRegs);\n            setSelectedRegIndex(newIdx);\n            setHoveredRegIndex(newIdx);\n            setRegActiveCell({ rowIndex: newIdx, key: \"name\" });\n            scrollToCell(newIdx, \"name\");\n            return;\n        }\n\n        if (isDelete) {\n            if (currentRow < 0 || currentRow >= nestedRegisters.length) {return;}\n            e.preventDefault();\n            e.stopPropagation();\n            const newRegs = nestedRegisters.filter((_: any, i: number) => i !== currentRow);\n            onUpdate([\"registers\"], newRegs);\n            const nextRow = currentRow > 0 ? currentRow - 1 : newRegs.length > 0 ? 0 : -1;\n            setSelectedRegIndex(nextRow);\n            setHoveredRegIndex(nextRow);\n            return;\n        }\n\n        if (isArrow) {\n            e.preventDefault();\n            const isVertical = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowDown\";\n            const delta = normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowLeft\" ? -1 : 1;\n\n            if (isVertical) {\n                const next = Math.max(0, Math.min(nestedRegisters.length - 1, currentRow + delta));\n                setSelectedRegIndex(next);\n                setHoveredRegIndex(next);\n                setRegActiveCell({ rowIndex: next, key: regActiveCell.key });\n                scrollToCell(next, regActiveCell.key);\n            } else {\n                const currentKey = regActiveCell.key;\n                const currentCol = Math.max(0, REG_COLUMN_ORDER.indexOf(currentKey));\n                const nextCol = Math.max(0, Math.min(REG_COLUMN_ORDER.length - 1, currentCol + delta));\n                const nextKey = REG_COLUMN_ORDER[nextCol];\n                setRegActiveCell({ rowIndex: currentRow, key: nextKey });\n                scrollToCell(currentRow, nextKey);\n            }\n        }\n\n        if (isEdit) {\n            e.preventDefault();\n            e.stopPropagation();\n            setRegActiveCell({ rowIndex: currentRow, key: regActiveCell.key });\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col w-full h-full min-h-0\">\n            {/* Header */}\n            <div className=\"vscode-surface border-b vscode-border p-8 flex flex-col gap-6 shrink-0\">\n                <div className=\"flex justify-between items-start\">\n                    <div>\n                        <h2 className=\"text-2xl font-bold font-mono tracking-tight\">\n                            {arr?.name || \"Register Array\"}\n                        </h2>\n                        <p className=\"vscode-muted text-sm mt-1 max-w-2xl\">\n                            {arr?.description || \"Register array\"} • {arr?.count || 1} instances ×{\" \"}\n                            {arr?.stride || 4} bytes\n                        </p>\n                    </div>\n                </div>\n\n                {/* Array Properties */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 vscode-surface-alt p-4 rounded-lg\">\n                    <div>\n                        <label className=\"text-xs vscode-muted block mb-1\">Name</label>\n                        <VSCodeTextField\n                            value={arr?.name || \"\"}\n                            onInput={(e: any) => onUpdate([\"name\"], e.target.value)}\n                            className=\"w-full\"\n                        />\n                    </div>\n                    <div>\n                        <label className=\"text-xs vscode-muted block mb-1\">Base Offset</label>\n                        <span className=\"font-mono text-sm\">{toHex(baseOffset)}</span>\n                    </div>\n                    <div>\n                        <label className=\"text-xs vscode-muted block mb-1\">Count</label>\n                        <VSCodeTextField\n                            value={String(arr?.count || 1)}\n                            onInput={(e: any) => {\n                                const val = parseInt(e.target.value, 10);\n                                if (!isNaN(val) && val > 0) {onUpdate([\"count\"], val);}\n                            }}\n                            className=\"w-24\"\n                        />\n                    </div>\n                    <div>\n                        <label className=\"text-xs vscode-muted block mb-1\">Stride (bytes)</label>\n                        <VSCodeTextField\n                            value={String(arr?.stride || 4)}\n                            onInput={(e: any) => {\n                                const val = parseInt(e.target.value, 10);\n                                if (!isNaN(val) && val > 0) {onUpdate([\"stride\"], val);}\n                            }}\n                            className=\"w-24\"\n                        />\n                    </div>\n                </div>\n\n                {/* Address summary */}\n                <div className=\"text-sm vscode-muted\">\n                    <span className=\"font-mono\">\n                        {toHex(baseOffset)} →{\" \"}\n                        {toHex(baseOffset + (arr?.count || 1) * (arr?.stride || 4) - 1)}\n                    </span>\n                    <span className=\"ml-2\">\n                        ({(arr?.count || 1) * (arr?.stride || 4)} bytes total)\n                    </span>\n                </div>\n\n                {/* RegisterMapVisualizer for nested registers */}\n                <div className=\"w-full relative z-10 mt-4 select-none\">\n                    <RegisterMapVisualizer\n                        registers={nestedRegisters}\n                        hoveredRegIndex={hoveredRegIndex}\n                        setHoveredRegIndex={setHoveredRegIndex}\n                        baseAddress={0}\n                        onReorderRegisters={(newRegs) => onUpdate([\"registers\"], newRegs)}\n                        onRegisterClick={(idx) => {\n                            setSelectedRegIndex(idx);\n                            setHoveredRegIndex(idx);\n                        }}\n                    />\n                </div>\n            </div>\n\n            {/* Nested registers table */}\n            <div className=\"flex-1 flex overflow-hidden min-h-0\">\n                <div className=\"flex-1 vscode-surface min-h-0 flex flex-col\">\n                    <div\n                        tabIndex={0}\n                        data-registers-table=\"true\"\n                        className=\"flex-1 overflow-auto min-h-0 outline-none focus:outline-none\"\n                        onKeyDown={handleKeyDown}\n                    >\n                        <table className=\"w-full text-left border-collapse table-fixed\">\n                            <colgroup>\n                                <col className=\"w-[30%] min-w-[200px]\" />\n                                <col className=\"w-[20%] min-w-[120px]\" />\n                                <col className=\"w-[15%] min-w-[100px]\" />\n                                <col className=\"w-[35%]\" />\n                            </colgroup>\n                            <thead className=\"vscode-surface-alt text-xs font-semibold vscode-muted uppercase tracking-wider sticky top-0 z-10 shadow-sm\">\n                                <tr className=\"h-12\">\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Name</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Offset</th>\n                                    <th className=\"px-4 py-3 border-b vscode-border align-middle\">Access</th>\n                                    <th className=\"px-6 py-3 border-b vscode-border align-middle\">Description</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y vscode-border text-sm\">\n                                {nestedRegisters.map((reg: any, idx: number) => {\n                                    const regOffset = reg.address_offset ?? reg.offset ?? 0;\n                                    const isSelected = selectedRegIndex === idx;\n                                    const isHovered = hoveredRegIndex === idx;\n\n                                    return (\n                                        <tr\n                                            key={idx}\n                                            data-reg-idx={idx}\n                                            className={`group transition-colors border-l-4 border-transparent h-12 ${isSelected\n                                                    ? \"vscode-focus-border vscode-row-selected\"\n                                                    : isHovered\n                                                        ? \"vscode-focus-border vscode-row-hover\"\n                                                        : \"\"\n                                                }`}\n                                            onMouseEnter={() => setHoveredRegIndex(idx)}\n                                            onMouseLeave={() => setHoveredRegIndex(null)}\n                                            onClick={() => {\n                                                setSelectedRegIndex(idx);\n                                                setHoveredRegIndex(idx);\n                                                setRegActiveCell((prev) => ({ rowIndex: idx, key: prev.key }));\n                                            }}\n                                        >\n                                            {/* NAME */}\n                                            <td\n                                                data-col-key=\"name\"\n                                                className={`px-6 py-2 font-medium align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"name\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"name\" });\n                                                }}\n                                            >\n                                                {regActiveCell.rowIndex === idx && regActiveCell.key === \"name\" ? (\n                                                    <VSCodeTextField\n                                                        value={reg.name || \"\"}\n                                                        onInput={(e: any) =>\n                                                            onUpdate([\"registers\", idx, \"name\"], e.target.value)\n                                                        }\n                                                        className=\"w-full font-mono\"\n                                                        autoFocus\n                                                    />\n                                                ) : (\n                                                    <span className=\"font-mono\">{reg.name}</span>\n                                                )}\n                                            </td>\n\n                                            {/* OFFSET */}\n                                            <td\n                                                data-col-key=\"offset\"\n                                                className={`px-4 py-2 font-mono text-xs align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"offset\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"offset\" });\n                                                }}\n                                            >\n                                                {regActiveCell.rowIndex === idx && regActiveCell.key === \"offset\" ? (\n                                                    <VSCodeTextField\n                                                        value={String(regOffset)}\n                                                        onInput={(e: any) => {\n                                                            const val = parseInt(e.target.value, 10);\n                                                            if (!isNaN(val) && val >= 0) {\n                                                                onUpdate([\"registers\", idx, \"offset\"], val);\n                                                                onUpdate([\"registers\", idx, \"address_offset\"], val);\n                                                            }\n                                                        }}\n                                                        className=\"w-full font-mono text-xs\"\n                                                        autoFocus\n                                                    />\n                                                ) : (\n                                                    <span>{`0x${Number(regOffset).toString(16).toUpperCase()}`}</span>\n                                                )}\n                                            </td>\n\n                                            {/* ACCESS */}\n                                            <td\n                                                data-col-key=\"access\"\n                                                className={`px-4 py-2 text-xs align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"access\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"access\" });\n                                                }}\n                                            >\n                                                {regActiveCell.rowIndex === idx && regActiveCell.key === \"access\" ? (\n                                                    <VSCodeDropdown\n                                                        value={reg.access || \"read-write\"}\n                                                        onInput={(e: any) =>\n                                                            onUpdate([\"registers\", idx, \"access\"], e.target.value)\n                                                        }\n                                                        className=\"w-full\"\n                                                    >\n                                                        {[\"read-write\", \"read-only\", \"write-only\"].map((opt) => (\n                                                            <option key={opt} value={opt}>\n                                                                {opt}\n                                                            </option>\n                                                        ))}\n                                                    </VSCodeDropdown>\n                                                ) : (\n                                                    <span\n                                                        className={`px-2 py-0.5 rounded-full text-[10px] uppercase font-semibold bg-opacity-20 ${reg.access === \"read-only\"\n                                                                ? \"bg-blue-500 text-blue-500\"\n                                                                : reg.access === \"write-only\"\n                                                                    ? \"bg-orange-500 text-orange-500\"\n                                                                    : \"bg-green-500 text-green-500\"\n                                                            }`}\n                                                    >\n                                                        {reg.access || \"RW\"}\n                                                    </span>\n                                                )}\n                                            </td>\n\n                                            {/* DESCRIPTION */}\n                                            <td\n                                                data-col-key=\"description\"\n                                                className={`px-6 py-2 align-middle ${regActiveCell.rowIndex === idx && regActiveCell.key === \"description\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    setSelectedRegIndex(idx);\n                                                    setRegActiveCell({ rowIndex: idx, key: \"description\" });\n                                                }}\n                                            >\n                                                {regActiveCell.rowIndex === idx && regActiveCell.key === \"description\" ? (\n                                                    <VSCodeTextField\n                                                        value={reg.description || \"\"}\n                                                        onInput={(e: any) =>\n                                                            onUpdate([\"registers\", idx, \"description\"], e.target.value)\n                                                        }\n                                                        className=\"w-full\"\n                                                        autoFocus\n                                                    />\n                                                ) : (\n                                                    <span className=\"truncate block max-w-[300px] opacity-70\">\n                                                        {reg.description}\n                                                    </span>\n                                                )}\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                                {nestedRegisters.length === 0 && (\n                                    <tr>\n                                        <td colSpan={4} className=\"px-4 py-8 text-center vscode-muted\">\n                                            No nested registers. Press{\" \"}\n                                            <kbd className=\"px-1 rounded vscode-surface-alt\">o</kbd> to add one.\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div className=\"flex-none p-4 bg-vscode-editor-background border-t vscode-border flex justify-between items-center\">\n                    <p className=\"text-xs vscode-muted\">\n                        These registers are replicated {arr?.count || 1} times at{\" \"}\n                        {arr?.stride || 4}-byte intervals.\n                    </p>\n                    <KeyboardShortcutsButton context=\"array\" />\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/register/FieldsTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'parseBitsRange' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":24},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\[.","line":74,"column":43,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":74,"endColumn":44,"suggestions":[{"messageId":"removeEscape","fix":{"range":[2540,2541],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[2540,2540],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3534,3537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3534,3537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":116,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":116,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":120,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":120,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":120,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":120,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3966,3969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3966,3969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4706,4709],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4706,4709],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `{ bit_offset?: number | null | undefined; bit_width?: number | null | undefined; bits?: string | null | undefined; }`.","line":288,"column":64,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":288,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":290,"column":37,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":290,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":290,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":290,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number | undefined`.","line":291,"column":37,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":291,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":291,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":291,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":294,"column":37,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":294,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":294,"column":67,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":294,"endColumn":84},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .reset_value on an `any` value.","line":295,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":295,"endColumn":72},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":299,"column":37,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":299,"endColumn":56,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[11200,11219],"text":"field?.name"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":299,"column":46,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":299,"endColumn":56},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":299,"column":62,"nodeType":"MemberExpression","messageId":"invalidType","endLine":299,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":299,"column":62,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":299,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":301,"column":68,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":301,"endColumn":78},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":332,"column":52,"nodeType":"ChainExpression","messageId":"invalidType","endLine":332,"endColumn":105},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .replace on an `any` value.","line":332,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":332,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":332,"column":52,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":332,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":332,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":332,"endColumn":62},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":332,"column":52,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":332,"endColumn":75},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":359,"column":76,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":359,"endColumn":111,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[15559,15594],"text":"FIELD_COLORS?.[color]"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":374,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16812,16815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16812,16815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":375,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":375,"endColumn":93},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":386,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":386,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17815,17818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17815,17818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":387,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":387,"endColumn":93},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":435,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":435,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21562,21565],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21562,21565],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":436,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":436,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `{ bit_offset?: number | null | undefined; bit_width?: number | null | undefined; bits?: string | null | undefined; }`.","line":451,"column":120,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":451,"endColumn":129},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":470,"column":77,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":470,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":474,"column":77,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":480,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":482,"column":77,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":482,"endColumn":105},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":485,"column":75,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":485,"endColumn":102},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":486,"column":75,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":488,"endColumn":111},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":486,"column":85,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":486,"endColumn":99},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":487,"column":75,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":487,"endColumn":89},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":488,"column":75,"nodeType":"MemberExpression","messageId":"invalid","endLine":488,"endColumn":90},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":488,"column":75,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":488,"endColumn":90},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":488,"column":93,"nodeType":"MemberExpression","messageId":"invalid","endLine":488,"endColumn":107},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":488,"column":93,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":488,"endColumn":107},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":489,"column":73,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":489,"endColumn":90},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":495,"column":79,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":495,"endColumn":99},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":496,"column":79,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":496,"endColumn":103},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":496,"column":87,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":496,"endColumn":98},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":497,"column":79,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":497,"endColumn":96},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":497,"column":85,"nodeType":"Identifier","messageId":"invalid","endLine":497,"endColumn":92},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":498,"column":85,"nodeType":"Identifier","messageId":"invalid","endLine":498,"endColumn":88},{"ruleId":"@typescript-eslint/restrict-plus-operands","severity":2,"message":"Invalid operand for a '+' operation. Operands must each be a number or string. Got `any`.","line":498,"column":91,"nodeType":"Identifier","messageId":"invalid","endLine":498,"endColumn":96},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":499,"column":73,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":505,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":501,"column":77,"nodeType":"Property","messageId":"anyAssignment","endLine":501,"endColumn":92},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":502,"column":77,"nodeType":"Property","messageId":"anyAssignment","endLine":502,"endColumn":93},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `number`.","line":504,"column":99,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":504,"endColumn":102},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":542,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":542,"endColumn":92},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .access on an `any` value.","line":542,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":542,"endColumn":76},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":551,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":551,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31372,31375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31372,31375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":554,"column":65,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":554,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":596,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":596,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34702,34705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34702,34705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":597,"column":80,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":597,"endColumn":88},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":661,"column":64,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":661,"endColumn":87},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .description on an `any` value.","line":661,"column":64,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":661,"endColumn":81},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":671,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":671,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[40388,40391],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[40388,40391],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":674,"column":65,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":674,"endColumn":73}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":58,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { YamlUpdateHandler } from \"../../types/editor\";\nimport {\n    VSCodeDropdown,\n    VSCodeOption,\n    VSCodeTextField,\n    VSCodeTextArea,\n} from \"@vscode/webview-ui-toolkit/react\";\nimport { EditableTable } from \"../../shared/components\";\nimport { FIELD_COLORS, getFieldColor } from \"../../shared/colors\";\nimport { parseBitsRange, formatBits } from \"../../algorithms/BitFieldRepacker\";\nimport { fieldToBitsString } from \"../../utils/BitFieldUtils\";\nimport { validateVhdlIdentifier } from \"../../shared/utils/validation\";\nimport type { FieldEditorState } from \"../../hooks/useFieldEditor\";\n\n// ---------------------------------------------------------------------------\n// Constants\n// ---------------------------------------------------------------------------\n\nconst ACCESS_OPTIONS = [\n    \"read-only\",\n    \"write-only\",\n    \"read-write\",\n    \"write-1-to-clear\",\n    \"read-write-1-to-clear\",\n];\n\nconst FIELD_TABLE_COLUMNS = [\n    { key: \"name\", header: \"Name\" },\n    { key: \"bits\", header: \"Bit(s)\" },\n    { key: \"access\", header: \"Access\" },\n    { key: \"reset\", header: \"Reset\" },\n    { key: \"description\", header: \"Description\" },\n];\n\n// ---------------------------------------------------------------------------\n// Validation helpers (register-editor utilities)\n// ---------------------------------------------------------------------------\n\n/** Returns the width represented by \"[N:M]\" or \"[N]\" strings. */\nfunction parseBitsWidth(bits: string): number | null {\n    const match = bits.trim().match(/^\\[(\\d+)(?::(\\d+))?\\]$/);\n    if (!match) {\n        return null;\n    }\n    const n = parseInt(match[1], 10);\n    const m = match[2] ? parseInt(match[2], 10) : n;\n    return Math.abs(n - m) + 1;\n}\n\n/** Returns an error message for an invalid bits string, or null if valid. */\nfunction validateBitsString(bits: string): string | null {\n    const trimmed = bits.trim();\n    if (!/^\\[\\d+(?::\\d+)?\\]$/.test(trimmed)) {\n        return \"Format must be [N:M] or [N]\";\n    }\n    const match = trimmed.match(/\\[(\\d+)(?::(\\d+))?\\]/);\n    if (!match) {\n        return \"Invalid format\";\n    }\n    const n = parseInt(match[1], 10);\n    const m = match[2] ? parseInt(match[2], 10) : n;\n    if (n < 0 || m < 0) {\n        return \"Bit indices must be >= 0\";\n    }\n    if (n < m) {\n        return \"MSB must be >= LSB\";\n    }\n    return null;\n}\n\n/** Parses a bit string like \"[7:4]\" or \"[3]\" into {bit_offset, bit_width, bit_range}. */\nfunction parseBitsInput(text: string) {\n    const trimmed = text.trim().replace(/[\\[\\]]/g, \"\");\n    if (!trimmed) {\n        return null;\n    }\n    const parts = trimmed.split(\":\").map((p) => Number(p.trim()));\n    if (parts.some((p) => Number.isNaN(p))) {\n        return null;\n    }\n    let msb: number;\n    let lsb: number;\n    if (parts.length === 1) {\n        msb = parts[0];\n        lsb = parts[0];\n    } else {\n        [msb, lsb] = parts as [number, number];\n    }\n    if (!Number.isFinite(msb) || !Number.isFinite(lsb)) {\n        return null;\n    }\n    if (msb < lsb) {\n        const tmp = msb;\n        msb = lsb;\n        lsb = tmp;\n    }\n    return {\n        bit_offset: lsb,\n        bit_width: msb - lsb + 1,\n        bit_range: [msb, lsb] as [number, number],\n    };\n}\n\n/** Parses a hex or decimal string to a number, or returns null. */\nfunction parseReset(text: string): number | null {\n    const s = text.trim();\n    if (!s) {\n        return null;\n    }\n    const v = Number.parseInt(s, 0);\n    return Number.isFinite(v) ? v : null;\n}\n\nfunction getFieldBitWidth(f: any): number {\n    const w = Number(f?.bit_width);\n    if (Number.isFinite(w) && w > 0) {\n        return w;\n    }\n    const br = f?.bit_range;\n    if (Array.isArray(br) && br.length === 2) {\n        const msb = Number(br[0]);\n        const lsb = Number(br[1]);\n        if (Number.isFinite(msb) && Number.isFinite(lsb)) {\n            return Math.abs(msb - lsb) + 1;\n        }\n    }\n    return 1;\n}\n\nfunction validateResetForField(f: any, value: number | null): string | null {\n    if (value === null) {\n        return null;\n    }\n    if (!Number.isFinite(value)) {\n        return \"Invalid number\";\n    }\n    if (value < 0) {\n        return \"Reset must be >= 0\";\n    }\n    const width = getFieldBitWidth(f);\n    const max =\n        width >= 53 ? Number.MAX_SAFE_INTEGER : Math.pow(2, width) - 1;\n    if (value > max) {\n        return `Reset too large for ${width} bit(s)`;\n    }\n    return null;\n}\n\n// ---------------------------------------------------------------------------\n// Props\n// ---------------------------------------------------------------------------\n\nexport interface FieldsTableProps {\n    /** Normalised bit fields for the current register. */\n    fields: any[];\n    /** Register width in bits (used for overflow validation). */\n    registerSize: number;\n    /** Callback to commit a YAML path + value change. */\n    onUpdate: YamlUpdateHandler;\n    /** All editing state from the useFieldEditor hook. */\n    fieldEditor: FieldEditorState;\n}\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\n/**\n * Renders the editable bit fields table for a register, including the\n * move-up/move-down toolbar.\n * Delegates insertion/deletion/editing to the useFieldEditor hook state.\n */\nexport function FieldsTable({\n    fields,\n    registerSize,\n    onUpdate,\n    fieldEditor,\n}: FieldsTableProps) {\n    const {\n        selectedFieldIndex,\n        setSelectedFieldIndex,\n        hoveredFieldIndex,\n        setHoveredFieldIndex,\n        setSelectedEditKey,\n        activeCell,\n        setActiveCell,\n        nameDrafts,\n        setNameDrafts,\n        nameErrors,\n        setNameErrors,\n        bitsDrafts,\n        setBitsDrafts,\n        bitsErrors,\n        setBitsErrors,\n        dragPreviewRanges,\n        resetDrafts,\n        setResetDrafts,\n        resetErrors,\n        setResetErrors,\n        insertError,\n        focusRef,\n        errorRef,\n        ensureDraftsInitialized,\n        moveSelectedField,\n    } = fieldEditor;\n\n    return (\n        <div className=\"flex-1 flex overflow-hidden min-h-0\">\n            <div className=\"flex-1 vscode-surface border-r vscode-border min-h-0 flex flex-col\">\n                {/* Toolbar: move up / move down */}\n                <div className=\"shrink-0 px-4 py-2 border-b vscode-border vscode-surface flex items-center justify-end gap-1\">\n                    <button\n                        className=\"p-2 rounded-md transition-colors disabled:opacity-40 vscode-icon-button\"\n                        onClick={() => moveSelectedField(-1)}\n                        disabled={selectedFieldIndex <= 0}\n                        title=\"Move field up\"\n                        type=\"button\"\n                    >\n                        <span className=\"codicon codicon-chevron-up\"></span>\n                    </button>\n                    <button\n                        className=\"p-2 rounded-md transition-colors disabled:opacity-40 vscode-icon-button\"\n                        onClick={() => moveSelectedField(1)}\n                        disabled={\n                            selectedFieldIndex < 0 ||\n                            selectedFieldIndex >= fields.length - 1\n                        }\n                        title=\"Move field down\"\n                        type=\"button\"\n                    >\n                        <span className=\"codicon codicon-chevron-down\"></span>\n                    </button>\n                </div>\n\n                {/* Scrollable table */}\n                <div\n                    ref={focusRef}\n                    tabIndex={0}\n                    data-fields-table=\"true\"\n                    className=\"flex-1 overflow-auto min-h-0 outline-none focus:outline-none\"\n                    style={{ overflowY: \"auto\", overflowX: \"auto\" }}\n                >\n                    {insertError ? (\n                        <div ref={errorRef} className=\"vscode-error px-4 py-2 text-xs\">\n                            {insertError}\n                        </div>\n                    ) : null}\n\n                    <EditableTable\n                        rows={fields}\n                        columns={FIELD_TABLE_COLUMNS}\n                        showHeaderSection={false}\n                        showTableBorder={false}\n                        containerClassName=\"\"\n                        tableWrapperClassName=\"\"\n                        tableClassName=\"w-full text-left border-collapse table-fixed\"\n                        renderTableContent={() => (\n                            <>\n                                <colgroup>\n                                    <col className=\"w-[18%] min-w-[120px]\" />\n                                    <col className=\"w-[14%] min-w-[100px]\" />\n                                    <col className=\"w-[14%] min-w-[120px]\" />\n                                    <col className=\"w-[14%] min-w-[110px]\" />\n                                    <col className=\"w-[40%] min-w-[240px]\" />\n                                </colgroup>\n                                <thead className=\"vscode-surface-alt text-xs font-semibold vscode-muted uppercase tracking-wider sticky top-0 z-10 shadow-sm\">\n                                    <tr className=\"h-12\">\n                                        <th className=\"px-6 py-3 border-b vscode-border align-middle\">\n                                            Name\n                                        </th>\n                                        <th className=\"px-4 py-3 border-b vscode-border align-middle\">\n                                            Bit(s)\n                                        </th>\n                                        <th className=\"px-4 py-3 border-b vscode-border align-middle\">\n                                            Access\n                                        </th>\n                                        <th className=\"px-4 py-3 border-b vscode-border align-middle\">\n                                            Reset\n                                        </th>\n                                        <th className=\"px-6 py-3 border-b vscode-border align-middle\">\n                                            Description\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"divide-y vscode-border text-sm\">\n                            {fields.map((field, index) => {\n                                const bits = fieldToBitsString(field);\n                                const color = getFieldColor(\n                                    field.name || `field${index}`,\n                                    field.bit_offset,\n                                );\n                                const resetDisplay =\n                                    field.reset_value !== null && field.reset_value !== undefined\n                                        ? `0x${Number(field.reset_value).toString(16).toUpperCase()}`\n                                        : \"\";\n\n                                const fieldKey =\n                                    field && field.name ? `${field.name}` : `index-${index}`;\n                                const nameValue =\n                                    nameDrafts[fieldKey] ?? String(field.name ?? \"\");\n                                const nameErr = nameErrors[fieldKey] ?? null;\n\n                                const previewRange = dragPreviewRanges[index];\n                                const bitsValue = previewRange\n                                    ? `[${previewRange[0]}:${previewRange[1]}]`\n                                    : (bitsDrafts[index] ?? bits);\n                                const bitsErr = bitsErrors[index] ?? null;\n                                const resetValue =\n                                    resetDrafts[index] ?? (resetDisplay || \"0x0\");\n                                const resetErr = resetErrors[index] ?? null;\n\n                                return (\n                                    <tr\n                                        key={index}\n                                        data-field-index={index}\n                                        className={`group transition-colors border-l-4 border-transparent h-12 ${index === selectedFieldIndex\n                                                ? \"vscode-focus-border vscode-row-selected\"\n                                                : index === hoveredFieldIndex\n                                                    ? \"vscode-focus-border vscode-row-hover\"\n                                                    : \"\"\n                                            }`}\n                                        style={{ position: \"relative\" }}\n                                        onMouseEnter={() => setHoveredFieldIndex(index)}\n                                        onMouseLeave={() => setHoveredFieldIndex(null)}\n                                        onClick={() => {\n                                            setSelectedFieldIndex(index);\n                                            setHoveredFieldIndex(index);\n                                            setActiveCell((prev) => ({ rowIndex: index, key: prev.key }));\n                                            ensureDraftsInitialized(index);\n                                        }}\n                                        id={`row-${field.name?.toLowerCase().replace(/[^a-z0-9_]/g, \"-\")}`}\n                                    >\n                                        <>\n                                            {/* NAME */}\n                                            <td\n                                                data-col-key=\"name\"\n                                                className={`px-6 py-2 font-medium align-middle ${activeCell.rowIndex === index && activeCell.key === \"name\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    ensureDraftsInitialized(index);\n                                                    setSelectedFieldIndex(index);\n                                                    setHoveredFieldIndex(index);\n                                                    setSelectedEditKey(\"name\");\n                                                    setActiveCell({ rowIndex: index, key: \"name\" });\n                                                }}\n                                            >\n                                                <div className=\"flex flex-col justify-center\">\n                                                    <div className=\"flex items-center gap-2 h-10\">\n                                                        <div\n                                                            className=\"w-2.5 h-2.5 rounded-sm\"\n                                                            style={{\n                                                                backgroundColor:\n                                                                    color === \"gray\"\n                                                                        ? \"#e5e7eb\"\n                                                                        : (FIELD_COLORS && FIELD_COLORS[color]) ||\n                                                                        color,\n                                                            }}\n                                                        />\n                                                        <VSCodeTextField\n                                                            data-edit-key=\"name\"\n                                                            className=\"flex-1\"\n                                                            value={nameValue}\n                                                            onFocus={() => {\n                                                                ensureDraftsInitialized(index);\n                                                                setSelectedFieldIndex(index);\n                                                                setHoveredFieldIndex(index);\n                                                                setSelectedEditKey(\"name\");\n                                                                setActiveCell({ rowIndex: index, key: \"name\" });\n                                                            }}\n                                                            onInput={(e: any) => {\n                                                                const next = String(e.target.value ?? \"\");\n                                                                setNameDrafts((prev) => ({\n                                                                    ...prev,\n                                                                    [fieldKey]: next,\n                                                                }));\n                                                                const err = validateVhdlIdentifier(next);\n                                                                setNameErrors((prev) => ({\n                                                                    ...prev,\n                                                                    [fieldKey]: err,\n                                                                }));\n                                                            }}\n                                                            onBlur={(e: any) => {\n                                                                const next = String(e.target.value ?? \"\");\n                                                                const err = validateVhdlIdentifier(next);\n                                                                if (!err) {\n                                                                    onUpdate(\n                                                                        [\"fields\", index, \"name\"],\n                                                                        next.trim(),\n                                                                    );\n                                                                }\n                                                            }}\n                                                        />\n                                                    </div>\n                                                    {nameErr ? (\n                                                        <div className=\"text-xs vscode-error mt-1\">\n                                                            {nameErr}\n                                                        </div>\n                                                    ) : null}\n                                                </div>\n                                            </td>\n\n                                            {/* BITS */}\n                                            <td\n                                                data-col-key=\"bits\"\n                                                className={`px-4 py-2 font-mono vscode-muted align-middle ${activeCell.rowIndex === index && activeCell.key === \"bits\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    ensureDraftsInitialized(index);\n                                                    setSelectedFieldIndex(index);\n                                                    setHoveredFieldIndex(index);\n                                                    setSelectedEditKey(\"bits\");\n                                                    setActiveCell({ rowIndex: index, key: \"bits\" });\n                                                }}\n                                            >\n                                                <div className=\"flex items-center h-10\">\n                                                    <div className=\"flex flex-col w-full\">\n                                                        <VSCodeTextField\n                                                            data-edit-key=\"bits\"\n                                                            className=\"w-full font-mono\"\n                                                            value={bitsValue}\n                                                            onFocus={() => {\n                                                                ensureDraftsInitialized(index);\n                                                                setSelectedFieldIndex(index);\n                                                                setHoveredFieldIndex(index);\n                                                                setSelectedEditKey(\"bits\");\n                                                                setActiveCell({ rowIndex: index, key: \"bits\" });\n                                                            }}\n                                                            onInput={(e: any) => {\n                                                                const next = String(e.target.value ?? \"\");\n                                                                setBitsDrafts((prev) => ({\n                                                                    ...prev,\n                                                                    [index]: next,\n                                                                }));\n                                                                let err = validateBitsString(next);\n                                                                if (!err) {\n                                                                    const thisWidth = parseBitsWidth(next);\n                                                                    if (thisWidth !== null) {\n                                                                        let total = 0;\n                                                                        for (let i = 0; i < fields.length; ++i) {\n                                                                            if (i === index) {\n                                                                                total += thisWidth;\n                                                                            } else {\n                                                                                const b =\n                                                                                    bitsDrafts[i] ?? fieldToBitsString(fields[i]);\n                                                                                const w = parseBitsWidth(b);\n                                                                                if (w) {\n                                                                                    total += w;\n                                                                                }\n                                                                            }\n                                                                        }\n                                                                        if (total > registerSize) {\n                                                                            err = `Bit fields overflow register (${total} > ${registerSize})`;\n                                                                        }\n                                                                    }\n                                                                }\n                                                                setBitsErrors((prev) => ({\n                                                                    ...prev,\n                                                                    [index]: err,\n                                                                }));\n                                                                if (!err) {\n                                                                    const updatedFields = fields.map((f, i) => {\n                                                                        if (i !== index) {\n                                                                            return { ...f };\n                                                                        }\n                                                                        const parsed = parseBitsInput(next);\n                                                                        if (parsed) {\n                                                                            return {\n                                                                                ...f,\n                                                                                bits: next,\n                                                                                bit_offset: parsed.bit_offset,\n                                                                                bit_width: parsed.bit_width,\n                                                                                bit_range: parsed.bit_range,\n                                                                            };\n                                                                        } else {\n                                                                            return { ...f, bits: next };\n                                                                        }\n                                                                    });\n                                                                    const curr = updatedFields[index];\n                                                                    const currMSB = curr.bit_range\n                                                                        ? curr.bit_range[0]\n                                                                        : curr.bit_offset + curr.bit_width - 1;\n                                                                    let prevMSB = currMSB;\n                                                                    for (\n                                                                        let i = index + 1;\n                                                                        i < updatedFields.length;\n                                                                        ++i\n                                                                    ) {\n                                                                        const f = updatedFields[i];\n                                                                        const width = f.bit_width || 1;\n                                                                        const lsb = prevMSB + 1;\n                                                                        const msb = lsb + width - 1;\n                                                                        updatedFields[i] = {\n                                                                            ...f,\n                                                                            bit_offset: lsb,\n                                                                            bit_width: width,\n                                                                            bit_range: [msb, lsb],\n                                                                            bits: formatBits(msb, lsb),\n                                                                        };\n                                                                        prevMSB = msb;\n                                                                    }\n                                                                    onUpdate([\"fields\"], updatedFields);\n                                                                }\n                                                            }}\n                                                        />\n                                                        {bitsErr ? (\n                                                            <div className=\"text-xs vscode-error mt-1\">\n                                                                {bitsErr}\n                                                            </div>\n                                                        ) : null}\n                                                    </div>\n                                                </div>\n                                            </td>\n\n                                            {/* ACCESS */}\n                                            <td\n                                                data-col-key=\"access\"\n                                                className={`px-4 py-2 align-middle ${activeCell.rowIndex === index &&\n                                                        activeCell.key === \"access\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                style={{ overflow: \"visible\", position: \"relative\" }}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    ensureDraftsInitialized(index);\n                                                    setSelectedFieldIndex(index);\n                                                    setHoveredFieldIndex(index);\n                                                    setSelectedEditKey(\"access\");\n                                                    setActiveCell({ rowIndex: index, key: \"access\" });\n                                                }}\n                                            >\n                                                <div className=\"flex items-center h-10\">\n                                                    <VSCodeDropdown\n                                                        data-edit-key=\"access\"\n                                                        value={field.access || \"read-write\"}\n                                                        className=\"w-full\"\n                                                        position=\"below\"\n                                                        onFocus={() => {\n                                                            setSelectedFieldIndex(index);\n                                                            setHoveredFieldIndex(index);\n                                                            setSelectedEditKey(\"access\");\n                                                            setActiveCell({ rowIndex: index, key: \"access\" });\n                                                        }}\n                                                        onInput={(e: any) =>\n                                                            onUpdate(\n                                                                [\"fields\", index, \"access\"],\n                                                                e.target.value,\n                                                            )\n                                                        }\n                                                    >\n                                                        {ACCESS_OPTIONS.map((opt) => (\n                                                            <VSCodeOption key={opt} value={opt}>\n                                                                {opt}\n                                                            </VSCodeOption>\n                                                        ))}\n                                                    </VSCodeDropdown>\n                                                </div>\n                                            </td>\n\n                                            {/* RESET */}\n                                            <td\n                                                data-col-key=\"reset\"\n                                                className={`px-4 py-2 font-mono vscode-muted align-middle ${activeCell.rowIndex === index &&\n                                                        activeCell.key === \"reset\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    ensureDraftsInitialized(index);\n                                                    setSelectedFieldIndex(index);\n                                                    setHoveredFieldIndex(index);\n                                                    setSelectedEditKey(\"reset\");\n                                                    setActiveCell({ rowIndex: index, key: \"reset\" });\n                                                }}\n                                            >\n                                                <div className=\"flex flex-col justify-center h-10\">\n                                                    <VSCodeTextField\n                                                        data-edit-key=\"reset\"\n                                                        className=\"w-full font-mono\"\n                                                        value={resetValue}\n                                                        onFocus={() => {\n                                                            ensureDraftsInitialized(index);\n                                                            setSelectedFieldIndex(index);\n                                                            setHoveredFieldIndex(index);\n                                                            setSelectedEditKey(\"reset\");\n                                                            setActiveCell({ rowIndex: index, key: \"reset\" });\n                                                        }}\n                                                        onInput={(e: any) => {\n                                                            const raw = String(e.target.value ?? \"\");\n                                                            setResetDrafts((prev) => ({\n                                                                ...prev,\n                                                                [index]: raw,\n                                                            }));\n                                                            const trimmed = raw.trim();\n                                                            if (!trimmed) {\n                                                                setResetErrors((prev) => ({\n                                                                    ...prev,\n                                                                    [index]: null,\n                                                                }));\n                                                                onUpdate([\"fields\", index, \"reset_value\"], null);\n                                                                return;\n                                                            }\n                                                            const parsed = parseReset(raw);\n                                                            const err = validateResetForField(field, parsed);\n                                                            setResetErrors((prev) => ({\n                                                                ...prev,\n                                                                [index]: err,\n                                                            }));\n                                                            if (!err && parsed !== null) {\n                                                                onUpdate(\n                                                                    [\"fields\", index, \"reset_value\"],\n                                                                    parsed,\n                                                                );\n                                                            }\n                                                        }}\n                                                    />\n                                                    {resetErr ? (\n                                                        <div className=\"text-xs vscode-error mt-1\">\n                                                            {resetErr}\n                                                        </div>\n                                                    ) : null}\n                                                </div>\n                                            </td>\n\n                                            {/* DESCRIPTION */}\n                                            <td\n                                                data-col-key=\"description\"\n                                                className={`px-6 py-2 vscode-muted align-middle ${activeCell.rowIndex === index &&\n                                                        activeCell.key === \"description\"\n                                                        ? \"vscode-cell-active\"\n                                                        : \"\"\n                                                    }`}\n                                                style={{ width: \"40%\", minWidth: \"240px\" }}\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    ensureDraftsInitialized(index);\n                                                    setSelectedFieldIndex(index);\n                                                    setHoveredFieldIndex(index);\n                                                    setSelectedEditKey(\"description\");\n                                                    setActiveCell({ rowIndex: index, key: \"description\" });\n                                                }}\n                                            >\n                                                <div className=\"flex items-center h-10\">\n                                                    <VSCodeTextArea\n                                                        data-edit-key=\"description\"\n                                                        className=\"w-full\"\n                                                        style={{\n                                                            height: \"40px\",\n                                                            minHeight: \"40px\",\n                                                            resize: \"none\",\n                                                        }}\n                                                        rows={1}\n                                                        value={field.description || \"\"}\n                                                        onFocus={() => {\n                                                            setSelectedFieldIndex(index);\n                                                            setHoveredFieldIndex(index);\n                                                            setSelectedEditKey(\"description\");\n                                                            setActiveCell({\n                                                                rowIndex: index,\n                                                                key: \"description\",\n                                                            });\n                                                        }}\n                                                        onInput={(e: any) =>\n                                                            onUpdate(\n                                                                [\"fields\", index, \"description\"],\n                                                                e.target.value,\n                                                            )\n                                                        }\n                                                    />\n                                                </div>\n                                            </td>\n                                        </>\n                                    </tr>\n                                );\n                            })}\n                                </tbody>\n                            </>\n                        )}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/components/register/RegisterEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":88,"column":9,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":99,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2727,2730],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2727,2730],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_range on an `any` value.","line":89,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":89,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":90,"column":17,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":90,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":92,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":92,"column":47,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":93,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":93,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":94,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":94,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":96,"column":17,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":96,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":98,"column":13,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":98,"endColumn":22},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":163,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":163,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6491,6493],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, {\n    useEffect,\n    useImperativeHandle,\n    useMemo,\n} from \"react\";\nimport type { YamlUpdateHandler, BitFieldRecord } from \"../../types/editor\";\nimport BitFieldVisualizer from \"../BitFieldVisualizer\";\nimport { KeyboardShortcutsButton } from \"../../shared/components\";\nimport { FieldsTable } from \"./FieldsTable\";\nimport { useFieldEditor } from \"../../hooks/useFieldEditor\";\nimport type { Register } from \"../../types/memoryMap\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\nexport interface RegisterEditorProps {\n    /** The register to display and edit. */\n    register: Register;\n    /** Normalised bit fields (with bit_range / bit_offset / bit_width). */\n    fields: BitFieldRecord[];\n    selectionMeta?: {\n        absoluteAddress?: number;\n        relativeOffset?: number;\n        focusDetails?: boolean;\n    };\n    onUpdate: YamlUpdateHandler;\n}\n\nexport type RegisterEditorHandle = {\n    focus: () => void;\n};\n\n// ---------------------------------------------------------------------------\n// Component\n// ---------------------------------------------------------------------------\n\n/**\n * Renders and manages editing of a single register's properties, including:\n * - Register name / description header\n * - Interactive BitFieldVisualizer\n * - Editable FieldsTable with keyboard navigation\n *\n * Exposes a `focus()` method via ref.\n */\nexport const RegisterEditor = React.forwardRef<\n    RegisterEditorHandle,\n    RegisterEditorProps\n>(({ register, fields, selectionMeta, onUpdate }, ref) => {\n    const registerSize = register?.size ?? 32;\n\n    const fieldEditor = useFieldEditor(fields, registerSize, onUpdate, true);\n\n    const {\n        hoveredFieldIndex,\n        setHoveredFieldIndex,\n        setDragPreviewRanges,\n        focusRef,\n    } = fieldEditor;\n\n    // Expose focus() to parent (e.g. DetailsPanel's useImperativeHandle).\n    useImperativeHandle(\n        ref,\n        () => ({\n            focus: () => {\n                focusRef.current?.focus();\n            },\n        }),\n        [],\n    );\n\n    // Auto-focus when selectionMeta.focusDetails is set.\n    useEffect(() => {\n        if (!selectionMeta?.focusDetails) {\n            return;\n        }\n        const id = window.setTimeout(() => {\n            focusRef.current?.focus();\n        }, 0);\n        return () => window.clearTimeout(id);\n    }, [selectionMeta?.focusDetails, register?.name]);\n\n    // Normalise fields for BitFieldVisualizer (provide bit_range).\n    const normalisedFields = useMemo(() => {\n        if (!register?.fields) {\n            return [];\n        }\n        return register.fields.map((f: any) => {\n            if (f.bit_range) {\n                return f;\n            }\n            if (f.bit_offset !== undefined && f.bit_width !== undefined) {\n                const lo = Number(f.bit_offset);\n                const width = Number(f.bit_width);\n                const hi = lo + width - 1;\n                return { ...f, bit_range: [hi, lo] };\n            }\n            return f;\n        });\n    }, [register?.fields]);\n\n    return (\n        <div className=\"flex flex-col w-full h-full min-h-0\">\n            {/* Register Header + BitFieldVisualizer */}\n            <div className=\"vscode-surface border-b vscode-border p-8 flex flex-col gap-6 shrink-0 relative overflow-hidden\">\n                <div className=\"flex justify-between items-start relative z-10\">\n                    <div>\n                        <h2 className=\"text-2xl font-bold font-mono tracking-tight\">\n                            {register.name}\n                        </h2>\n                        <p className=\"vscode-muted text-sm mt-1 max-w-2xl\">\n                            {register.description}\n                        </p>\n                    </div>\n                </div>\n                <div className=\"w-full relative z-10 mt-2 select-none\">\n                    <BitFieldVisualizer\n                        fields={normalisedFields}\n                        hoveredFieldIndex={hoveredFieldIndex}\n                        setHoveredFieldIndex={setHoveredFieldIndex}\n                        registerSize={32}\n                        layout=\"pro\"\n                        onUpdateFieldReset={(fieldIndex, resetValue) => {\n                            onUpdate([\"fields\", fieldIndex, \"reset_value\"], resetValue);\n                        }}\n                        onUpdateFieldRange={(fieldIndex, newRange) => {\n                            const [hi, lo] = newRange;\n                            const field = fields[fieldIndex];\n                            const updatedField = {\n                                ...field,\n                                bit_range: newRange,\n                                bit_offset: lo,\n                                bit_width: hi - lo + 1,\n                            };\n                            const newFields = [...fields];\n                            newFields[fieldIndex] = updatedField;\n                            onUpdate([\"fields\"], newFields);\n                        }}\n                        onBatchUpdateFields={(updates) => {\n                            const newFields = [...fields];\n                            updates.forEach(({ idx, range }) => {\n                                const [hi, lo] = range;\n                                const field = newFields[idx];\n                                if (field) {\n                                    newFields[idx] = {\n                                        ...field,\n                                        bit_range: range,\n                                        bit_offset: lo,\n                                        bit_width: hi - lo + 1,\n                                    };\n                                }\n                            });\n                            newFields.sort((a, b) => {\n                                const aLo = a.bit_range ? a.bit_range[1] : (a.bit_offset ?? 0);\n                                const bLo = b.bit_range ? b.bit_range[1] : (b.bit_offset ?? 0);\n                                return aLo - bLo;\n                            });\n                            onUpdate([\"fields\"], newFields);\n                        }}\n                        onCreateField={(newField) => {\n                            let maxN = 0;\n                            for (const f of fields) {\n                                const m = String(f.name || \"\").match(/^field(\\d+)$/);\n                                if (m) {\n                                    maxN = Math.max(maxN, parseInt(m[1], 10));\n                                }\n                            }\n                            const name = `field${maxN + 1}`;\n                            const [hi, lo] = newField.bit_range;\n                            const field = {\n                                name,\n                                bit_range: newField.bit_range,\n                                bit_offset: lo,\n                                bit_width: hi - lo + 1,\n                                access: \"read-write\",\n                                reset_value: 0,\n                                description: \"\",\n                            };\n                            const newFields = [...fields, field].sort((a, b) => {\n                                const aLo = a.bit_range ? a.bit_range[1] : (a.bit_offset ?? 0);\n                                const bLo = b.bit_range ? b.bit_range[1] : (b.bit_offset ?? 0);\n                                return aLo - bLo;\n                            });\n                            onUpdate([\"fields\"], newFields);\n                        }}\n                        onDragPreview={(preview) => {\n                            if (preview === null) {\n                                setDragPreviewRanges({});\n                            } else {\n                                const newRanges: Record<number, [number, number]> = {};\n                                preview.forEach(({ idx, range }) => {\n                                    newRanges[idx] = range;\n                                });\n                                setDragPreviewRanges(newRanges);\n                            }\n                        }}\n                    />\n                </div>\n            </div>\n\n            {/* Editable fields table */}\n            <FieldsTable\n                fields={fields}\n                registerSize={registerSize}\n                onUpdate={onUpdate}\n                fieldEditor={fieldEditor}\n            />\n\n            <KeyboardShortcutsButton context=\"register\" />\n        </div>\n    );\n});\n\nRegisterEditor.displayName = \"RegisterEditor\";\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/hooks/useFieldEditor.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":185,"column":9,"endLine":185,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":417,"column":9,"endLine":417,"endColumn":64,"severity":2,"nodeType":null},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .blur on an `any` value.","line":453,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":453,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":453,"column":17,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":453,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":453,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":453,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17114,17117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17114,17117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { SpatialInsertionService } from \"../services/SpatialInsertionService\";\nimport type { BitFieldRuntimeDef } from \"../services/SpatialInsertionService\";\nimport { fieldToBitsString } from \"../utils/BitFieldUtils\";\nimport type { BitFieldRecord, YamlUpdateHandler } from \"../types/editor\";\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\nexport type EditKey = \"name\" | \"bits\" | \"access\" | \"reset\" | \"description\";\nexport type ActiveCell = { rowIndex: number; key: EditKey };\n\nexport const COLUMN_ORDER: EditKey[] = [\n    \"name\",\n    \"bits\",\n    \"access\",\n    \"reset\",\n    \"description\",\n];\n\n// ---------------------------------------------------------------------------\n// Hook\n// ---------------------------------------------------------------------------\n\n/**\n * Manages editing state and operations for bit fields within a register.\n * Handles draft values, validation errors, active cell tracking,\n * and spatial insertion logic.\n *\n * @param fields   Normalised bit field array for the current register.\n * @param registerSize  Register width in bits (e.g. 32).\n * @param onUpdate Callback to commit a YAML path + value change.\n * @param isActive When false the keyboard handler is not installed.\n */\nexport function useFieldEditor(\n    fields: BitFieldRecord[],\n    registerSize: number,\n    onUpdate: YamlUpdateHandler,\n    isActive = true,\n) {\n    // ---- selection / hover ----\n    const [selectedFieldIndex, setSelectedFieldIndex] = useState<number>(-1);\n    const [hoveredFieldIndex, setHoveredFieldIndex] = useState<number | null>(\n        null,\n    );\n    const [selectedEditKey, setSelectedEditKey] = useState<EditKey>(\"name\");\n    const [activeCell, setActiveCell] = useState<ActiveCell>({\n        rowIndex: -1,\n        key: \"name\",\n    });\n\n    // ---- drafts ----\n    const [nameDrafts, setNameDrafts] = useState<Record<string, string>>({});\n    const [nameErrors, setNameErrors] = useState<Record<string, string | null>>(\n        {},\n    );\n    const [bitsDrafts, setBitsDrafts] = useState<Record<number, string>>({});\n    const [bitsErrors, setBitsErrors] = useState<Record<number, string | null>>(\n        {},\n    );\n    const [dragPreviewRanges, setDragPreviewRanges] = useState<\n        Record<number, [number, number]>\n    >({});\n    const [resetDrafts, setResetDrafts] = useState<Record<number, string>>({});\n    const [resetErrors, setResetErrors] = useState<Record<number, string | null>>(\n        {},\n    );\n\n    // ---- insert error ----\n    const [insertError, setInsertError] = useState<string | null>(null);\n\n    // ---- DOM refs ----\n    const focusRef = useRef<HTMLDivElement | null>(null);\n    const errorRef = useRef<HTMLDivElement | null>(null);\n\n    // ---------------------------------------------------------------------------\n    // Internal helpers\n    // ---------------------------------------------------------------------------\n\n    const refocusTableSoon = useCallback(() => {\n        window.setTimeout(() => {\n            focusRef.current?.focus();\n        }, 0);\n    }, []);\n\n    const focusFieldEditor = useCallback((rowIndex: number, key: EditKey) => {\n        window.setTimeout(() => {\n            const row = document.querySelector(`tr[data-field-index=\"${rowIndex}\"]`);\n            const el = row?.querySelector(\n                `[data-edit-key=\"${key}\"]`,\n            ) as HTMLElement | null;\n            try {\n                el?.focus();\n            } catch {\n                // ignore\n            }\n        }, 0);\n    }, []);\n\n    // ---------------------------------------------------------------------------\n    // Public helpers returned to consumers\n    // ---------------------------------------------------------------------------\n\n    /** Initialises drafts for row `index` if they haven't been set yet. */\n    const ensureDraftsInitialized = useCallback(\n        (index: number) => {\n            const field = fields[index];\n            if (!field) {\n                return;\n            }\n            const key = field.name ? `${field.name}` : `idx-${index}`;\n            setNameDrafts((prev) =>\n                prev[key] !== undefined ? prev : { ...prev, [key]: String(field.name ?? \"\") },\n            );\n            setBitsDrafts((prev) =>\n                prev[index] !== undefined ? prev : { ...prev, [index]: fieldToBitsString(field) },\n            );\n            setResetDrafts((prev) => {\n                if (prev[index] !== undefined) {\n                    return prev;\n                }\n                const v = field?.reset_value;\n                const display =\n                    v !== null && v !== undefined\n                        ? `0x${Number(v).toString(16).toUpperCase()}`\n                        : \"0x0\";\n                return { ...prev, [index]: display };\n            });\n        },\n        [fields],\n    );\n\n    /** Moves the currently selected field up (-1) or down (+1). */\n    const moveSelectedField = useCallback(\n        (delta: -1 | 1) => {\n            const index = selectedFieldIndex;\n            if (index < 0) {\n                return;\n            }\n            const next = index + delta;\n            if (next < 0 || next >= fields.length) {\n                return;\n            }\n            onUpdate([\"__op\", \"field-move\"], { index, delta });\n            setBitsDrafts({});\n            setBitsErrors({});\n            setNameDrafts({});\n            setNameErrors({});\n            setSelectedFieldIndex(next);\n            setHoveredFieldIndex(next);\n        },\n        [selectedFieldIndex, fields.length, onUpdate],\n    );\n\n    // ---------------------------------------------------------------------------\n    // Clamp selection when the register changes\n    // ---------------------------------------------------------------------------\n    useEffect(() => {\n        if (!isActive) {\n            setSelectedFieldIndex(-1);\n            setActiveCell({ rowIndex: -1, key: \"name\" });\n            return;\n        }\n        if (!fields.length) {\n            setSelectedFieldIndex(-1);\n            setActiveCell({ rowIndex: -1, key: \"name\" });\n            return;\n        }\n        setSelectedFieldIndex((prev) => {\n            if (prev < 0) {\n                return 0;\n            }\n            if (prev >= fields.length) {\n                return fields.length - 1;\n            }\n            return prev;\n        });\n        setActiveCell((prev) => {\n            const rowIndex =\n                prev.rowIndex < 0 ? 0 : Math.min(fields.length - 1, prev.rowIndex);\n            const key = COLUMN_ORDER.includes(prev.key) ? prev.key : \"name\";\n            return { rowIndex, key };\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isActive, fields.length]);\n\n    // ---------------------------------------------------------------------------\n    // Keyboard shortcuts (o/O insert, arrow nav, F2/e edit, d delete)\n    // ---------------------------------------------------------------------------\n    useEffect(() => {\n        if (!isActive) {\n            return;\n        }\n\n        const tryInsertField = (after: boolean) => {\n            setInsertError(null);\n            // BitFieldRecord is structurally compatible with BitFieldRuntimeDef at runtime\n            const typedFields = fields as unknown as BitFieldRuntimeDef[];\n            const result = after\n                ? SpatialInsertionService.insertFieldAfter(typedFields, selectedFieldIndex, registerSize)\n                : SpatialInsertionService.insertFieldBefore(typedFields, selectedFieldIndex, registerSize);\n\n            if (result.error) {\n                setInsertError(result.error);\n                window.setTimeout(\n                    () =>\n                        errorRef.current?.scrollIntoView({\n                            block: \"nearest\",\n                            behavior: \"smooth\",\n                        }),\n                    0,\n                );\n                return;\n            }\n\n            const newIndex = result.newIndex;\n            onUpdate([\"fields\"], result.items);\n            setSelectedFieldIndex(newIndex);\n            setHoveredFieldIndex(newIndex);\n            setActiveCell({ rowIndex: newIndex, key: \"name\" });\n            setBitsDrafts({});\n            setBitsErrors({});\n            setNameDrafts({});\n            setNameErrors({});\n            window.setTimeout(() => {\n                document\n                    .querySelector(`tr[data-field-index=\"${newIndex}\"]`)\n                    ?.scrollIntoView({ block: \"center\" });\n            }, 100);\n        };\n\n        const onKeyDown = (e: KeyboardEvent) => {\n            let keyLower = (e.key || \"\").toLowerCase();\n            if (e.altKey && e.code) {\n                if (e.code === \"KeyH\") {keyLower = \"h\";}\n                if (e.code === \"KeyJ\") {keyLower = \"j\";}\n                if (e.code === \"KeyK\") {keyLower = \"k\";}\n                if (e.code === \"KeyL\") {keyLower = \"l\";}\n            }\n            const vimToArrow: Record<\n                string,\n                \"ArrowLeft\" | \"ArrowDown\" | \"ArrowUp\" | \"ArrowRight\"\n            > = { h: \"ArrowLeft\", j: \"ArrowDown\", k: \"ArrowUp\", l: \"ArrowRight\" };\n            const mappedArrow = vimToArrow[keyLower];\n            const normalizedKey: string = mappedArrow ?? e.key;\n\n            const isArrow =\n                normalizedKey === \"ArrowUp\" ||\n                normalizedKey === \"ArrowDown\" ||\n                normalizedKey === \"ArrowLeft\" ||\n                normalizedKey === \"ArrowRight\";\n            const isEdit = normalizedKey === \"F2\" || keyLower === \"e\";\n            const isDelete = keyLower === \"d\" || e.key === \"Delete\";\n            const isInsertAfter = keyLower === \"o\" && !e.shiftKey;\n            const isInsertBefore = keyLower === \"o\" && e.shiftKey;\n\n            if (\n                !isArrow &&\n                !isEdit &&\n                !isDelete &&\n                !isInsertAfter &&\n                !isInsertBefore\n            ) {\n                return;\n            }\n            if (e.ctrlKey || e.metaKey) {\n                return;\n            }\n\n            const activeEl = document.activeElement as HTMLElement | null;\n            const isInFieldsArea =\n                !!focusRef.current &&\n                !!activeEl &&\n                (activeEl === focusRef.current ||\n                    focusRef.current.contains(activeEl));\n            if (!isInFieldsArea) {\n                return;\n            }\n\n            const target = e.target as HTMLElement | null;\n            const isInDropdown = !!target?.closest(\"vscode-dropdown\");\n            const isTypingTarget = !!target?.closest(\n                'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area',\n            );\n            if (isTypingTarget) {\n                return;\n            }\n            if (isInDropdown && !keyLower.match(/^[hjkl]$/)) {\n                return;\n            }\n\n            const scrollToCell = (rowIndex: number, key: EditKey) => {\n                window.setTimeout(() => {\n                    const row = document.querySelector(\n                        `tr[data-field-index=\"${rowIndex}\"]`,\n                    );\n                    row?.scrollIntoView({\n                        block: rowIndex === 0 ? \"center\" : \"nearest\",\n                    });\n                    const cell = row?.querySelector(\n                        `td[data-col-key=\"${key}\"]`,\n                    ) as HTMLElement | null;\n                    cell?.scrollIntoView({ block: \"nearest\", inline: \"nearest\" });\n                }, 0);\n            };\n\n            const currentRow =\n                activeCell.rowIndex >= 0\n                    ? activeCell.rowIndex\n                    : selectedFieldIndex >= 0\n                        ? selectedFieldIndex\n                        : 0;\n            const currentKey: EditKey = COLUMN_ORDER.includes(activeCell.key)\n                ? activeCell.key\n                : selectedEditKey;\n\n            if (isEdit) {\n                if (currentRow < 0 || currentRow >= fields.length) {\n                    return;\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                setSelectedFieldIndex(currentRow);\n                setHoveredFieldIndex(currentRow);\n                setSelectedEditKey(currentKey);\n                setActiveCell({ rowIndex: currentRow, key: currentKey });\n                focusFieldEditor(currentRow, currentKey);\n                return;\n            }\n\n            if (isInsertAfter || isInsertBefore) {\n                e.preventDefault();\n                e.stopPropagation();\n                tryInsertField(isInsertAfter);\n                return;\n            }\n\n            if (isDelete) {\n                if (currentRow < 0 || currentRow >= fields.length) {\n                    return;\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                const newFields = fields.filter((_, index) => index !== currentRow);\n                onUpdate([\"fields\"], newFields);\n                const nextRow =\n                    currentRow > 0 ? currentRow - 1 : newFields.length > 0 ? 0 : -1;\n                setSelectedFieldIndex(nextRow);\n                setHoveredFieldIndex(nextRow);\n                setActiveCell({ rowIndex: nextRow, key: currentKey });\n                setBitsDrafts({});\n                setBitsErrors({});\n                setNameDrafts({});\n                setNameErrors({});\n                return;\n            }\n\n            const isVertical =\n                normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowDown\";\n            const delta =\n                normalizedKey === \"ArrowUp\" || normalizedKey === \"ArrowLeft\" ? -1 : 1;\n\n            if (e.altKey && isVertical) {\n                if (selectedFieldIndex < 0) {\n                    return;\n                }\n                const next = selectedFieldIndex + delta;\n                if (next < 0 || next >= fields.length) {\n                    return;\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                onUpdate([\"__op\", \"field-move\"], { index: selectedFieldIndex, delta });\n                setBitsDrafts({});\n                setBitsErrors({});\n                setNameDrafts({});\n                setNameErrors({});\n                setSelectedFieldIndex(next);\n                setHoveredFieldIndex(next);\n                setActiveCell((prev) => ({ rowIndex: next, key: prev.key }));\n                scrollToCell(next, currentKey);\n                return;\n            }\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (isVertical) {\n                const nextRow = Math.max(\n                    0,\n                    Math.min(fields.length - 1, currentRow + delta),\n                );\n                setSelectedFieldIndex(nextRow);\n                setHoveredFieldIndex(nextRow);\n                setSelectedEditKey(currentKey);\n                setActiveCell({ rowIndex: nextRow, key: currentKey });\n                scrollToCell(nextRow, currentKey);\n                return;\n            }\n\n            const currentCol = Math.max(0, COLUMN_ORDER.indexOf(currentKey));\n            const nextCol = Math.max(\n                0,\n                Math.min(COLUMN_ORDER.length - 1, currentCol + delta),\n            );\n            const nextKey = COLUMN_ORDER[nextCol] ?? \"name\";\n            setSelectedFieldIndex(currentRow);\n            setHoveredFieldIndex(currentRow);\n            setSelectedEditKey(nextKey);\n            setActiveCell({ rowIndex: currentRow, key: nextKey });\n            scrollToCell(currentRow, nextKey);\n        };\n\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        isActive,\n        fields.length,\n        selectedFieldIndex,\n        selectedEditKey,\n        activeCell,\n        onUpdate,\n        registerSize,\n    ]);\n\n    // ---------------------------------------------------------------------------\n    // Escape: return focus from inline editor back to the table container\n    // ---------------------------------------------------------------------------\n    useEffect(() => {\n        if (!isActive) {\n            return;\n        }\n        const onKeyDown = (e: KeyboardEvent) => {\n            if (e.key !== \"Escape\") {\n                return;\n            }\n            const activeEl = document.activeElement as HTMLElement | null;\n            if (!activeEl) {\n                return;\n            }\n            const inFields =\n                !!focusRef.current &&\n                focusRef.current.contains(activeEl) &&\n                activeEl !== focusRef.current;\n            if (!inFields) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            try {\n                (activeEl as any).blur?.();\n            } catch {\n                // ignore\n            }\n            refocusTableSoon();\n        };\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [isActive, refocusTableSoon]);\n\n    return {\n        // selection / hover\n        selectedFieldIndex,\n        setSelectedFieldIndex,\n        hoveredFieldIndex,\n        setHoveredFieldIndex,\n        selectedEditKey,\n        setSelectedEditKey,\n        activeCell,\n        setActiveCell,\n        // drafts\n        nameDrafts,\n        setNameDrafts,\n        nameErrors,\n        setNameErrors,\n        bitsDrafts,\n        setBitsDrafts,\n        bitsErrors,\n        setBitsErrors,\n        dragPreviewRanges,\n        setDragPreviewRanges,\n        resetDrafts,\n        setResetDrafts,\n        resetErrors,\n        setResetErrors,\n        // insert error\n        insertError,\n        setInsertError,\n        // refs\n        focusRef,\n        errorRef,\n        // helpers\n        ensureDraftsInitialized,\n        moveSelectedField,\n        focusFieldEditor,\n        refocusTableSoon,\n    };\n}\n\n/** Return type of {@link useFieldEditor}. */\nexport type FieldEditorState = ReturnType<typeof useFieldEditor>;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/hooks/useMemoryMapState.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\nimport type { MemoryMap } from '../types/memoryMap';\nimport { YamlService } from '../services/YamlService';\nimport { DataNormalizer } from '../services/DataNormalizer';\n\n/**\n * Hook for managing memory map state including YAML parsing and normalization\n */\nexport function useMemoryMapState() {\n  const [memoryMap, setMemoryMap] = useState<MemoryMap | null>(null);\n  const [rawText, setRawText] = useState<string>('');\n  const [parseError, setParseError] = useState<string | null>(null);\n  const [fileName, setFileName] = useState<string>('');\n\n  // Use refs for values that need to be accessed in callbacks\n  const rawTextRef = useRef<string>('');\n\n  /**\n   * Update the memory map from YAML text\n   */\n  const updateFromYaml = (text: string, filename?: string) => {\n    rawTextRef.current = text;\n    setRawText(text);\n\n    if (filename) {\n      setFileName(filename);\n    }\n\n    try {\n      const parsed = YamlService.parse(text) as Record<string, unknown> | unknown[];\n\n      // Handle different YAML structures (same as original code)\n      let map: unknown;\n      if (Array.isArray(parsed)) {\n        map = parsed[0];\n      } else if ((parsed ).memory_maps) {\n        map = ((parsed ).memory_maps as unknown[])[0];\n      } else {\n        map = parsed;\n      }\n\n      const normalized = DataNormalizer.normalizeMemoryMap(map);\n      setMemoryMap(normalized);\n      setParseError(null);\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      setParseError(message);\n      setMemoryMap(null);\n    }\n  };\n\n  /**\n   * Update the raw YAML text (for programmatic updates)\n   */\n  const updateRawText = (text: string) => {\n    rawTextRef.current = text;\n    setRawText(text);\n\n    // Try to update memory map as well\n    try {\n      const parsed = YamlService.parse(text) as Record<string, unknown> | unknown[];\n\n      // Handle different YAML structures\n      let map: unknown;\n      if (Array.isArray(parsed)) {\n        map = parsed[0];\n      } else if ((parsed ).memory_maps) {\n        map = ((parsed ).memory_maps as unknown[])[0];\n      } else {\n        map = parsed;\n      }\n\n      const normalized = DataNormalizer.normalizeMemoryMap(map);\n      setMemoryMap(normalized);\n      setParseError(null);\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      setParseError(message);\n    }\n  };\n\n  return {\n    memoryMap,\n    rawText,\n    rawTextRef,\n    parseError,\n    fileName,\n    updateFromYaml,\n    updateRawText,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/hooks/useSelection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/hooks/useTableNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/hooks/useYamlSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `VsCodeApi | undefined`.","line":50,"column":51,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":50,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":53,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":53,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":53,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":53,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setActiveTab' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":57,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .registers on an `any` value.","line":119,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":119,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3338,3341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3338,3341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":129,"column":21,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":129,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3701,3704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3701,3704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":148,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":148,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":148,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4410,4413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4410,4413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__kind on an `any` value.","line":168,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":168,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":168,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5220,5223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5220,5223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":372,"column":14,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":372,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":642,"column":21,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":642,"endColumn":60,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[22136,22175],"text":"!memoryMap?.address_blocks"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport type { ReactNode, ErrorInfo } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport Outline, { type OutlineHandle } from \"./components/Outline\";\nimport DetailsPanel, {\n  type DetailsPanelHandle,\n} from \"./components/DetailsPanel\";\nimport { vscode } from \"./vscode\";\nimport { useMemoryMapState } from \"./hooks/useMemoryMapState\";\nimport { useSelection, type Selection } from \"./hooks/useSelection\";\nimport { useYamlSync } from \"./hooks/useYamlSync\";\nimport { YamlPathResolver, type YamlPath } from \"./services/YamlPathResolver\";\nimport { YamlService } from \"./services/YamlService\";\nimport type {\n  NormalizedRegister,\n  NormalizedRegisterArray,\n} from \"./services/DataNormalizer\";\nimport { BitFieldUtils } from \"./utils/BitFieldUtils\";\nimport \"./index.css\";\n\n/**\n * Main application component\n */\nconst App = () => {\n  // Sidebar toggle state for mobile\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  // State management hooks\n  const {\n    memoryMap,\n    rawText,\n    rawTextRef,\n    parseError,\n    fileName,\n    updateFromYaml,\n    updateRawText,\n  } = useMemoryMapState();\n  const {\n    selectedId,\n    selectedType,\n    selectedObject,\n    breadcrumbs,\n    selectionMeta,\n    selectionRef,\n    handleSelect,\n    goBack,\n  } = useSelection();\n\n  // VSCode sync hook\n  const { sendUpdate, sendCommand } = useYamlSync(vscode, updateFromYaml);\n\n  useEffect(() => {\n    vscode?.postMessage({ type: \"ready\" });\n  }, []);\n\n  // Local state\n  const [activeTab, setActiveTab] = useState<\"properties\" | \"yaml\">(\n    \"properties\",\n  );\n  const didInitSelectionRef = useRef(false);\n  const outlineRef = useRef<OutlineHandle | null>(null);\n  const detailsRef = useRef<DetailsPanelHandle | null>(null);\n\n  // Mouse back button listener for navigation history\n  useEffect(() => {\n    const handleMouseDown = (e: MouseEvent) => {\n      // Mouse button 3 = back button, button 4 = forward button\n      if (e.button === 3) {\n        e.preventDefault();\n        goBack();\n      }\n    };\n\n    window.addEventListener(\"mousedown\", handleMouseDown);\n    return () => window.removeEventListener(\"mousedown\", handleMouseDown);\n  }, [goBack]);\n\n  /**\n   * Resolve selection from the current memory map after updates\n   */\n  const resolveFromSelection = useCallback(\n    (\n      selection: Selection | null,\n    ): {\n      type: Selection[\"type\"];\n      object: unknown;\n      breadcrumbs: string[];\n    } | null => {\n      if (!selection || !memoryMap) {\n        return null;\n      }\n\n      if (selection.type === \"memoryMap\") {\n        return {\n          type: \"memoryMap\",\n          object: memoryMap,\n          breadcrumbs: [memoryMap.name || \"Memory Map\"],\n        };\n      }\n\n      // Selection paths are YAML-style: ['addressBlocks', blockIndex, ...]\n      const blockIndex = typeof selection.path[1] === \"number\" ? selection.path[1] : null;\n      if (blockIndex === null) {\n        return null;\n      }\n      const block = memoryMap.address_blocks?.[blockIndex];\n      if (!block) {\n        return null;\n      }\n\n      if (selection.type === \"block\") {\n        return {\n          type: \"block\",\n          object: block,\n          breadcrumbs: [memoryMap.name || \"Memory Map\", block.name],\n        };\n      }\n\n      const blockRegs = ((block as any).registers ?? []) as Array<\n        NormalizedRegister | NormalizedRegisterArray\n      >;\n\n      if (selection.type === \"array\") {\n        const regIndex = typeof selection.path[3] === \"number\" ? selection.path[3] : null;\n        if (regIndex === null) {\n          return null;\n        }\n        const node = blockRegs[regIndex];\n        if (node && (node as any).__kind === \"array\") {\n          const registerArray = node as NormalizedRegisterArray;\n          return {\n            type: \"array\",\n            object: registerArray,\n            breadcrumbs: [memoryMap.name || \"Memory Map\", block.name, registerArray.name],\n          };\n        }\n        return null;\n      }\n\n      if (selection.type === \"register\") {\n        // Direct register: ['addressBlocks', b, 'registers', r]\n        if (selection.path.length === 4) {\n          const regIndex = typeof selection.path[3] === \"number\" ? selection.path[3] : null;\n          if (regIndex === null) {\n            return null;\n          }\n          const node = blockRegs[regIndex];\n          if (!node || (node as any).__kind === \"array\") {\n            return null;\n          }\n          const reg = node as NormalizedRegister;\n          return {\n            type: \"register\",\n            object: reg,\n            breadcrumbs: [memoryMap.name || \"Memory Map\", block.name, reg.name],\n          };\n        }\n\n        // Nested register inside array: ['addressBlocks', b, 'registers', r, 'registers', rr]\n        if (selection.path.length === 6) {\n          const arrayIndex = typeof selection.path[3] === \"number\" ? selection.path[3] : null;\n          const nestedIndex =\n            typeof selection.path[5] === \"number\" ? selection.path[5] : null;\n          if (arrayIndex === null || nestedIndex === null) {\n            return null;\n          }\n          const node = blockRegs[arrayIndex];\n          if (!node || (node as any).__kind !== \"array\") {\n            return null;\n          }\n          const registerArray = node as NormalizedRegisterArray;\n          const reg = registerArray.registers?.[nestedIndex];\n          if (!reg) {\n            return null;\n          }\n          return {\n            type: \"register\",\n            object: reg,\n            breadcrumbs: [\n              memoryMap.name || \"Memory Map\",\n              block.name,\n              registerArray.name,\n              reg.name,\n            ],\n          };\n        }\n\n        return null;\n      }\n\n      return null;\n    },\n    [memoryMap],\n  );\n\n  /**\n   * Handle updates from DetailsPanel\n   */\n  const handleUpdate = useCallback(\n    (path: YamlPath, value: unknown) => {\n      const selection = selectionRef.current;\n      if (!selection) {\n        return;\n      }\n\n      const currentText = rawTextRef.current;\n      const rootObj = YamlService.safeParse(currentText);\n      if (!rootObj) {\n        console.warn(\"Cannot apply update: YAML parse failed\");\n        return;\n      }\n\n      const { root, selectionRootPath } = YamlPathResolver.getMapRootInfo(rootObj);\n\n      // Handle field operations\n      if (path[0] === \"__op\" && selection.type === \"register\") {\n        handleFieldOperations(path, value, root, selectionRootPath, selection);\n        const newText = YamlService.dump(root);\n        updateRawText(newText);\n        sendUpdate(newText);\n        return;\n      }\n\n      // Handle regular property updates\n      const fullPath: YamlPath = [...selectionRootPath, ...selection.path, ...path];\n      try {\n        YamlPathResolver.setAtPath(root, fullPath, value);\n        const newText = YamlService.dump(root);\n        updateRawText(newText);\n        sendUpdate(newText);\n      } catch (err) {\n        console.warn(\"Failed to apply update:\", err);\n      }\n    },\n    [sendUpdate, updateRawText],\n  );\n\n  /**\n   * Handle field add/delete/move operations\n   * NOTE: This is a simplified version - full implementation would be in a separate service\n   */\n  const handleFieldOperations = (\n    path: YamlPath,\n    value: unknown,\n    root: unknown,\n    selectionRootPath: YamlPath,\n    selection: Selection,\n  ) => {\n    const operationType = String(path[1] ?? \"\");\n    const payload = (value ?? {}) as Record<string, unknown>;\n    const registerYamlPath: YamlPath = [...selectionRootPath, ...selection.path];\n    const fieldsPath: YamlPath = [...registerYamlPath, \"fields\"];\n    const current = YamlPathResolver.getAtPath(root, fieldsPath);\n    if (!Array.isArray(current)) {\n      YamlPathResolver.setAtPath(root, fieldsPath, []);\n    }\n    const fieldsArr = (YamlPathResolver.getAtPath(root, fieldsPath) ??\n      []) as Record<string, unknown>[];\n    if (!Array.isArray(fieldsArr)) {\n      return;\n    }\n\n    if (operationType === \"field-add\") {\n      const afterIndex =\n        typeof payload.afterIndex === \"number\" ? payload.afterIndex : -1;\n      const insertIndex = Math.max(\n        0,\n        Math.min(fieldsArr.length, afterIndex + 1),\n      );\n      const currentFields = ((selection.object as Record<string, unknown>)?.fields as unknown[]) ?? [];\n      const used = new Set<number>();\n      for (const field of currentFields) {\n        const o = Number((field as Record<string, unknown>)?.bit_offset ?? 0);\n        const w = Number((field as Record<string, unknown>)?.bit_width ?? 1);\n        for (let b = o; b < o + w; b++) {\n          used.add(b);\n        }\n      }\n      let lsb = 0;\n      while (used.has(lsb) && lsb < 32) {\n        lsb++;\n      }\n      const bits = `[${lsb}:${lsb}]`;\n\n      fieldsArr.splice(insertIndex, 0, {\n        name: payload.name ?? \"NEW_FIELD\",\n        bits,\n        access: payload.access ?? \"read-write\",\n        description: payload.description ?? \"\",\n      });\n    }\n\n    if (operationType === \"field-delete\") {\n      const index = typeof payload.index === \"number\" ? payload.index : -1;\n      if (index >= 0 && index < fieldsArr.length) {\n        fieldsArr.splice(index, 1);\n      }\n    }\n\n    if (operationType === \"field-move\") {\n      const index = typeof payload.index === \"number\" ? payload.index : -1;\n      const delta = typeof payload.delta === \"number\" ? payload.delta : 0;\n      const next = index + delta;\n      if (\n        index >= 0 &&\n        next >= 0 &&\n        index < fieldsArr.length &&\n        next < fieldsArr.length\n      ) {\n        // Swap fields in array\n        const tmp = fieldsArr[index];\n        fieldsArr[index] = fieldsArr[next];\n        fieldsArr[next] = tmp;\n\n        // Recalculate bit offsets for ALL fields after swapping\n        // Important: Create clean field objects to avoid modifying shared references\n        let offset = 0;\n        for (let i = 0; i < fieldsArr.length; i++) {\n          const field = fieldsArr[i];\n\n          // Parse width from bits string (primary source of truth in YAML)\n          let width = 1; // default\n          if (typeof field?.bits === \"string\") {\n            const parsed = BitFieldUtils.parseBitsLike(field.bits);\n            if (parsed && parsed.bit_width > 0) {\n              width = parsed.bit_width;\n            }\n          }\n          // Fall back to bit_width property if bits is not available\n          else if (Number.isFinite(field?.bit_width as number) && (field.bit_width as number) > 0) {\n            width = Number(field.bit_width);\n          }\n          width = Math.max(1, Math.min(32, Math.trunc(width)));\n\n          // Replace field with clean object containing only YAML-persisted properties\n          fieldsArr[i] = {\n            name: field.name,\n            bits: BitFieldUtils.formatBitsLike(offset, width),\n            access: field.access,\n            reset_value: field.reset_value,\n            description: field.description,\n            enumerated_values: field.enumerated_values,\n          };\n\n          offset += width;\n        }\n      }\n    }\n  };\n\n  /**\n   * Auto-select root on first load and maintain selection after updates\n   */\n  useEffect(() => {\n    if (!memoryMap) {\n      return;\n    }\n\n    if (!didInitSelectionRef.current) {\n      handleSelect({\n        id: \"root\",\n        type: \"memoryMap\",\n        object: memoryMap,\n        breadcrumbs: [memoryMap.name || \"Memory Map\"],\n        path: [],\n      });\n      didInitSelectionRef.current = true;\n    } else {\n      const resolved = resolveFromSelection(selectionRef.current);\n      if (resolved) {\n        handleSelect({\n          ...selectionRef.current!,\n          type: resolved.type,\n          object: resolved.object,\n          breadcrumbs: resolved.breadcrumbs,\n        });\n      }\n    }\n  }, [memoryMap, handleSelect, resolveFromSelection]);\n\n  /**\n   * Keyboard navigation (Ctrl+H for outline, Ctrl+L for details)\n   */\n  useEffect(() => {\n    const onKeyDown = (e: KeyboardEvent) => {\n      const keyLower = (e.key || \"\").toLowerCase();\n      if (!e.ctrlKey || e.metaKey || e.altKey) {\n        return;\n      }\n      if (keyLower !== \"h\" && keyLower !== \"l\") {\n        return;\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (keyLower === \"h\") {\n        outlineRef.current?.focus();\n        return;\n      }\n      if (keyLower === \"l\") {\n        detailsRef.current?.focus();\n        return;\n      }\n    };\n    window.addEventListener(\"keydown\", onKeyDown);\n    return () => window.removeEventListener(\"keydown\", onKeyDown);\n  }, []);\n\n  /**\n   * Render error state\n   */\n  if (parseError) {\n    return (\n      <div className=\"flex items-center justify-center h-screen vscode-surface\">\n        <div className=\"text-center p-8\">\n          <span className=\"codicon codicon-error text-6xl mb-4 block opacity-50\"></span>\n          <h2 className=\"text-xl font-semibold mb-2\">Parse Error</h2>\n          <p className=\"text-sm opacity-75\">{parseError}</p>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Render loading state\n   */\n  if (!memoryMap) {\n    return (\n      <div className=\"flex items-center justify-center h-screen vscode-surface\">\n        <div className=\"text-center\">\n          <span className=\"codicon codicon-loading codicon-modifier-spin text-4xl opacity-50\"></span>\n          <p className=\"mt-4 text-sm opacity-75\">Loading memory map...</p>\n        </div>\n      </div>\n    );\n  }\n\n  /**\n   * Main UI\n   */\n  return (\n    <>\n      <header\n        className=\"flex items-center justify-between px-6 py-3 shrink-0\"\n        style={{ borderBottom: \"1px solid var(--vscode-panel-border)\" }}\n      >\n        <div className=\"flex items-center gap-4 flex-1 overflow-hidden\">\n          {/* Mobile sidebar toggle */}\n          <button\n            className=\"sidebar-toggle-btn p-2 rounded-md transition-colors vscode-icon-button\"\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            title=\"Toggle sidebar\"\n          >\n            <span className=\"codicon codicon-menu\"></span>\n          </button>\n          <h1 className=\"text-lg font-semibold shrink-0\">\n            FPGA Memory Map Editor\n          </h1>\n          <div className=\"flex items-center gap-1 text-sm opacity-75 overflow-hidden\">\n            <span className=\"codicon codicon-file text-[16px]\"></span>\n            <span className=\"truncate\">{fileName || \"Untitled\"}</span>\n            {breadcrumbs.length > 1 && (\n              <>\n                <span className=\"codicon codicon-chevron-right text-[16px]\"></span>\n                <span\n                  className=\"font-medium px-2 py-0.5 rounded vscode-surface-alt\"\n                  style={{ border: \"1px solid var(--vscode-panel-border)\" }}\n                >\n                  {breadcrumbs[breadcrumbs.length - 1]}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            className=\"p-2 rounded-md transition-colors vscode-icon-button\"\n            onClick={() => sendCommand(\"save\")}\n            title=\"Save\"\n          >\n            <span className=\"codicon codicon-save\"></span>\n          </button>\n          <button\n            className=\"p-2 rounded-md transition-colors vscode-icon-button\"\n            onClick={() => sendCommand(\"validate\")}\n            title=\"Validate\"\n          >\n            <span className=\"codicon codicon-check\"></span>\n          </button>\n          <div\n            className=\"h-6 w-px mx-1\"\n            style={{ background: \"var(--vscode-panel-border)\" }}\n          ></div>\n          <button\n            className=\"p-2 rounded-md transition-colors vscode-icon-button\"\n            title=\"Export Header\"\n          >\n            <span className=\"codicon codicon-code\"></span>\n          </button>\n          <button\n            className=\"p-2 rounded-md transition-colors vscode-icon-button\"\n            title=\"Documentation\"\n          >\n            <span className=\"codicon codicon-book\"></span>\n          </button>\n        </div>\n      </header>\n      <main className=\"flex-1 flex overflow-hidden\">\n        {/* Sidebar backdrop for mobile */}\n        {sidebarOpen && (\n          <div\n            className=\"sidebar-backdrop active\"\n            onClick={() => setSidebarOpen(false)}\n          />\n        )}\n        <aside\n          className={`sidebar flex flex-col shrink-0 overflow-y-auto ${sidebarOpen ? \"sidebar-open\" : \"\"}`}\n        >\n          <Outline\n            ref={outlineRef}\n            memoryMap={memoryMap}\n            selectedId={selectedId}\n            onSelect={handleSelect}\n            onRename={(path, newName) => {\n              // path is already the full path to the 'name' property\n              // e.g., ['addressBlocks', 0, 'name'] for a block\n              const currentText = rawTextRef.current;\n              const rootObj = YamlService.safeParse(currentText);\n              if (!rootObj) {\n                console.warn(\"Cannot apply rename: YAML parse failed\");\n                return;\n              }\n              const { root, selectionRootPath } =\n                YamlPathResolver.getMapRootInfo(rootObj);\n              const fullPath = [...selectionRootPath, ...path];\n              try {\n                YamlPathResolver.setAtPath(root, fullPath, newName);\n                const newText = YamlService.dump(root);\n                updateRawText(newText);\n                sendUpdate(newText);\n              } catch (err) {\n                console.warn(\"Failed to apply rename:\", err);\n              }\n            }}\n          />\n        </aside>\n        {activeTab === \"yaml\" ? (\n          <section className=\"flex-1 vscode-surface overflow-auto min-w-0\">\n            <div className=\"p-6\">\n              <pre className=\"font-mono text-sm\">{rawText}</pre>\n            </div>\n          </section>\n        ) : (\n          <section className=\"flex-1 overflow-hidden min-w-0\">\n            <DetailsPanel\n              ref={detailsRef}\n              selectedType={selectedType}\n              selectedObject={selectedObject}\n              selectionMeta={selectionMeta}\n              onUpdate={handleUpdate}\n              onNavigateToRegister={(regIndex) => {\n                // Navigate to register in Outline when clicking on visualizer\n                if (!memoryMap || !selectionRef.current) {\n                  return;\n                }\n\n                // CASE 1: Block View (Direct registers/arrays)\n                if (selectionRef.current.type === \"block\") {\n                  const currentPath = selectionRef.current.path || [];\n                  const block = selectedObject as Record<string, unknown>;\n                  const registers = (block?.registers as unknown[]) || [];\n                  const reg = registers[regIndex] as Record<string, unknown>;\n                  if (!reg) {return;}\n\n                  // Determine if it's an array or register\n                  const isArray = reg.__kind === \"array\";\n                  const newPath = [...currentPath, \"registers\", regIndex];\n\n                  // Outline uses different ID schemes for arrays vs registers\n                  const idSuffix = isArray\n                    ? `-arrreg-${regIndex}`\n                    : `-reg-${regIndex}`;\n\n                  handleSelect({\n                    id: `${selectionRef.current.id}${idSuffix}`,\n                    type: isArray ? \"array\" : \"register\",\n                    object: reg,\n                    breadcrumbs: [\n                      ...(selectionRef.current.breadcrumbs || []),\n                      String(reg.name ?? `Register ${regIndex}`),\n                    ],\n                    path: newPath,\n                    // Block children (top-level) absolute address is calculated in Outline, but we can approximate or omit if Outline recalculates?\n                    // Usually safe to omit if DetailsPanel Recalcs or if Outline pass provides it.\n                    // For consistency, let's leave meta undefined (or copy from existing logic which didn't set it? Existing logic DID NOT set meta).\n                  });\n                  return;\n                }\n\n                // CASE 2: Array Element View (Nested registers)\n                // When masquerading as a Block for an Array Element, clicking a register should select the template register in the Outline under that element.\n                if (selectionRef.current.type === \"array\") {\n                  const arr = selectedObject as Record<string, unknown>; // NormalizedRegisterArray with meta\n                  const registers = (arr.registers as unknown[]) || [];\n                  const reg = registers[regIndex] as Record<string, unknown>;\n                  if (!reg) {return;}\n\n                  // Path logic verified from Outline.tsx: [...arrayPath, 'registers', childIndex]\n                  const newPath = [\n                    ...(selectionRef.current.path || []),\n                    \"registers\",\n                    regIndex,\n                  ];\n\n                  // ID suffix logic verified from Outline.tsx: `${elementId}-reg-${childIndex}`\n                  const id = `${selectionRef.current.id}-reg-${regIndex}`;\n\n                  // Calculate absolute address for the specific child\n                  const elementBase = (arr.__element_base as number) ?? 0;\n                  const absoluteAddr = elementBase + ((reg.address_offset as number) ?? 0);\n\n                  handleSelect({\n                    id,\n                    type: \"register\",\n                    object: reg,\n                    breadcrumbs: [\n                      ...(selectionRef.current.breadcrumbs || []),\n                      String(reg.name ?? `Register ${regIndex}`),\n                    ],\n                    path: newPath,\n                    meta: {\n                      absoluteAddress: absoluteAddr,\n                      relativeOffset: (reg.address_offset as number) ?? 0,\n                    },\n                  });\n                  return;\n                }\n              }}\n              onNavigateToBlock={(blockIndex) => {\n                // Navigate to address block in Outline\n                if (!memoryMap || !memoryMap.address_blocks) {return;}\n                const block = memoryMap.address_blocks[blockIndex];\n                if (!block) {return;}\n\n                handleSelect({\n                  id: `block-${blockIndex}`,\n                  type: \"block\",\n                  object: block,\n                  breadcrumbs: [\n                    memoryMap.name || \"Memory Map\",\n                    block.name || `Block ${blockIndex}`,\n                  ],\n                  path: [\"addressBlocks\", blockIndex],\n                });\n              }}\n            />\n          </section>\n        )}\n      </main>\n    </>\n  );\n};\n\n/**\n * Error boundary for catching React errors\n */\nclass ErrorBoundary extends React.Component<\n  { children: ReactNode },\n  { error: unknown; info: unknown }\n> {\n  constructor(props: { children: ReactNode }) {\n    super(props);\n    this.state = { error: null, info: null };\n  }\n  static getDerivedStateFromError(error: unknown) {\n    return { error, info: null };\n  }\n  componentDidCatch(error: unknown, info: ErrorInfo) {\n    this.setState({ error, info });\n  }\n  render() {\n    if (this.state.error) {\n      return (\n        <div\n          style={{\n            background: \"#fff0f0\",\n            color: \"#b91c1c\",\n            padding: 32,\n            fontFamily: \"monospace\",\n          }}\n        >\n          <h2 style={{ fontWeight: \"bold\" }}>UI Error</h2>\n          <div>{(this.state.error as Error)?.message || String(this.state.error)}</div>\n          {!!this.state.info && (\n            <pre style={{ marginTop: 16, fontSize: 12 }}>\n              {(this.state.info as { componentStack?: string })?.componentStack}\n            </pre>\n          )}\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\n/**\n * Application bootstrap\n */\nconst rootElement = document.getElementById(\"root\");\nif (rootElement) {\n  const root = createRoot(rootElement);\n  root.render(\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>,\n  );\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/IpCoreApp.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":17,"column":5,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":17,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'sendUpdate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":81,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":88,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":88,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":90,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":90,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":92,"column":26,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":92,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .text on an `any` value.","line":92,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":92,"column":40,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":92,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .fileName on an `any` value.","line":92,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .imports on an `any` value.","line":92,"column":58,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":131,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":131,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":133,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":133,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":133,"column":41,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":133,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":134,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":134,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":194,"column":23,"nodeType":"ObjectExpression","messageId":"anyAssignment","endLine":194,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":202,"column":23,"nodeType":"Identifier","messageId":"anyAssignment","endLine":202,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { NavigationSidebar } from \"./components/layout/NavigationSidebar\";\nimport { EditorPanel } from \"./components/layout/EditorPanel\";\nimport { useIpCoreState } from \"./hooks/useIpCoreState\";\nimport { useNavigation } from \"./hooks/useNavigation\";\nimport { useIpCoreSync } from \"./hooks/useIpCoreSync\";\nimport { vscode } from \"../vscode\";\n\nexport type FocusedPanel = \"left\" | \"right\";\n\n/**\n * Main IP Core Visual Editor application\n */\nconst IpCoreApp: React.FC = () => {\n  const {\n    ipCore,\n    rawYaml,\n    parseError,\n    fileName,\n    imports,\n    updateFromYaml,\n    updateIpCore,\n    getValidationErrors,\n  } = useIpCoreState();\n  const { selectedSection, navigate } = useNavigation();\n  const { sendUpdate } = useIpCoreSync(rawYaml);\n\n  // Sidebar toggle state for mobile\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  // Panel focus state for Ctrl+H/L navigation\n  const [focusedPanel, setFocusedPanel] = useState<FocusedPanel>(\"left\");\n  const leftPanelRef = useRef<HTMLDivElement>(null);\n  const rightPanelRef = useRef<HTMLDivElement>(null);\n\n  // Highlight state for validation errors\n  const [highlight, setHighlight] = useState<\n    { entityName: string; field: string } | undefined\n  >(undefined);\n\n  const validationErrors = getValidationErrors();\n\n  // Clear highlight if the error is no longer in the validation list (e.g., fixed by undo or edit)\n  useEffect(() => {\n    if (highlight) {\n      const errorStillExists = validationErrors.some(\n        (e) =>\n          e.entityName === highlight.entityName && e.field === highlight.field,\n      );\n      if (!errorStillExists) {\n        setHighlight(undefined);\n      }\n    }\n  }, [validationErrors, highlight]);\n\n  // Handle global keyboard shortcuts for panel switching\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl+H: Focus left panel\n      if (e.ctrlKey && e.key.toLowerCase() === \"h\") {\n        e.preventDefault();\n        setFocusedPanel(\"left\");\n        leftPanelRef.current?.focus();\n      }\n      // Ctrl+L: Focus right panel (EditorPanel's useEffect will auto-focus the table)\n      else if (e.ctrlKey && e.key.toLowerCase() === \"l\") {\n        e.preventDefault();\n        setFocusedPanel(\"right\");\n        // The EditorPanel will auto-focus the inner table container via its useEffect\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  // Notify extension that webview is ready\n  useEffect(() => {\n    if (vscode) {\n      vscode.postMessage({ type: \"ready\" });\n    }\n  }, []);\n\n  // Listen for messages from extension\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      const message = event.data;\n\n      switch (message.type) {\n        case \"update\":\n          updateFromYaml(message.text, message.fileName, message.imports);\n          break;\n      }\n    };\n\n    window.addEventListener(\"message\", handleMessage);\n    return () => window.removeEventListener(\"message\", handleMessage);\n  }, [updateFromYaml]);\n\n  return (\n    <div\n      className=\"h-screen flex flex-col\"\n      style={{\n        background: \"var(--vscode-editor-background)\",\n        color: \"var(--vscode-editor-foreground)\",\n      }}\n    >\n      {/* Header */}\n      <div\n        className=\"px-4 py-2\"\n        style={{\n          borderBottom: \"1px solid var(--vscode-panel-border)\",\n          background: \"var(--vscode-sideBar-background)\",\n        }}\n      >\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            {/* Mobile sidebar toggle */}\n            <button\n              className=\"sidebar-toggle-btn p-2 rounded-md transition-colors vscode-icon-button\"\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              title=\"Toggle navigation\"\n              type=\"button\"\n            >\n              <span className=\"codicon codicon-menu\"></span>\n            </button>\n            <h1 className=\"text-sm font-semibold\">\n              {fileName || \"IP Core Editor\"}\n            </h1>\n            {ipCore?.vlnv && (\n              <span className=\"text-xs\" style={{ opacity: 0.7 }}>\n                {ipCore.vlnv.vendor} / {ipCore.vlnv.library} /{\" \"}\n                {ipCore.vlnv.name}\n              </span>\n            )}\n          </div>\n          {validationErrors.length > 0 && (\n            <div\n              className=\"text-sm\"\n              style={{ color: \"var(--vscode-errorForeground)\" }}\n            >\n              {validationErrors.length} validation error(s)\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {parseError ? (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div\n              className=\"px-4 py-3 rounded max-w-2xl\"\n              style={{\n                background: \"var(--vscode-inputValidation-errorBackground)\",\n                border: \"1px solid var(--vscode-inputValidation-errorBorder)\",\n                color: \"var(--vscode-errorForeground)\",\n              }}\n            >\n              <p className=\"font-semibold mb-2\">Parse Error</p>\n              <p className=\"text-sm\">{parseError}</p>\n            </div>\n          </div>\n        ) : !ipCore ? (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <p style={{ color: \"var(--vscode-descriptionForeground)\" }}>\n                No IP core loaded\n              </p>\n              <p\n                className=\"text-xs mt-2\"\n                style={{\n                  color: \"var(--vscode-descriptionForeground)\",\n                  opacity: 0.6,\n                }}\n              >\n                Waiting for data from extension...\n              </p>\n            </div>\n          </div>\n        ) : (\n          <>\n            {/* Sidebar backdrop for mobile */}\n            {sidebarOpen && (\n              <div\n                className=\"sidebar-backdrop active\"\n                onClick={() => setSidebarOpen(false)}\n              />\n            )}\n            <NavigationSidebar\n              selectedSection={selectedSection}\n              onNavigate={navigate}\n              ipCore={{ ...ipCore, imports }}\n              isFocused={focusedPanel === \"left\"}\n              onFocus={() => setFocusedPanel(\"left\")}\n              panelRef={leftPanelRef}\n              className={sidebarOpen ? 'sidebar-open' : ''}\n            />\n            <EditorPanel\n              selectedSection={selectedSection}\n              ipCore={ipCore}\n              imports={imports}\n              onUpdate={updateIpCore}\n              isFocused={focusedPanel === \"right\"}\n              onFocus={() => setFocusedPanel(\"right\")}\n              panelRef={rightPanelRef}\n              highlight={highlight}\n            />\n          </>\n        )}\n      </div>\n\n      {/* Validation errors panel */}\n      {validationErrors.length > 0 && (\n        <div\n          className=\"p-2\"\n          style={{\n            borderTop: \"1px solid var(--vscode-panel-border)\",\n            background: \"var(--vscode-inputValidation-warningBackground)\",\n          }}\n        >\n          <p className=\"text-sm font-semibold mb-1\">\n            Reference Validation Errors:\n          </p>\n          <ul className=\"text-xs list-disc list-inside\">\n            {validationErrors.map((error, idx) => (\n              <li\n                key={idx}\n                className=\"cursor-pointer hover:underline\"\n                onClick={() => {\n                  navigate(error.section);\n                  setHighlight({\n                    entityName: error.entityName,\n                    field: error.field,\n                  });\n                  setFocusedPanel(\"right\");\n                }}\n              >\n                {error.message}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Mount the app\nconst container = document.getElementById(\"ipcore-root\");\nif (container) {\n  const root = createRoot(container);\n  root.render(<IpCoreApp />);\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/layout/EditorPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'vscode' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":69,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":69,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2281,2283],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":70,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":70,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2332,2334],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":77,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":77,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2486,2488],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":78,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":78,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2537,2539],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":83,"column":44,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":83,"endColumn":46,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2663,2665],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":87,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":87,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2814,2816],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":90,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":90,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2925,2927],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":91,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":91,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2962,2964],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":101,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":101,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3291,3293],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":103,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":103,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3398,3400],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ClocksSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":130,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":130,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4114,4117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4114,4117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":134,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":134,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":136,"column":6,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":136,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":136,"column":6,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":136,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4351,4354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4351,4354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":145,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":145,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physicalPort on an `any` value.","line":147,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":147,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .frequency on an `any` value.","line":150,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":150,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ResetsSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":157,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":157,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4945,4948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4945,4948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":161,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":163,"column":6,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":163,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":163,"column":6,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":163,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":163,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5182,5185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5182,5185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":172,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":172,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .physicalPort on an `any` value.","line":174,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":174,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .polarity on an `any` value.","line":177,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":177,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PortsSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":184,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":184,"endColumn":34},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":184,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5764,5767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5764,5767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":188,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":188,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BusInterfacesSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":193,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":193,"endColumn":42},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6023,6026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6023,6026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":197,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":197,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .map on an `any` value.","line":199,"column":6,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":199,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":199,"column":6,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":199,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":199,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6295,6298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6295,6298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":208,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":208,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":210,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":210,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .mode on an `any` value.","line":213,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":213,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ParametersSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":220,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":220,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6851,6854],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6851,6854],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":224,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":224,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileSetsSection' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":229,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":229,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":229,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7125,7128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7125,7128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .length on an `any` value.","line":233,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":233,"endColumn":29}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":40,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { RefObject, useEffect, useRef } from 'react';\nimport type { YamlUpdateHandler } from '../../../types/editor';\nimport type { IpCore } from '../../../types/ipCore';\nimport { vscode } from '../../../vscode';\nimport { MetadataEditor } from '../sections/MetadataEditor';\nimport { ClocksTable } from '../sections/ClocksTable';\nimport { ResetsTable } from '../sections/ResetsTable';\nimport { PortsTable } from '../sections/PortsTable';\nimport { ParametersTable } from '../sections/ParametersTable';\nimport { FileSetsEditor } from '../sections/FileSetsEditor';\nimport { BusInterfacesEditor } from '../sections/BusInterfacesEditor';\nimport { MemoryMapsEditor } from '../sections/MemoryMapsEditor';\nimport { GeneratorPanel } from '../sections/GeneratorPanel';\nimport { Section } from '../../hooks/useNavigation';\n\ninterface EditorPanelProps {\n  selectedSection: Section;\n  ipCore: IpCore | null;\n  imports?: { busLibrary?: unknown; memoryMaps?: unknown[] };\n  onUpdate: YamlUpdateHandler;\n  isFocused?: boolean;\n  onFocus?: () => void;\n  panelRef?: RefObject<HTMLDivElement>;\n  highlight?: { entityName: string; field: string };\n}\n\n/**\n * Main editor panel that displays the selected section\n */\nexport const EditorPanel: React.FC<EditorPanelProps> = ({\n  selectedSection,\n  ipCore,\n  imports = {},\n  onUpdate,\n  isFocused = false,\n  onFocus,\n  panelRef,\n  highlight,\n}) => {\n  const contentRef = useRef<HTMLDivElement>(null);\n  const ip = ipCore as IpCore;\n\n  // Auto-focus the inner table container when panel receives focus\n  useEffect(() => {\n    if (isFocused && contentRef.current) {\n      // Find and focus the first focusable element with tabIndex (table container)\n      const focusableElement = contentRef.current.querySelector('[tabindex=\"0\"]') as HTMLElement;\n      if (focusableElement) {\n        focusableElement.focus();\n      }\n    }\n  }, [isFocused]);\n\n  if (!ip) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center text-gray-500\">\n        <p>No IP core loaded</p>\n      </div>\n    );\n  }\n\n  const renderSection = () => {\n    switch (selectedSection) {\n      case 'metadata':\n        return <MetadataEditor ipCore={ip} onUpdate={onUpdate} />;\n      case 'clocks':\n        return (\n          <ClocksTable\n            clocks={ip.clocks || []}\n            busInterfaces={ip.busInterfaces || []}\n            onUpdate={onUpdate}\n          />\n        );\n      case 'resets':\n        return (\n          <ResetsTable\n            resets={ip.resets || []}\n            busInterfaces={ip.busInterfaces || []}\n            onUpdate={onUpdate}\n          />\n        );\n      case 'ports':\n        return <PortsTable ports={ip.ports || []} onUpdate={onUpdate} />;\n      case 'busInterfaces':\n        return (\n          <BusInterfacesEditor\n            busInterfaces={ip.busInterfaces || []}\n            busLibrary={imports.busLibrary}\n            imports={imports}\n            clocks={ip.clocks || []}\n            resets={ip.resets || []}\n            onUpdate={onUpdate}\n            highlight={highlight}\n          />\n        );\n      case 'memoryMaps':\n        return (\n          <MemoryMapsEditor memoryMaps={ip.memoryMaps} imports={imports} onUpdate={onUpdate} />\n        );\n      case 'parameters':\n        return <ParametersTable parameters={ip.parameters || []} onUpdate={onUpdate} />;\n      case 'fileSets':\n        return <FileSetsEditor fileSets={ip.fileSets || []} onUpdate={onUpdate} />;\n      case 'generate':\n        return <GeneratorPanel ipCore={ip} />;\n      default:\n        return <div>Unknown section</div>;\n    }\n  };\n\n  return (\n    <div\n      ref={panelRef}\n      tabIndex={-1}\n      onClick={onFocus}\n      className=\"flex-1 overflow-y-auto min-w-0 outline-none\"\n      style={{\n        outline: isFocused ? '1px solid var(--vscode-focusBorder)' : 'none',\n        outlineOffset: '-1px',\n        opacity: isFocused ? 1 : 0.7,\n        transition: 'opacity 0.2s',\n      }}\n    >\n      <div ref={contentRef}>{renderSection()}</div>\n    </div>\n  );\n};\n\n// Placeholder section components (will be replaced as we build editors in Phase 2)\nconst ClocksSection: React.FC<any> = ({ clocks }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">Clocks</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {clocks.length} clock(s)\n    </p>\n    {clocks.map((clock: any, idx: number) => (\n      <div\n        key={idx}\n        className=\"p-4 rounded shadow\"\n        style={{\n          background: 'var(--vscode-editor-background)',\n          border: '1px solid var(--vscode-panel-border)',\n        }}\n      >\n        <p className=\"font-semibold\">{clock.name}</p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Physical Port: {clock.physicalPort}\n        </p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Frequency: {clock.frequency || 'N/A'}\n        </p>\n      </div>\n    ))}\n  </div>\n);\n\nconst ResetsSection: React.FC<any> = ({ resets }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">Resets</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {resets.length} reset(s)\n    </p>\n    {resets.map((reset: any, idx: number) => (\n      <div\n        key={idx}\n        className=\"p-4 rounded shadow\"\n        style={{\n          background: 'var(--vscode-editor-background)',\n          border: '1px solid var(--vscode-panel-border)',\n        }}\n      >\n        <p className=\"font-semibold\">{reset.name}</p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Physical Port: {reset.physicalPort}\n        </p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Polarity: {reset.polarity}\n        </p>\n      </div>\n    ))}\n  </div>\n);\n\nconst PortsSection: React.FC<any> = ({ ports }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">Ports</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {ports.length} port(s)\n    </p>\n  </div>\n);\n\nconst BusInterfacesSection: React.FC<any> = ({ busInterfaces }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">Bus Interfaces</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {busInterfaces.length} bus interface(s)\n    </p>\n    {busInterfaces.map((bus: any, idx: number) => (\n      <div\n        key={idx}\n        className=\"p-4 rounded shadow\"\n        style={{\n          background: 'var(--vscode-editor-background)',\n          border: '1px solid var(--vscode-panel-border)',\n        }}\n      >\n        <p className=\"font-semibold\">{bus.name}</p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Type: {bus.type}\n        </p>\n        <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n          Mode: {bus.mode}\n        </p>\n      </div>\n    ))}\n  </div>\n);\n\nconst ParametersSection: React.FC<any> = ({ parameters }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">Parameters</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {parameters.length} parameter(s)\n    </p>\n  </div>\n);\n\nconst FileSetsSection: React.FC<any> = ({ fileSets }) => (\n  <div className=\"p-6 space-y-4\">\n    <h2 className=\"text-2xl font-semibold\">File Sets</h2>\n    <p className=\"text-sm\" style={{ opacity: 0.7 }}>\n      Found {fileSets.length} file set(s)\n    </p>\n  </div>\n);\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/layout/NavigationSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"string | undefined\" of template literal expression.","line":202,"column":55,"nodeType":"MemberExpression","messageId":"invalidType","endLine":202,"endColumn":67}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, RefObject, useCallback } from \"react\";\nimport { Section } from \"../../hooks/useNavigation\";\n\ninterface NavigationSidebarProps {\n  selectedSection: Section;\n  onNavigate: (section: Section) => void;\n  ipCore: unknown;\n  isFocused?: boolean;\n  onFocus?: () => void;\n  panelRef?: RefObject<HTMLDivElement>;\n  className?: string;\n}\n\ninterface SectionItem {\n  id: Section;\n  label: string;\n  icon?: string;\n  customIcon?: React.ReactNode;\n  count?: (ipCore: unknown) => number;\n}\n\n// Custom square wave icon for clocks (single pulse pattern)\nconst SquareWaveIcon: React.FC = () => (\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n  >\n    <path\n      d=\"M1 12 L1 4 L5 4 L5 12 L9 12 L9 4 L13 4 L13 12 L15 12\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.2\"\n      fill=\"none\"\n      strokeLinecap=\"square\"\n    />\n  </svg>\n);\n\nconst SECTIONS: SectionItem[] = [\n  { id: \"metadata\", label: \"Metadata\", icon: \"info\" },\n  {\n    id: \"clocks\",\n    label: \"Clocks\",\n    customIcon: <SquareWaveIcon />,\n    count: (ip) => (ip as Record<string, unknown[]>)?.clocks?.length || 0,\n  },\n  {\n    id: \"resets\",\n    label: \"Resets\",\n    icon: \"debug-restart\",\n    count: (ip) => (ip as Record<string, unknown[]>)?.resets?.length || 0,\n  },\n  {\n    id: \"ports\",\n    label: \"Ports\",\n    icon: \"plug\",\n    count: (ip) => (ip as Record<string, unknown[]>)?.ports?.length || 0,\n  },\n  {\n    id: \"busInterfaces\",\n    label: \"Bus Interfaces\",\n    icon: \"circuit-board\",\n    count: (ip) => (ip as Record<string, unknown[]>)?.busInterfaces?.length || 0,\n  },\n  {\n    id: \"memoryMaps\",\n    label: \"Memory Maps\",\n    icon: \"circuit-board\",\n    count: (ip) => {\n      const r = ip as Record<string, unknown>;\n      return (r?.memoryMaps as unknown[])?.length || ((r?.imports as Record<string, unknown>)?.memoryMaps as unknown[])?.length || 0;\n    },\n  },\n  {\n    id: \"parameters\",\n    label: \"Parameters\",\n    icon: \"symbol-parameter\",\n    count: (ip) => (ip as Record<string, unknown[]>)?.parameters?.length || 0,\n  },\n  {\n    id: \"fileSets\",\n    label: \"File Sets\",\n    icon: \"files\",\n    count: (ip) => (ip as Record<string, unknown[]>)?.fileSets?.length || 0,\n  },\n  // Separator - Generate is an action, not a data section\n  { id: \"generate\", label: \"Project Scaffold\", icon: \"tools\" },\n];\n\n/**\n * Navigation sidebar for IP Core sections\n * Supports vim-style navigation: j/k for up/down, Enter to select\n */\nexport const NavigationSidebar: React.FC<NavigationSidebarProps> = ({\n  selectedSection,\n  onNavigate,\n  ipCore,\n  isFocused = false,\n  onFocus,\n  panelRef,\n  className = '',\n}) => {\n  // Get the current section index\n  const getCurrentIndex = useCallback(() => {\n    return SECTIONS.findIndex((s) => s.id === selectedSection);\n  }, [selectedSection]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    if (!isFocused || !panelRef?.current) {\n      return;\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const key = e.key.toLowerCase();\n      const currentIdx = getCurrentIndex();\n\n      // j or ArrowDown: Move to next section\n      if (key === \"j\" || e.key === \"ArrowDown\") {\n        e.preventDefault();\n        const nextIdx = Math.min(currentIdx + 1, SECTIONS.length - 1);\n        onNavigate(SECTIONS[nextIdx].id);\n      }\n      // k or ArrowUp: Move to previous section\n      else if (key === \"k\" || e.key === \"ArrowUp\") {\n        e.preventDefault();\n        const prevIdx = Math.max(currentIdx - 1, 0);\n        onNavigate(SECTIONS[prevIdx].id);\n      }\n      // g: Go to first section\n      else if (key === \"g\") {\n        e.preventDefault();\n        onNavigate(SECTIONS[0].id);\n      }\n      // G (Shift+g): Go to last section\n      else if (e.key === \"G\" && e.shiftKey) {\n        e.preventDefault();\n        onNavigate(SECTIONS[SECTIONS.length - 1].id);\n      }\n    };\n\n    const panel = panelRef.current;\n    panel.addEventListener(\"keydown\", handleKeyDown);\n    return () => panel.removeEventListener(\"keydown\", handleKeyDown);\n  }, [isFocused, getCurrentIndex, onNavigate, panelRef]);\n\n  return (\n    <div\n      ref={panelRef}\n      tabIndex={0}\n      onClick={onFocus}\n      className={`w-64 flex flex-col shrink-0 overflow-y-auto outline-none sidebar ${className}`}\n      style={{\n        background: \"var(--vscode-sideBar-background)\",\n        borderRight: \"1px solid var(--vscode-panel-border)\",\n        outline: isFocused ? \"1px solid var(--vscode-focusBorder)\" : \"none\",\n        outlineOffset: \"-1px\",\n        opacity: isFocused ? 1 : 0.7,\n        transition: \"opacity 0.2s\",\n        color: \"var(--vscode-sideBar-foreground)\",\n      }}\n    >\n      <nav className=\"flex-1 overflow-y-auto py-2\">\n        {SECTIONS.map((section) => {\n          const isActive = selectedSection === section.id;\n          const count = section.count ? section.count(ipCore) : undefined;\n\n          return (\n            <button\n              key={section.id}\n              onClick={() => onNavigate(section.id)}\n              className=\"w-full px-4 py-2 text-left flex items-center justify-between transition-colors outline-none\"\n              style={{\n                background: isActive\n                  ? \"var(--vscode-list-activeSelectionBackground)\"\n                  : \"transparent\",\n                color: isActive\n                  ? \"var(--vscode-list-activeSelectionForeground)\"\n                  : \"inherit\",\n                borderLeft: isActive\n                  ? \"4px solid var(--vscode-focusBorder)\"\n                  : \"4px solid transparent\",\n              }}\n              onMouseEnter={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background =\n                    \"var(--vscode-list-hoverBackground)\";\n                }\n              }}\n              onMouseLeave={(e) => {\n                if (!isActive) {\n                  e.currentTarget.style.background = \"transparent\";\n                }\n              }}\n            >\n              <div className=\"flex items-center gap-2\">\n                {section.customIcon ? (\n                  section.customIcon\n                ) : (\n                  <span className={`codicon codicon-${section.icon}`} />\n                )}\n                <span className=\"text-sm\">{section.label}</span>\n              </div>\n              {count !== undefined && (\n                <span\n                  className=\"text-xs px-2 py-1 rounded-full\"\n                  style={{\n                    background: \"var(--vscode-badge-background)\",\n                    color: \"var(--vscode-badge-foreground)\",\n                  }}\n                >\n                  {count}\n                </span>\n              )}\n            </button>\n          );\n        })}\n      </nav>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/BusInterfacesEditor.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":74,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":74,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1746,1748],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":75,"column":46,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":75,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1798,1800],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":76,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":76,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1853,1855],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":208,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":208,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5945,5947],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":223,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":223,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6443,6445],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":260,"column":57,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":260,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7591,7593],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":360,"column":52,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":360,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10565,10567],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":396,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":396,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11547,11549],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleBrowseMemoryMap' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":476,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":476,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":479,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":479,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":479,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":479,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":487,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":487,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":489,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":489,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":490,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":490,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":491,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":491,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":494,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":494,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":494,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":494,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleClearMemoryMap' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":505,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":505,"endColumn":29},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":560,"column":71,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":560,"endColumn":73,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[16682,16684],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":629,"column":9,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":629,"endColumn":42,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[18882,18915],"text":"highlight?.entityName"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":964,"column":67,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":964,"endColumn":69,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[32909,32911],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":964,"column":112,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":964,"endColumn":114,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[32954,32956],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":981,"column":67,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":981,"endColumn":69,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[33735,33737],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":981,"column":110,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":981,"endColumn":112,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[33778,33780],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1078,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1078,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[38297,38299],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1085,"column":73,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1085,"endColumn":75,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[38647,38649],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1114,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1114,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[39851,39853],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1157,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1157,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[41989,41991],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1201,"column":65,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1201,"endColumn":67,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[44127,44129],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1225,"column":63,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1225,"endColumn":65,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[45288,45290],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1225,"column":92,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1225,"endColumn":94,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[45317,45319],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1272,"column":71,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1272,"endColumn":73,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[47483,47485],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1282,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1282,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[48022,48024],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1313,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1313,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[49804,49807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[49804,49807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":1315,"column":50,"nodeType":"LogicalExpression","messageId":"anyAssignment","endLine":1315,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":1315,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1315,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":1316,"column":52,"nodeType":"MemberExpression","messageId":"anyAssignment","endLine":1316,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":1316,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1316,"endColumn":60},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":1318,"column":46,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1318,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1328,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1328,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[50597,50600],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[50597,50600],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":1328,"column":51,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":1328,"endColumn":57},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":1447,"column":37,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":1447,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[56581,56582],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":1534,"column":37,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":1534,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[61067,61068],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":1622,"column":37,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":1622,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[65642,65643],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1622,"column":62,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1622,"endColumn":64,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[65658,65660],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1636,"column":58,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1636,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[66393,66395],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":1714,"column":37,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":1714,"endColumn":47,"suggestions":[{"messageId":"suggestOptionalChain","fix":{"range":[70486,70487],"text":"?"},"desc":"Consider using the optional chain operator `?.` instead. This operator includes runtime checks, so it is safer than the compile-only non-null assertion operator."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1714,"column":70,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1714,"endColumn":72,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[70510,70512],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1728,"column":66,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1728,"endColumn":68,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[71261,71263],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'physicalName' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":1785,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1785,"endColumn":47},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1804,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1804,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[74723,74725],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1852,"column":61,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1852,"endColumn":63,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[77184,77186],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1929,"column":61,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":1929,"endColumn":63,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[81572,81574],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":2036,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":2036,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[87535,87537],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":2049,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":2049,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[88282,88284],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":2064,"column":53,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":2064,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[89062,89064],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":53,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport { vscode } from \"../../../vscode\";\n\ninterface BusPort {\n  name: string;\n  width?: number;\n  direction?: string;\n  presence?: string;\n}\n\ninterface BusInterface {\n  name: string;\n  type: string;\n  mode: string;\n  physicalPrefix?: string;\n  associatedClock?: string;\n  associatedReset?: string;\n  memoryMapRef?: string;\n  useOptionalPorts?: string[];\n  portWidthOverrides?: Record<string, number>;\n  portNameOverrides?: Record<string, string>;\n  array?: {\n    count: number;\n    indexStart?: number;\n    namingPattern?: string;\n    physicalPrefixPattern?: string;\n  };\n}\n\ninterface Clock {\n  name: string;\n  physicalPort?: string;\n  frequency?: string;\n  direction?: string;\n}\n\ninterface Reset {\n  name: string;\n  physicalPort?: string;\n  polarity?: string;\n  direction?: string;\n}\n\ninterface BusInterfacesEditorProps {\n  busInterfaces: unknown[];\n  busLibrary?: unknown;\n  clocks?: unknown[];\n  resets?: unknown[];\n  onUpdate: YamlUpdateHandler;\n  highlight?: { entityName: string; field: string };\n  imports?: { memoryMaps?: unknown[] };\n}\n\n// Consistent text styles\nconst TEXT_STYLES = {\n  label: { opacity: 0.6 },\n  value: { fontFamily: \"var(--vscode-editor-font-family, monospace)\" },\n  muted: { opacity: 0.7 },\n};\n\n/**\n * Get effective ports for a bus interface based on library definition and overrides\n */\nfunction getEffectivePorts(\n  bus: BusInterface,\n  busLibrary: Record<string, { ports?: BusPort[] }> | undefined,\n): BusPort[] {\n  if (!busLibrary || !bus.type || !busLibrary[bus.type]) {\n    return [];\n  }\n\n  const libraryDef = busLibrary[bus.type];\n  const libraryPorts = libraryDef.ports || [];\n  const optionalPorts = bus.useOptionalPorts || [];\n  const widthOverrides = bus.portWidthOverrides || {};\n\n  return libraryPorts\n    .filter((port) => {\n      if (port.presence === \"required\") {\n        return true;\n      }\n      if (port.presence === \"optional\" && optionalPorts.includes(port.name)) {\n        return true;\n      }\n      return false;\n    })\n    .map((port) => ({\n      ...port,\n      width: widthOverrides[port.name] ?? port.width,\n      direction:\n        bus.mode === \"slave\" && port.direction\n          ? port.direction === \"in\"\n            ? \"out\"\n            : port.direction === \"out\"\n              ? \"in\"\n              : port.direction\n          : port.direction,\n    }));\n}\n\n/**\n * Bus Interfaces Editor - Clean consistent styling\n */\nexport const BusInterfacesEditor: React.FC<BusInterfacesEditorProps> = ({\n  busInterfaces: rawBusInterfaces,\n  busLibrary: rawBusLibrary,\n  imports,\n  clocks: rawClocks = [],\n  resets: rawResets = [],\n  onUpdate,\n  highlight,\n}) => {\n  const busInterfaces = rawBusInterfaces as BusInterface[];\n  const busLibrary = rawBusLibrary as Record<string, { ports?: BusPort[] }> | undefined;\n  const clocks = rawClocks as Clock[];\n  const resets = rawResets as Reset[];\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [expandedIndexes, setExpandedIndexes] = useState<Set<number>>(\n    new Set(),\n  );\n  const [expandAll, setExpandAll] = useState(false);\n  const [editingPrefix, setEditingPrefix] = useState<number | null>(null);\n  const [draftPrefix, setDraftPrefix] = useState(\"\");\n  const [editingPortName, setEditingPortName] = useState<{\n    busIndex: number;\n    portName: string;\n  } | null>(null);\n  const [draftPortName, setDraftPortName] = useState(\"\");\n  // Port-level navigation state\n  const [selectedPortIndex, setSelectedPortIndex] = useState(0);\n  const [selectedColumn, setSelectedColumn] = useState<\"name\" | \"width\">(\n    \"name\",\n  );\n  const [editingPortWidth, setEditingPortWidth] = useState<{\n    busIndex: number;\n    portName: string;\n  } | null>(null);\n  const [draftPortWidth, setDraftPortWidth] = useState(\"\");\n  // Array field editing\n  const [editingArrayField, setEditingArrayField] = useState<{\n    busIndex: number;\n    field: \"count\" | \"indexStart\" | \"namingPattern\" | \"physicalPrefixPattern\";\n  } | null>(null);\n  const [draftArrayValue, setDraftArrayValue] = useState(\"\");\n  // Bus field editing\n  const [editingBusField, setEditingBusField] = useState<{\n    busIndex: number;\n    field: \"name\" | \"type\" | \"mode\";\n  } | null>(null);\n  const [draftBusValue, setDraftBusValue] = useState(\"\");\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const toggleExpand = useCallback((index: number) => {\n    setExpandedIndexes((prev) => {\n      const next = new Set(prev);\n      if (next.has(index)) {\n        next.delete(index);\n      } else {\n        next.add(index);\n      }\n      return next;\n    });\n  }, []);\n\n  const toggleExpandAll = useCallback(() => {\n    if (expandAll) {\n      setExpandedIndexes(new Set());\n    } else {\n      setExpandedIndexes(new Set(busInterfaces.map((_, i) => i)));\n    }\n    setExpandAll(!expandAll);\n  }, [expandAll, busInterfaces]);\n\n  const startEditPrefix = useCallback(\n    (index: number, currentPrefix: string) => {\n      setEditingPrefix(index);\n      setDraftPrefix(currentPrefix || \"\");\n    },\n    [],\n  );\n\n  const savePrefix = useCallback(\n    (index: number) => {\n      onUpdate([\"busInterfaces\", index, \"physicalPrefix\"], draftPrefix);\n      setEditingPrefix(null);\n      setDraftPrefix(\"\");\n      setTimeout(() => containerRef.current?.focus(), 0);\n    },\n    [draftPrefix, onUpdate],\n  );\n\n  const cancelEditPrefix = useCallback(() => {\n    setEditingPrefix(null);\n    setDraftPrefix(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  // Port name editing - only edit the suffix, not the prefix\n  const getPortSuffix = (bus: BusInterface, portName: string): string => {\n    if (bus.portNameOverrides?.[portName]) {\n      return bus.portNameOverrides[portName];\n    }\n    return portName.toLowerCase();\n  };\n\n  const getPhysicalName = (bus: BusInterface, portName: string): string => {\n    return `${bus.physicalPrefix || \"\"}${getPortSuffix(bus, portName)}`;\n  };\n\n  const startEditPortName = useCallback(\n    (busIndex: number, portName: string, currentSuffix: string) => {\n      setEditingPortName({ busIndex, portName });\n      setDraftPortName(currentSuffix);\n    },\n    [],\n  );\n\n  const savePortName = useCallback(\n    (busIndex: number, portName: string) => {\n      const defaultSuffix = portName.toLowerCase();\n      const bus = busInterfaces[busIndex];\n      const newOverrides = { ...(bus.portNameOverrides || {}) };\n\n      if (draftPortName === defaultSuffix || draftPortName === \"\") {\n        delete newOverrides[portName];\n      } else {\n        newOverrides[portName] = draftPortName;\n      }\n\n      onUpdate(\n        [\"busInterfaces\", busIndex, \"portNameOverrides\"],\n        Object.keys(newOverrides).length > 0 ? newOverrides : undefined,\n      );\n      setEditingPortName(null);\n      setDraftPortName(\"\");\n      setTimeout(() => containerRef.current?.focus(), 0);\n    },\n    [busInterfaces, draftPortName, onUpdate],\n  );\n\n  const cancelEditPortName = useCallback(() => {\n    setEditingPortName(null);\n    setDraftPortName(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  // Width editing\n  const startEditPortWidth = useCallback(\n    (busIndex: number, portName: string, currentWidth: number) => {\n      setEditingPortWidth({ busIndex, portName });\n      setDraftPortWidth(String(currentWidth));\n    },\n    [],\n  );\n\n  const savePortWidth = useCallback(\n    (busIndex: number, portName: string, defaultWidth: number) => {\n      const bus = busInterfaces[busIndex];\n      const newOverrides = { ...(bus.portWidthOverrides || {}) };\n      const newWidth = parseInt(draftPortWidth, 10);\n\n      if (isNaN(newWidth) || newWidth === defaultWidth) {\n        delete newOverrides[portName];\n      } else {\n        newOverrides[portName] = newWidth;\n      }\n\n      onUpdate(\n        [\"busInterfaces\", busIndex, \"portWidthOverrides\"],\n        Object.keys(newOverrides).length > 0 ? newOverrides : undefined,\n      );\n      setEditingPortWidth(null);\n      setDraftPortWidth(\"\");\n      setTimeout(() => containerRef.current?.focus(), 0);\n    },\n    [busInterfaces, draftPortWidth, onUpdate],\n  );\n\n  const cancelEditPortWidth = useCallback(() => {\n    setEditingPortWidth(null);\n    setDraftPortWidth(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  // Array field editing\n  type ArrayField =\n    | \"count\"\n    | \"indexStart\"\n    | \"namingPattern\"\n    | \"physicalPrefixPattern\";\n\n  const startEditArrayField = useCallback(\n    (busIndex: number, field: ArrayField, currentValue: string | number) => {\n      setEditingArrayField({ busIndex, field });\n      setDraftArrayValue(String(currentValue));\n    },\n    [],\n  );\n\n  const saveArrayField = useCallback(\n    (busIndex: number) => {\n      if (!editingArrayField) {\n        return;\n      }\n      const { field } = editingArrayField;\n\n      if (field === \"count\" || field === \"indexStart\") {\n        const numValue = parseInt(draftArrayValue, 10);\n        if (!isNaN(numValue) && (field === \"indexStart\" || numValue > 0)) {\n          onUpdate([\"busInterfaces\", busIndex, \"array\", field], numValue);\n        }\n      } else {\n        // String fields: namingPattern, physicalPrefixPattern\n        if (draftArrayValue.trim()) {\n          onUpdate(\n            [\"busInterfaces\", busIndex, \"array\", field],\n            draftArrayValue.trim(),\n          );\n        } else {\n          // Remove empty patterns\n          onUpdate([\"busInterfaces\", busIndex, \"array\", field], undefined);\n        }\n      }\n\n      setEditingArrayField(null);\n      setDraftArrayValue(\"\");\n      setTimeout(() => containerRef.current?.focus(), 0);\n    },\n    [editingArrayField, draftArrayValue, onUpdate],\n  );\n\n  const cancelEditArrayField = useCallback(() => {\n    setEditingArrayField(null);\n    setDraftArrayValue(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  // Toggle array configuration\n  const toggleArray = useCallback(\n    (busIndex: number, hasArray: boolean) => {\n      if (hasArray) {\n        // Remove array\n        onUpdate([\"busInterfaces\", busIndex, \"array\"], undefined);\n      } else {\n        // Add array with default values\n        onUpdate([\"busInterfaces\", busIndex, \"array\"], {\n          count: 2,\n          indexStart: 0,\n        });\n      }\n    },\n    [onUpdate],\n  );\n\n  // Toggle optional port\n  const toggleOptionalPort = useCallback(\n    (busIndex: number, portName: string, currentlyEnabled: boolean) => {\n      const bus = busInterfaces[busIndex];\n      const currentOptional = bus.useOptionalPorts || [];\n\n      let newOptional: string[];\n      if (currentlyEnabled) {\n        newOptional = currentOptional.filter((p) => p !== portName);\n      } else {\n        newOptional = [...currentOptional, portName];\n      }\n\n      onUpdate(\n        [\"busInterfaces\", busIndex, \"useOptionalPorts\"],\n        newOptional.length > 0 ? newOptional : undefined,\n      );\n    },\n    [busInterfaces, onUpdate],\n  );\n\n  // Update associated clock/reset\n  const updateAssociation = useCallback(\n    (\n      busIndex: number,\n      field: \"associatedClock\" | \"associatedReset\",\n      value: string,\n    ) => {\n      onUpdate([\"busInterfaces\", busIndex, field], value || undefined);\n    },\n    [onUpdate],\n  );\n\n  // Get all optional ports from library\n  const getOptionalPorts = useCallback(\n    (bus: BusInterface): BusPort[] => {\n      if (!busLibrary || !bus.type || !busLibrary[bus.type]) {\n        return [];\n      }\n      const libraryDef = busLibrary[bus.type];\n      return (libraryDef.ports || []).filter((p) => p.presence === \"optional\");\n    },\n    [busLibrary],\n  );\n\n  // Bus interface management\n  const addBusInterface = useCallback(() => {\n    // Default to AXI4 or the first available type\n    const availableTypes = busLibrary ? Object.keys(busLibrary) : [];\n    const defaultType = availableTypes.includes(\"AXI4\")\n      ? \"AXI4\"\n      : availableTypes[0] || \"AXI4\";\n\n    const newBus: BusInterface = {\n      name: `NEW_INTERFACE_${busInterfaces.length}`,\n      type: defaultType,\n      mode: \"slave\",\n    };\n\n    onUpdate([\"busInterfaces\"], [...busInterfaces, newBus]);\n\n    // Auto-select the new interface\n    setTimeout(() => {\n      setSelectedIndex(busInterfaces.length);\n      setExpandedIndexes((prev) => new Set(prev).add(busInterfaces.length));\n    }, 50);\n  }, [busInterfaces, busLibrary, onUpdate]);\n\n  const removeBusInterface = useCallback(\n    (index: number) => {\n      const newInterfaces = [...busInterfaces];\n      newInterfaces.splice(index, 1);\n      onUpdate([\"busInterfaces\"], newInterfaces);\n\n      // Adjust selection if needed\n      if (selectedIndex >= newInterfaces.length) {\n        setSelectedIndex(Math.max(0, newInterfaces.length - 1));\n      }\n    },\n    [busInterfaces, selectedIndex, onUpdate],\n  );\n\n  // Bus field editing\n  type BusField = \"name\" | \"type\" | \"mode\";\n\n  const startEditBusField = useCallback(\n    (busIndex: number, field: BusField, currentValue: string) => {\n      setEditingBusField({ busIndex, field });\n      setDraftBusValue(currentValue);\n    },\n    [],\n  );\n\n  const saveBusField = useCallback(\n    (busIndex: number, overrideValue?: string) => {\n      if (!editingBusField) {\n        return;\n      }\n      const { field } = editingBusField;\n\n      const valueToSave =\n        overrideValue !== undefined ? overrideValue : draftBusValue;\n\n      if (valueToSave.trim()) {\n        onUpdate([\"busInterfaces\", busIndex, field], valueToSave.trim());\n      }\n\n      setEditingBusField(null);\n      setDraftBusValue(\"\");\n      setTimeout(() => containerRef.current?.focus(), 0);\n    },\n    [editingBusField, draftBusValue, onUpdate],\n  );\n\n  const cancelEditBusField = useCallback(() => {\n    setEditingBusField(null);\n    setDraftBusValue(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  const handleBrowseMemoryMap = useCallback(\n    (busIndex: number) => {\n      // Send message to extension to open file picker with filter\n      vscode?.postMessage({\n        type: \"selectFiles\",\n        multi: false, // Single file selection\n        filters: { \"Memory Map\": [\"memmap.yml\", \"yml\"] },\n      });\n\n      // Listen for response\n      const handler = (event: MessageEvent) => {\n        const message = event.data;\n        if (\n          message.type === \"filesSelected\" &&\n          message.files &&\n          message.files.length > 0\n        ) {\n          // Update the memory map reference\n          const filePath = message.files[0];\n          onUpdate([\"busInterfaces\", busIndex, \"memoryMapRef\"], filePath);\n\n          window.removeEventListener(\"message\", handler);\n        }\n      };\n      window.addEventListener(\"message\", handler);\n    },\n    [onUpdate],\n  );\n\n  const handleClearMemoryMap = useCallback(\n    (busIndex: number) => {\n      onUpdate([\"busInterfaces\", busIndex, \"memoryMapRef\"], undefined);\n    },\n    [onUpdate],\n  );\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Skip vim navigation when editing\n      if (\n        editingPortName !== null ||\n        editingPrefix !== null ||\n        editingPortWidth !== null ||\n        editingArrayField !== null ||\n        editingBusField !== null\n      ) {\n        return;\n      }\n\n      const key = e.key.toLowerCase();\n      const currentBusExpanded = expandedIndexes.has(selectedIndex);\n      const currentBus = busInterfaces[selectedIndex];\n      const ports = currentBus ? getEffectivePorts(currentBus, busLibrary) : [];\n\n      // When a bus interface is expanded with ports, use nested navigation\n      if (currentBusExpanded && ports.length > 0) {\n        if (key === \"j\" || e.key === \"ArrowDown\") {\n          e.preventDefault();\n          setSelectedPortIndex((prev) => Math.min(prev + 1, ports.length - 1));\n        } else if (key === \"k\" || e.key === \"ArrowUp\") {\n          e.preventDefault();\n          setSelectedPortIndex((prev) => Math.max(prev - 1, 0));\n        } else if (key === \"h\" || e.key === \"ArrowLeft\") {\n          e.preventDefault();\n          setSelectedColumn(\"name\");\n        } else if (key === \"l\" || e.key === \"ArrowRight\") {\n          e.preventDefault();\n          setSelectedColumn(\"width\");\n        } else if (key === \"e\") {\n          e.preventDefault();\n          const port = ports[selectedPortIndex];\n          if (port) {\n            if (selectedColumn === \"name\") {\n              startEditPortName(\n                selectedIndex,\n                port.name,\n                getPortSuffix(currentBus, port.name),\n              );\n            } else {\n              startEditPortWidth(selectedIndex, port.name, port.width || 1);\n            }\n          }\n        } else if (e.key === \"Escape\") {\n          e.preventDefault();\n          toggleExpand(selectedIndex); // Collapse to exit port mode\n        } else if (key === \"g\") {\n          e.preventDefault();\n          setSelectedPortIndex(0);\n        } else if (e.key === \"G\" && e.shiftKey) {\n          e.preventDefault();\n          setSelectedPortIndex(ports.length - 1);\n        }\n      } else {\n        // Top-level bus interface navigation\n        if (key === \"j\" || e.key === \"ArrowDown\") {\n          e.preventDefault();\n          setSelectedIndex((prev) =>\n            Math.min(prev + 1, busInterfaces.length - 1),\n          );\n          setSelectedPortIndex(0); // Reset port selection\n        } else if (key === \"k\" || e.key === \"ArrowUp\") {\n          e.preventDefault();\n          setSelectedIndex((prev) => Math.max(prev - 1, 0));\n          setSelectedPortIndex(0); // Reset port selection\n        } else if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          toggleExpand(selectedIndex);\n          setSelectedPortIndex(0); // Reset port selection when expanding\n        } else if (key === \"g\") {\n          e.preventDefault();\n          setSelectedIndex(0);\n        } else if (e.key === \"G\" && e.shiftKey) {\n          e.preventDefault();\n          setSelectedIndex(busInterfaces.length - 1);\n        } else if (key === \"0\") {\n          e.preventDefault();\n          toggleExpandAll();\n        } else if (key === \"d\" && e.ctrlKey) {\n          // Delete bus interface with Ctrl+D\n          e.preventDefault();\n          removeBusInterface(selectedIndex);\n        }\n      }\n    };\n\n    container.addEventListener(\"keydown\", handleKeyDown);\n    return () => container.removeEventListener(\"keydown\", handleKeyDown);\n  }, [\n    busInterfaces,\n    busLibrary,\n    selectedIndex,\n    selectedPortIndex,\n    selectedColumn,\n    expandedIndexes,\n    toggleExpand,\n    toggleExpandAll,\n    editingPortName,\n    editingPrefix,\n    editingPortWidth,\n    editingArrayField,\n    editingBusField,\n    startEditPortName,\n    startEditPortWidth,\n    removeBusInterface,\n  ]);\n\n  // Auto-expand/scroll to highlighted element\n  useEffect(() => {\n    if (highlight && highlight.entityName) {\n      const index = busInterfaces.findIndex(\n        (b) => b.name === highlight.entityName,\n      );\n      if (index !== -1) {\n        setSelectedIndex(index);\n        setExpandedIndexes((prev) => new Set(prev).add(index));\n\n        // If it's the top level bus, ensure it's in view\n        const container = containerRef.current;\n        if (container) {\n          // Simple scroll attempt - in a real list we might need ref to specific item\n          // but since we don't have refs for each item easily, we'll let user find it via selection\n          // The selection logic helps.\n        }\n      }\n    }\n  }, [highlight, busInterfaces]);\n\n  const isExpanded = (index: number) => expandedIndexes.has(index);\n\n  // Scroll Bus Interface into view\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {return;}\n    requestAnimationFrame(() => {\n      const el = container.querySelector(`[data-bus-index=\"${selectedIndex}\"]`);\n      el?.scrollIntoView({ block: \"nearest\" });\n    });\n  }, [selectedIndex]);\n\n  // Scroll Port into view\n  useEffect(() => {\n    if (!expandedIndexes.has(selectedIndex)) {return;}\n    const container = containerRef.current;\n    if (!container) {return;}\n    requestAnimationFrame(() => {\n      const busEl = container.querySelector(\n        `[data-bus-index=\"${selectedIndex}\"]`,\n      );\n      const portEl = busEl?.querySelector(\n        `[data-port-index=\"${selectedPortIndex}\"]`,\n      );\n      portEl?.scrollIntoView({ block: \"nearest\" });\n    });\n  }, [selectedPortIndex, selectedIndex, expandedIndexes]);\n\n  const getClockInfo = (clockName: string) =>\n    clocks.find((c) => c.name === clockName);\n  const getResetInfo = (resetName: string) =>\n    resets.find((r) => r.name === resetName);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"p-6 space-y-4\"\n      tabIndex={0}\n      style={{ outline: \"none\" }}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-medium\">Bus Interfaces</h2>\n          <p className=\"text-sm mt-1\" style={TEXT_STYLES.muted}>\n            {busInterfaces.length} interface(s) ·{\" \"}\n            <span style={{ fontFamily: \"monospace\", fontSize: \"11px\" }}>\n              j/k navigate · Space expand · h/l column · e edit · 0 toggle all\n            </span>\n          </p>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={addBusInterface}\n            className=\"px-3 py-1.5 rounded text-sm flex items-center gap-2\"\n            style={{\n              background: \"var(--vscode-button-background)\",\n              color: \"var(--vscode-button-foreground)\",\n            }}\n          >\n            <span className=\"codicon codicon-add\"></span>\n            Add Interface\n          </button>\n          <button\n            onClick={toggleExpandAll}\n            className=\"px-3 py-1.5 rounded text-sm flex items-center gap-2\"\n            style={{\n              background: \"var(--vscode-button-secondaryBackground)\",\n              color: \"var(--vscode-button-secondaryForeground)\",\n            }}\n          >\n            <span\n              className={`codicon codicon-${expandAll ? \"collapse-all\" : \"expand-all\"}`}\n            ></span>\n            {expandAll ? \"Collapse All\" : \"Expand All\"}\n          </button>\n        </div>\n      </div>\n\n      {/* Interface list */}\n      {busInterfaces.length === 0 ? (\n        <div\n          className=\"p-8 text-center rounded text-sm\"\n          style={{\n            background: \"var(--vscode-editor-background)\",\n            border: \"1px solid var(--vscode-panel-border)\",\n            ...TEXT_STYLES.muted,\n          }}\n        >\n          No bus interfaces defined.\n        </div>\n      ) : (\n        <div className=\"space-y-2\">\n          {busInterfaces.map((bus, index) => {\n            const isSelected = selectedIndex === index;\n            const expanded = isExpanded(index);\n            const ports = getEffectivePorts(bus, busLibrary);\n            const clockInfo = bus.associatedClock\n              ? getClockInfo(bus.associatedClock)\n              : null;\n            const resetInfo = bus.associatedReset\n              ? getResetInfo(bus.associatedReset)\n              : null;\n\n            return (\n              <div\n                key={index}\n                data-bus-index={index}\n                className=\"rounded overflow-hidden\"\n                style={{ border: \"1px solid var(--vscode-panel-border)\" }}\n              >\n                {/* Header row */}\n                <div\n                  onClick={() => {\n                    setSelectedIndex(index);\n                    containerRef.current?.focus();\n                  }}\n                  onDoubleClick={() => toggleExpand(index)}\n                  className=\"flex items-center gap-3 px-4 py-3 cursor-pointer group\"\n                  style={{\n                    background: isSelected\n                      ? \"var(--vscode-list-activeSelectionBackground)\"\n                      : \"var(--vscode-editor-background)\",\n                  }}\n                >\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      toggleExpand(index);\n                    }}\n                    className=\"p-0.5\"\n                  >\n                    <span\n                      className={`codicon codicon-chevron-${expanded ? \"down\" : \"right\"}`}\n                    ></span>\n                  </button>\n\n                  <div className=\"flex-1 min-w-0\">\n                    {/* Name and badges */}\n                    <div className=\"flex items-center gap-2 flex-wrap\">\n                      {/* Name Editing */}\n                      {editingBusField?.busIndex === index &&\n                      editingBusField?.field === \"name\" ? (\n                        <div className=\"flex items-center gap-1\">\n                          <input\n                            type=\"text\"\n                            value={draftBusValue}\n                            onChange={(e) => setDraftBusValue(e.target.value)}\n                            className=\"px-1 py-0.5 rounded text-sm font-semibold\"\n                            style={{\n                              background: \"var(--vscode-input-background)\",\n                              border: \"1px solid var(--vscode-input-border)\",\n                              color: \"var(--vscode-input-foreground)\",\n                              outline: \"none\",\n                              width: \"200px\",\n                            }}\n                            autoFocus\n                            onClick={(e) => e.stopPropagation()}\n                            onKeyDown={(e) => {\n                              e.stopPropagation();\n                              if (e.key === \"Enter\") {\n                                saveBusField(index);\n                              } else if (e.key === \"Escape\") {\n                                cancelEditBusField();\n                              }\n                            }}\n                          />\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              saveBusField(index);\n                            }}\n                            className=\"px-1 py-0.5 rounded text-xs\"\n                            style={{\n                              background: \"var(--vscode-button-background)\",\n                              color: \"var(--vscode-button-foreground)\",\n                            }}\n                          >\n                            ✓\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              cancelEditBusField();\n                            }}\n                            className=\"px-1 py-0.5 rounded text-xs\"\n                            style={{\n                              background:\n                                \"var(--vscode-button-secondaryBackground)\",\n                              color: \"var(--vscode-button-secondaryForeground)\",\n                            }}\n                          >\n                            ✗\n                          </button>\n                        </div>\n                      ) : (\n                        <span\n                          className=\"text-sm font-semibold cursor-pointer hover:underline decoration-dotted\"\n                          style={TEXT_STYLES.value}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            startEditBusField(index, \"name\", bus.name);\n                          }}\n                          title=\"Click to edit name\"\n                        >\n                          {bus.name}\n                        </span>\n                      )}\n\n                      {/* Type Editing */}\n                      {editingBusField?.busIndex === index &&\n                      editingBusField?.field === \"type\" ? (\n                        <select\n                          value={draftBusValue}\n                          onChange={(e) => saveBusField(index, e.target.value)}\n                          className=\"px-1 py-0.5 rounded text-xs\"\n                          style={{\n                            background: \"var(--vscode-input-background)\",\n                            border: \"1px solid var(--vscode-input-border)\",\n                            color: \"var(--vscode-input-foreground)\",\n                            outline: \"none\",\n                          }}\n                          onClick={(e) => e.stopPropagation()}\n                          onKeyDown={(e) => {\n                            e.stopPropagation();\n                            if (e.key === \"Escape\") {\n                              cancelEditBusField();\n                            }\n                          }}\n                          onBlur={() => cancelEditBusField()}\n                          autoFocus\n                        >\n                          {busLibrary &&\n                            Object.keys(busLibrary).map((type) => (\n                              <option key={type} value={type}>\n                                {type}\n                              </option>\n                            ))}\n                        </select>\n                      ) : (\n                        <span\n                          className=\"px-1.5 py-0.5 rounded text-xs cursor-pointer hover:opacity-80\"\n                          style={{\n                            background: \"var(--vscode-badge-background)\",\n                            color: \"var(--vscode-badge-foreground)\",\n                          }}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            startEditBusField(index, \"type\", bus.type);\n                          }}\n                          title=\"Click to change type\"\n                        >\n                          {bus.type}\n                        </span>\n                      )}\n\n                      {/* Mode Editing */}\n                      {editingBusField?.busIndex === index &&\n                      editingBusField?.field === \"mode\" ? (\n                        <select\n                          value={draftBusValue}\n                          onChange={(e) => saveBusField(index, e.target.value)}\n                          className=\"px-1 py-0.5 rounded text-xs\"\n                          style={{\n                            background: \"var(--vscode-input-background)\",\n                            border: \"1px solid var(--vscode-input-border)\",\n                            color: \"var(--vscode-input-foreground)\",\n                            outline: \"none\",\n                          }}\n                          onClick={(e) => e.stopPropagation()}\n                          onKeyDown={(e) => {\n                            e.stopPropagation();\n                            if (e.key === \"Escape\") {\n                              cancelEditBusField();\n                            }\n                          }}\n                          onBlur={() => cancelEditBusField()}\n                          autoFocus\n                        >\n                          <option value=\"master\">master</option>\n                          <option value=\"slave\">slave</option>\n                          <option value=\"monitor\">monitor</option>\n                        </select>\n                      ) : (\n                        <span\n                          className=\"text-sm cursor-pointer hover:underline decoration-dotted\"\n                          style={TEXT_STYLES.muted}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            startEditBusField(index, \"mode\", bus.mode);\n                          }}\n                          title=\"Click to change mode\"\n                        >\n                          {bus.mode}\n                        </span>\n                      )}\n\n                      {bus.array && (\n                        <span\n                          className=\"text-xs px-1 rounded\"\n                          style={{\n                            background: \"var(--vscode-badge-background)\",\n                            color: \"var(--vscode-badge-foreground)\",\n                          }}\n                        >\n                          [{bus.array.count}]\n                        </span>\n                      )}\n                    </div>\n                    {/* Clock, Reset, Ports info */}\n                    <div\n                      className=\"flex items-center gap-4 mt-1 text-sm\"\n                      style={TEXT_STYLES.muted}\n                    >\n                      {bus.associatedClock && (\n                        <span\n                          title={`Port: ${clockInfo?.physicalPort || \"N/A\"}\\nFrequency: ${clockInfo?.frequency || \"N/A\"}`}\n                          style={{ cursor: \"help\" }}\n                        >\n                          <span style={TEXT_STYLES.label}>Clock:</span>{\" \"}\n                          <span style={TEXT_STYLES.value}>\n                            {bus.associatedClock}\n                          </span>\n                          {clockInfo?.frequency && (\n                            <span style={TEXT_STYLES.muted}>\n                              {\" \"}\n                              ({clockInfo.frequency})\n                            </span>\n                          )}\n                        </span>\n                      )}\n                      {bus.associatedReset && (\n                        <span\n                          title={`Port: ${resetInfo?.physicalPort || \"N/A\"}\\nPolarity: ${resetInfo?.polarity || \"N/A\"}`}\n                          style={{ cursor: \"help\" }}\n                        >\n                          <span style={TEXT_STYLES.label}>Reset:</span>{\" \"}\n                          <span style={TEXT_STYLES.value}>\n                            {bus.associatedReset}\n                          </span>\n                          {resetInfo?.polarity && (\n                            <span style={TEXT_STYLES.muted}>\n                              {\" \"}\n                              ({resetInfo.polarity})\n                            </span>\n                          )}\n                        </span>\n                      )}\n                      <span>{ports.length} ports</span>\n                    </div>\n                  </div>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      removeBusInterface(index);\n                    }}\n                    className=\"p-1 rounded opacity-60 hover:opacity-100 hover:bg-vscode-toolbar-hoverBackground transition-opacity\"\n                    title=\"Delete Bus Interface\"\n                    style={{ color: \"var(--vscode-list-errorForeground)\" }}\n                  >\n                    <span className=\"codicon codicon-trash\"></span>\n                  </button>\n                </div>\n\n                {/* Expanded content */}\n                {expanded && (\n                  <div\n                    style={{\n                      borderTop: \"1px solid var(--vscode-panel-border)\",\n                    }}\n                  >\n                    {/* Prefix editor */}\n                    <div\n                      className=\"px-4 py-2 flex items-center gap-3 text-sm\"\n                      style={{ background: \"var(--vscode-editor-background)\" }}\n                    >\n                      <span style={{ ...TEXT_STYLES.label, minWidth: \"50px\" }}>\n                        Prefix:\n                      </span>\n                      {editingPrefix === index ? (\n                        <div className=\"flex items-center gap-2 flex-1\">\n                          <input\n                            type=\"text\"\n                            value={draftPrefix}\n                            onChange={(e) => setDraftPrefix(e.target.value)}\n                            className=\"px-2 py-1 rounded flex-1\"\n                            style={{\n                              ...TEXT_STYLES.value,\n                              background: \"var(--vscode-input-background)\",\n                              border: \"1px solid var(--vscode-input-border)\",\n                              color: \"var(--vscode-input-foreground)\",\n                              outline: \"none\",\n                            }}\n                            placeholder=\"e.g., s_axi_\"\n                            autoFocus\n                            onKeyDown={(e) => {\n                              if (e.key === \"Enter\") {\n                                e.preventDefault();\n                                savePrefix(index);\n                              } else if (e.key === \"Escape\") {\n                                e.preventDefault();\n                                cancelEditPrefix();\n                              }\n                            }}\n                          />\n                          <button\n                            onClick={() => savePrefix(index)}\n                            className=\"px-2 py-1 rounded text-sm\"\n                            style={{\n                              background: \"var(--vscode-button-background)\",\n                              color: \"var(--vscode-button-foreground)\",\n                            }}\n                          >\n                            Save\n                          </button>\n                          <button\n                            onClick={cancelEditPrefix}\n                            className=\"px-2 py-1 rounded text-sm\"\n                            style={{\n                              background:\n                                \"var(--vscode-button-secondaryBackground)\",\n                              color: \"var(--vscode-button-secondaryForeground)\",\n                            }}\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center gap-2 flex-1\">\n                          <span style={TEXT_STYLES.value}>\n                            {bus.physicalPrefix || (\n                              <span style={TEXT_STYLES.muted}>not set</span>\n                            )}\n                          </span>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              startEditPrefix(index, bus.physicalPrefix || \"\");\n                            }}\n                            className=\"p-1 rounded\"\n                            title=\"Edit prefix\"\n                          >\n                            <span\n                              className=\"codicon codicon-edit\"\n                              style={{ fontSize: \"12px\" }}\n                            ></span>\n                          </button>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Associated Clock & Reset */}\n                    <div\n                      className=\"px-4 py-2 text-sm grid grid-cols-2 gap-4\"\n                      style={{\n                        background: \"var(--vscode-editor-background)\",\n                        borderTop: \"1px solid var(--vscode-panel-border)\",\n                      }}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <span\n                          style={{ ...TEXT_STYLES.label, minWidth: \"60px\" }}\n                        >\n                          Clock:\n                        </span>\n                        <select\n                          value={bus.associatedClock || \"\"}\n                          onChange={(e) =>\n                            updateAssociation(\n                              index,\n                              \"associatedClock\",\n                              e.target.value,\n                            )\n                          }\n                          className=\"px-2 py-1 rounded flex-1\"\n                          style={{\n                            background: \"var(--vscode-input-background)\",\n                            border:\n                              highlight?.entityName === bus.name &&\n                              highlight?.field === \"associatedClock\"\n                                ? \"1px solid var(--vscode-inputValidation-errorBorder)\"\n                                : \"1px solid var(--vscode-input-border)\",\n                            color: \"var(--vscode-input-foreground)\",\n                            outline: \"none\",\n                            fontSize: \"inherit\",\n                            boxShadow:\n                              highlight?.entityName === bus.name &&\n                              highlight?.field === \"associatedClock\"\n                                ? \"0 0 0 1px var(--vscode-inputValidation-errorBorder)\"\n                                : \"none\",\n                          }}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <option value=\"\">None</option>\n                          {clocks.map((c) => (\n                            <option key={c.name} value={c.name}>\n                              {c.name}\n                              {c.frequency ? ` (${c.frequency})` : \"\"}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span\n                          style={{ ...TEXT_STYLES.label, minWidth: \"60px\" }}\n                        >\n                          Reset:\n                        </span>\n                        <select\n                          value={bus.associatedReset || \"\"}\n                          onChange={(e) =>\n                            updateAssociation(\n                              index,\n                              \"associatedReset\",\n                              e.target.value,\n                            )\n                          }\n                          className=\"px-2 py-1 rounded flex-1\"\n                          style={{\n                            background: \"var(--vscode-input-background)\",\n                            border:\n                              highlight?.entityName === bus.name &&\n                              highlight?.field === \"associatedReset\"\n                                ? \"1px solid var(--vscode-inputValidation-errorBorder)\"\n                                : \"1px solid var(--vscode-input-border)\",\n                            color: \"var(--vscode-input-foreground)\",\n                            outline: \"none\",\n                            fontSize: \"inherit\",\n                            boxShadow:\n                              highlight?.entityName === bus.name &&\n                              highlight?.field === \"associatedReset\"\n                                ? \"0 0 0 1px var(--vscode-inputValidation-errorBorder)\"\n                                : \"none\",\n                          }}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <option value=\"\">None</option>\n                          {resets.map((r) => (\n                            <option key={r.name} value={r.name}>\n                              {r.name}\n                              {r.polarity ? ` (${r.polarity})` : \"\"}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n\n                    {/* Optional Ports */}\n                    {(() => {\n                      const optionalPorts = getOptionalPorts(bus);\n                      if (optionalPorts.length === 0) {\n                        return null;\n                      }\n                      const enabledPorts = bus.useOptionalPorts || [];\n                      return (\n                        <div\n                          className=\"px-4 py-2 text-sm\"\n                          style={{\n                            background: \"var(--vscode-editor-background)\",\n                            borderTop: \"1px solid var(--vscode-panel-border)\",\n                          }}\n                        >\n                          <div\n                            className=\"font-medium mb-2\"\n                            style={TEXT_STYLES.label}\n                          >\n                            Optional Ports\n                          </div>\n                          <div className=\"flex flex-wrap gap-3\">\n                            {optionalPorts.map((port) => {\n                              const isEnabled = enabledPorts.includes(\n                                port.name,\n                              );\n                              return (\n                                <label\n                                  key={port.name}\n                                  className=\"flex items-center gap-1.5 cursor-pointer\"\n                                  title={`Width: ${port.width || 1}, Dir: ${port.direction || \"N/A\"}`}\n                                >\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={isEnabled}\n                                    onChange={() =>\n                                      toggleOptionalPort(\n                                        index,\n                                        port.name,\n                                        isEnabled,\n                                      )\n                                    }\n                                    onClick={(e) => e.stopPropagation()}\n                                    style={{\n                                      accentColor: \"var(--vscode-focusBorder)\",\n                                    }}\n                                  />\n                                  <span\n                                    style={{\n                                      ...TEXT_STYLES.value,\n                                      color: isEnabled\n                                        ? undefined\n                                        : \"var(--vscode-input-placeholderForeground)\",\n                                    }}\n                                  >\n                                    {port.name}\n                                  </span>\n                                </label>\n                              );\n                            })}\n                          </div>\n                        </div>\n                      );\n                    })()}\n\n                    {/* Memory Map */}\n                    <div\n                      className=\"px-4 py-2 text-sm\"\n                      style={{\n                        background: \"var(--vscode-editor-background)\",\n                        borderTop: \"1px solid var(--vscode-panel-border)\",\n                      }}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <span style={TEXT_STYLES.label}>Memory Map:</span>\n                        <div className=\"flex-1\">\n                          {(() => {\n                            const availableMaps = imports?.memoryMaps || [];\n                            // Also check if current value is a file path (legacy/direct)\n                            const isFilePath =\n                              bus.memoryMapRef &&\n                              (bus.memoryMapRef.endsWith(\".yml\") ||\n                                bus.memoryMapRef.endsWith(\".yaml\"));\n\n                            return (\n                              <div className=\"flex items-center gap-2\">\n                                <select\n                                  value={bus.memoryMapRef || \"\"}\n                                  onChange={(e) =>\n                                    onUpdate(\n                                      [\"busInterfaces\", index, \"memoryMapRef\"],\n                                      e.target.value || undefined,\n                                    )\n                                  }\n                                  className=\"flex-1 px-1 py-0.5 rounded\"\n                                  style={{\n                                    ...TEXT_STYLES.value,\n                                    background:\n                                      \"var(--vscode-input-background)\",\n                                    border:\n                                      \"1px solid var(--vscode-input-border)\",\n                                    color: \"var(--vscode-input-foreground)\",\n                                    outline: \"none\",\n                                    fontSize: \"inherit\",\n                                    boxShadow:\n                                      highlight?.entityName === bus.name &&\n                                      highlight?.field === \"memoryMapRef\"\n                                        ? \"0 0 0 1px var(--vscode-inputValidation-errorBorder)\"\n                                        : \"none\",\n                                  }}\n                                  onClick={(e) => e.stopPropagation()}\n                                >\n                                  <option value=\"\">None</option>\n\n                                  {/* Available Logical Maps */}\n                                  {availableMaps.length > 0 && (\n                                    <optgroup label=\"Detected Maps\">\n                                      {availableMaps.map(\n                                        (map: any, i: number) => (\n                                          <option\n                                            key={map.name || i}\n                                            value={map.name}\n                                          >\n                                            {map.name}\n                                          </option>\n                                        ),\n                                      )}\n                                    </optgroup>\n                                  )}\n\n                                  {/* Preserve existing value if it's not in the list (e.g. file path or unknown ref) */}\n                                  {bus.memoryMapRef &&\n                                    !availableMaps.find(\n                                      (m: any) => m.name === bus.memoryMapRef,\n                                    ) && (\n                                      <option value={bus.memoryMapRef}>\n                                        {bus.memoryMapRef}{\" \"}\n                                        {isFilePath\n                                          ? \"(File Path - Deprecated)\"\n                                          : \"(Unknown)\"}\n                                      </option>\n                                    )}\n                                </select>\n                              </div>\n                            );\n                          })()}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Array Configuration */}\n                    <div\n                      className=\"px-4 py-2 text-sm\"\n                      style={{\n                        background: \"var(--vscode-editor-background)\",\n                        borderTop: \"1px solid var(--vscode-panel-border)\",\n                      }}\n                    >\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"font-medium\" style={TEXT_STYLES.label}>\n                          Array Configuration\n                        </span>\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            toggleArray(index, !!bus.array);\n                          }}\n                          className=\"px-2 py-0.5 rounded text-xs\"\n                          style={{\n                            background:\n                              \"var(--vscode-button-secondaryBackground)\",\n                            color: \"var(--vscode-button-secondaryForeground)\",\n                          }}\n                        >\n                          {bus.array ? \"Remove Array\" : \"Add Array\"}\n                        </button>\n                      </div>\n                      {bus.array && (\n                        <div className=\"grid grid-cols-2 gap-x-4 gap-y-2\">\n                          {/* Count */}\n                          <div className=\"flex items-center gap-2\">\n                            <span style={TEXT_STYLES.label}>Count:</span>\n                            {editingArrayField?.busIndex === index &&\n                            editingArrayField?.field === \"count\" ? (\n                              <div className=\"flex items-center gap-1\">\n                                <input\n                                  type=\"number\"\n                                  value={draftArrayValue}\n                                  onChange={(e) =>\n                                    setDraftArrayValue(e.target.value)\n                                  }\n                                  className=\"px-1 py-0.5 rounded\"\n                                  style={{\n                                    ...TEXT_STYLES.value,\n                                    background:\n                                      \"var(--vscode-input-background)\",\n                                    border:\n                                      \"1px solid var(--vscode-input-border)\",\n                                    color: \"var(--vscode-input-foreground)\",\n                                    outline: \"none\",\n                                    fontSize: \"inherit\",\n                                    width: \"50px\",\n                                  }}\n                                  autoFocus\n                                  min=\"1\"\n                                  onKeyDown={(e) => {\n                                    e.stopPropagation();\n                                    if (e.key === \"Enter\") {\n                                      e.preventDefault();\n                                      saveArrayField(index);\n                                    } else if (e.key === \"Escape\") {\n                                      e.preventDefault();\n                                      cancelEditArrayField();\n                                    }\n                                  }}\n                                />\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    saveArrayField(index);\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-background)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✓\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    cancelEditArrayField();\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-secondaryBackground)\",\n                                    color:\n                                      \"var(--vscode-button-secondaryForeground)\",\n                                  }}\n                                >\n                                  ✗\n                                </button>\n                              </div>\n                            ) : (\n                              <span\n                                onClick={() =>\n                                  startEditArrayField(\n                                    index,\n                                    \"count\",\n                                    bus.array!.count,\n                                  )\n                                }\n                                className=\"cursor-pointer\"\n                                style={{\n                                  ...TEXT_STYLES.value,\n                                  textDecoration: \"underline\",\n                                  textDecorationStyle: \"dotted\",\n                                }}\n                                title=\"Click to edit\"\n                              >\n                                {bus.array.count}\n                              </span>\n                            )}\n                          </div>\n                          {/* Index Start */}\n                          <div className=\"flex items-center gap-2\">\n                            <span style={TEXT_STYLES.label}>Index Start:</span>\n                            {editingArrayField?.busIndex === index &&\n                            editingArrayField?.field === \"indexStart\" ? (\n                              <div className=\"flex items-center gap-1\">\n                                <input\n                                  type=\"number\"\n                                  value={draftArrayValue}\n                                  onChange={(e) =>\n                                    setDraftArrayValue(e.target.value)\n                                  }\n                                  className=\"px-1 py-0.5 rounded\"\n                                  style={{\n                                    ...TEXT_STYLES.value,\n                                    background:\n                                      \"var(--vscode-input-background)\",\n                                    border:\n                                      \"1px solid var(--vscode-input-border)\",\n                                    color: \"var(--vscode-input-foreground)\",\n                                    outline: \"none\",\n                                    fontSize: \"inherit\",\n                                    width: \"50px\",\n                                  }}\n                                  autoFocus\n                                  min=\"0\"\n                                  onKeyDown={(e) => {\n                                    e.stopPropagation();\n                                    if (e.key === \"Enter\") {\n                                      e.preventDefault();\n                                      saveArrayField(index);\n                                    } else if (e.key === \"Escape\") {\n                                      e.preventDefault();\n                                      cancelEditArrayField();\n                                    }\n                                  }}\n                                />\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    saveArrayField(index);\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-background)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✓\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    cancelEditArrayField();\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-secondaryBackground)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✗\n                                </button>\n                              </div>\n                            ) : (\n                              <span\n                                onClick={() =>\n                                  startEditArrayField(\n                                    index,\n                                    \"indexStart\",\n                                    bus.array!.indexStart ?? 0,\n                                  )\n                                }\n                                className=\"cursor-pointer\"\n                                style={{\n                                  ...TEXT_STYLES.value,\n                                  textDecoration: \"underline\",\n                                  textDecorationStyle: \"dotted\",\n                                }}\n                                title=\"Click to edit\"\n                              >\n                                {bus.array.indexStart ?? 0}\n                              </span>\n                            )}\n                          </div>\n                          {/* Naming Pattern */}\n                          <div className=\"col-span-2 flex items-center gap-2\">\n                            <span style={TEXT_STYLES.label}>\n                              Naming Pattern:\n                            </span>\n                            {editingArrayField?.busIndex === index &&\n                            editingArrayField?.field === \"namingPattern\" ? (\n                              <div className=\"flex items-center gap-1 flex-1\">\n                                <input\n                                  type=\"text\"\n                                  value={draftArrayValue}\n                                  onChange={(e) =>\n                                    setDraftArrayValue(e.target.value)\n                                  }\n                                  className=\"px-1 py-0.5 rounded flex-1\"\n                                  style={{\n                                    ...TEXT_STYLES.value,\n                                    background:\n                                      \"var(--vscode-input-background)\",\n                                    border:\n                                      \"1px solid var(--vscode-input-border)\",\n                                    color: \"var(--vscode-input-foreground)\",\n                                    outline: \"none\",\n                                    fontSize: \"inherit\",\n                                  }}\n                                  autoFocus\n                                  placeholder=\"e.g., NAME_{index}\"\n                                  onKeyDown={(e) => {\n                                    e.stopPropagation();\n                                    if (e.key === \"Enter\") {\n                                      e.preventDefault();\n                                      saveArrayField(index);\n                                    } else if (e.key === \"Escape\") {\n                                      e.preventDefault();\n                                      cancelEditArrayField();\n                                    }\n                                  }}\n                                />\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    saveArrayField(index);\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-background)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✓\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    cancelEditArrayField();\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-secondaryBackground)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✗\n                                </button>\n                              </div>\n                            ) : (\n                              <span\n                                onClick={() =>\n                                  startEditArrayField(\n                                    index,\n                                    \"namingPattern\",\n                                    bus.array!.namingPattern || \"\",\n                                  )\n                                }\n                                className=\"cursor-pointer\"\n                                style={{\n                                  ...TEXT_STYLES.value,\n                                  textDecoration: \"underline\",\n                                  textDecorationStyle: \"dotted\",\n                                  color: bus.array.namingPattern\n                                    ? undefined\n                                    : \"var(--vscode-input-placeholderForeground)\",\n                                }}\n                                title=\"Click to edit\"\n                              >\n                                {bus.array.namingPattern || \"not set\"}\n                              </span>\n                            )}\n                          </div>\n                          {/* Physical Prefix Pattern */}\n                          <div className=\"col-span-2 flex items-center gap-2\">\n                            <span style={TEXT_STYLES.label}>\n                              Prefix Pattern:\n                            </span>\n                            {editingArrayField?.busIndex === index &&\n                            editingArrayField?.field ===\n                              \"physicalPrefixPattern\" ? (\n                              <div className=\"flex items-center gap-1 flex-1\">\n                                <input\n                                  type=\"text\"\n                                  value={draftArrayValue}\n                                  onChange={(e) =>\n                                    setDraftArrayValue(e.target.value)\n                                  }\n                                  className=\"px-1 py-0.5 rounded flex-1\"\n                                  style={{\n                                    ...TEXT_STYLES.value,\n                                    background:\n                                      \"var(--vscode-input-background)\",\n                                    border:\n                                      \"1px solid var(--vscode-input-border)\",\n                                    color: \"var(--vscode-input-foreground)\",\n                                    outline: \"none\",\n                                    fontSize: \"inherit\",\n                                  }}\n                                  autoFocus\n                                  placeholder=\"e.g., prefix_{index}_\"\n                                  onKeyDown={(e) => {\n                                    e.stopPropagation();\n                                    if (e.key === \"Enter\") {\n                                      e.preventDefault();\n                                      saveArrayField(index);\n                                    } else if (e.key === \"Escape\") {\n                                      e.preventDefault();\n                                      cancelEditArrayField();\n                                    }\n                                  }}\n                                />\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    saveArrayField(index);\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-background)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✓\n                                </button>\n                                <button\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    cancelEditArrayField();\n                                  }}\n                                  className=\"px-1 py-0.5 rounded text-xs\"\n                                  style={{\n                                    background:\n                                      \"var(--vscode-button-secondaryBackground)\",\n                                    color: \"var(--vscode-button-foreground)\",\n                                  }}\n                                >\n                                  ✗\n                                </button>\n                              </div>\n                            ) : (\n                              <span\n                                onClick={() =>\n                                  startEditArrayField(\n                                    index,\n                                    \"physicalPrefixPattern\",\n                                    bus.array!.physicalPrefixPattern || \"\",\n                                  )\n                                }\n                                className=\"cursor-pointer\"\n                                style={{\n                                  ...TEXT_STYLES.value,\n                                  textDecoration: \"underline\",\n                                  textDecorationStyle: \"dotted\",\n                                  color: bus.array.physicalPrefixPattern\n                                    ? undefined\n                                    : \"var(--vscode-input-placeholderForeground)\",\n                                }}\n                                title=\"Click to edit\"\n                              >\n                                {bus.array.physicalPrefixPattern || \"not set\"}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Ports table */}\n                    {ports.length > 0 ? (\n                      <table\n                        className=\"w-full text-sm\"\n                        style={{\n                          borderTop: \"1px solid var(--vscode-panel-border)\",\n                        }}\n                      >\n                        <thead>\n                          <tr\n                            style={{\n                              background: \"var(--vscode-editor-background)\",\n                            }}\n                          >\n                            <th\n                              className=\"px-4 py-2 text-left font-medium\"\n                              style={TEXT_STYLES.label}\n                            >\n                              Logical Name\n                            </th>\n                            <th\n                              className=\"px-4 py-2 text-left font-medium\"\n                              style={TEXT_STYLES.label}\n                            >\n                              Physical Name\n                            </th>\n                            <th\n                              className=\"px-4 py-2 text-left font-medium\"\n                              style={TEXT_STYLES.label}\n                            >\n                              Width\n                            </th>\n                            <th\n                              className=\"px-4 py-2 text-left font-medium\"\n                              style={TEXT_STYLES.label}\n                            >\n                              Dir\n                            </th>\n                            <th\n                              className=\"px-4 py-2 text-left font-medium\"\n                              style={TEXT_STYLES.label}\n                            >\n                              Presence\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {ports.map((port, pIdx) => {\n                            const portSuffix = getPortSuffix(bus, port.name);\n                            const physicalName = getPhysicalName(\n                              bus,\n                              port.name,\n                            );\n                            const isEditingThisPortName =\n                              editingPortName?.busIndex === index &&\n                              editingPortName?.portName === port.name;\n                            const isEditingThisPortWidth =\n                              editingPortWidth?.busIndex === index &&\n                              editingPortWidth?.portName === port.name;\n                            const hasNameOverride =\n                              bus.portNameOverrides?.[port.name];\n                            const hasWidthOverride =\n                              bus.portWidthOverrides?.[port.name];\n                            const isSelectedRow =\n                              isSelected && selectedPortIndex === pIdx;\n                            const defaultWidth =\n                              busLibrary?.[bus.type]?.ports?.find(\n                                (p) => p.name === port.name,\n                              )?.width || 1;\n\n                            return (\n                              <tr\n                                key={pIdx}\n                                data-port-index={pIdx}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setSelectedIndex(index);\n                                  setSelectedPortIndex(pIdx);\n                                  containerRef.current?.focus();\n                                }}\n                                style={{\n                                  borderTop:\n                                    \"1px solid var(--vscode-panel-border)\",\n                                  background: isSelectedRow\n                                    ? \"var(--vscode-list-activeSelectionBackground)\"\n                                    : pIdx % 2 === 0\n                                      ? \"transparent\"\n                                      : \"var(--vscode-editor-background)\",\n                                }}\n                              >\n                                <td\n                                  className=\"px-4 py-1.5\"\n                                  style={TEXT_STYLES.value}\n                                >\n                                  {port.name}\n                                </td>\n                                <td\n                                  className=\"px-4 py-1.5\"\n                                  style={{\n                                    outline:\n                                      isSelectedRow &&\n                                      selectedColumn === \"name\" &&\n                                      !isEditingThisPortName\n                                        ? \"1px solid var(--vscode-focusBorder)\"\n                                        : undefined,\n                                    outlineOffset: \"-1px\",\n                                  }}\n                                >\n                                  {isEditingThisPortName ? (\n                                    <div className=\"flex items-center gap-1\">\n                                      <span\n                                        style={{\n                                          ...TEXT_STYLES.value,\n                                          ...TEXT_STYLES.muted,\n                                        }}\n                                      >\n                                        {bus.physicalPrefix || \"\"}\n                                      </span>\n                                      <input\n                                        type=\"text\"\n                                        value={draftPortName}\n                                        onChange={(e) =>\n                                          setDraftPortName(e.target.value)\n                                        }\n                                        className=\"px-1 py-0.5 rounded\"\n                                        style={{\n                                          ...TEXT_STYLES.value,\n                                          background:\n                                            \"var(--vscode-input-background)\",\n                                          border:\n                                            \"1px solid var(--vscode-input-border)\",\n                                          color:\n                                            \"var(--vscode-input-foreground)\",\n                                          outline: \"none\",\n                                          fontSize: \"inherit\",\n                                          minWidth: \"80px\",\n                                        }}\n                                        autoFocus\n                                        onKeyDown={(e) => {\n                                          e.stopPropagation();\n                                          if (e.key === \"Enter\") {\n                                            e.preventDefault();\n                                            savePortName(index, port.name);\n                                          } else if (e.key === \"Escape\") {\n                                            e.preventDefault();\n                                            cancelEditPortName();\n                                          }\n                                        }}\n                                      />\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          savePortName(index, port.name);\n                                        }}\n                                        className=\"px-1.5 py-0.5 rounded text-xs\"\n                                        style={{\n                                          background:\n                                            \"var(--vscode-button-background)\",\n                                          color:\n                                            \"var(--vscode-button-foreground)\",\n                                        }}\n                                      >\n                                        ✓\n                                      </button>\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          cancelEditPortName();\n                                        }}\n                                        className=\"px-1.5 py-0.5 rounded text-xs\"\n                                        style={{\n                                          background:\n                                            \"var(--vscode-button-secondaryBackground)\",\n                                          color:\n                                            \"var(--vscode-button-foreground)\",\n                                        }}\n                                      >\n                                        ✗\n                                      </button>\n                                    </div>\n                                  ) : (\n                                    <span\n                                      onClick={() =>\n                                        startEditPortName(\n                                          index,\n                                          port.name,\n                                          portSuffix,\n                                        )\n                                      }\n                                      className=\"cursor-pointer\"\n                                      title=\"Click to edit suffix (or press e)\"\n                                    >\n                                      <span style={TEXT_STYLES.muted}>\n                                        {bus.physicalPrefix || \"\"}\n                                      </span>\n                                      <span\n                                        style={{\n                                          ...TEXT_STYLES.value,\n                                          color: hasNameOverride\n                                            ? \"var(--vscode-textLink-foreground)\"\n                                            : undefined,\n                                          textDecoration: \"underline\",\n                                          textDecorationStyle: \"dotted\",\n                                        }}\n                                      >\n                                        {portSuffix}\n                                      </span>\n                                    </span>\n                                  )}\n                                </td>\n                                <td\n                                  className=\"px-4 py-1.5\"\n                                  style={{\n                                    outline:\n                                      isSelectedRow &&\n                                      selectedColumn === \"width\" &&\n                                      !isEditingThisPortWidth\n                                        ? \"1px solid var(--vscode-focusBorder)\"\n                                        : undefined,\n                                    outlineOffset: \"-1px\",\n                                  }}\n                                >\n                                  {isEditingThisPortWidth ? (\n                                    <div className=\"flex items-center gap-1\">\n                                      <input\n                                        type=\"number\"\n                                        value={draftPortWidth}\n                                        onChange={(e) =>\n                                          setDraftPortWidth(e.target.value)\n                                        }\n                                        className=\"px-1 py-0.5 rounded\"\n                                        style={{\n                                          ...TEXT_STYLES.value,\n                                          background:\n                                            \"var(--vscode-input-background)\",\n                                          border:\n                                            \"1px solid var(--vscode-input-border)\",\n                                          color:\n                                            \"var(--vscode-input-foreground)\",\n                                          outline: \"none\",\n                                          fontSize: \"inherit\",\n                                          width: \"60px\",\n                                        }}\n                                        autoFocus\n                                        onKeyDown={(e) => {\n                                          e.stopPropagation();\n                                          if (e.key === \"Enter\") {\n                                            e.preventDefault();\n                                            savePortWidth(\n                                              index,\n                                              port.name,\n                                              defaultWidth,\n                                            );\n                                          } else if (e.key === \"Escape\") {\n                                            e.preventDefault();\n                                            cancelEditPortWidth();\n                                          }\n                                        }}\n                                      />\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          savePortWidth(\n                                            index,\n                                            port.name,\n                                            defaultWidth,\n                                          );\n                                        }}\n                                        className=\"px-1.5 py-0.5 rounded text-xs\"\n                                        style={{\n                                          background:\n                                            \"var(--vscode-button-background)\",\n                                          color:\n                                            \"var(--vscode-button-foreground)\",\n                                        }}\n                                      >\n                                        ✓\n                                      </button>\n                                      <button\n                                        onClick={(e) => {\n                                          e.stopPropagation();\n                                          cancelEditPortWidth();\n                                        }}\n                                        className=\"px-1.5 py-0.5 rounded text-xs\"\n                                        style={{\n                                          background:\n                                            \"var(--vscode-button-secondaryBackground)\",\n                                          color:\n                                            \"var(--vscode-button-foreground)\",\n                                        }}\n                                      >\n                                        ✗\n                                      </button>\n                                    </div>\n                                  ) : (\n                                    <span\n                                      onClick={() =>\n                                        startEditPortWidth(\n                                          index,\n                                          port.name,\n                                          port.width || 1,\n                                        )\n                                      }\n                                      className=\"cursor-pointer\"\n                                      style={{\n                                        color: hasWidthOverride\n                                          ? \"var(--vscode-textLink-foreground)\"\n                                          : undefined,\n                                        textDecoration: \"underline\",\n                                        textDecorationStyle: \"dotted\",\n                                      }}\n                                      title=\"Click to edit width (or press e)\"\n                                    >\n                                      {port.width || 1}\n                                    </span>\n                                  )}\n                                </td>\n                                <td className=\"px-4 py-1.5\">\n                                  <span\n                                    style={{\n                                      color:\n                                        port.direction === \"in\"\n                                          ? \"var(--vscode-charts-green)\"\n                                          : port.direction === \"out\"\n                                            ? \"var(--vscode-charts-blue)\"\n                                            : undefined,\n                                    }}\n                                  >\n                                    {port.direction || \"—\"}\n                                  </span>\n                                </td>\n                                <td\n                                  className=\"px-4 py-1.5\"\n                                  style={TEXT_STYLES.muted}\n                                >\n                                  {port.presence}\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    ) : (\n                      <div\n                        className=\"px-4 py-4 text-sm\"\n                        style={{\n                          ...TEXT_STYLES.muted,\n                          borderTop: \"1px solid var(--vscode-panel-border)\",\n                        }}\n                      >\n                        {busLibrary\n                          ? \"No ports defined for this interface type.\"\n                          : \"Bus library not loaded.\"}\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/ClocksTable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":43,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":43,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1098,1100],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":54,"column":21,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":54,"endColumn":23,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1372,1374],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":96,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":96,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeColumn' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":97,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":123,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":123,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3277,3279],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":140,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":140,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3822,3824],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":151,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":151,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4135,4137],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":162,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":162,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4499,4501],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":173,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":173,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4862,4864],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":237,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":237,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7093,7095],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":240,"column":32,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":240,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7237,7239],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport { EditableTable, FormField, SelectField } from \"../../../shared/components\";\nimport {\n  validateVhdlIdentifier,\n  validateUniqueName,\n} from \"../../../shared/utils/validation\";\nimport { useVimTableNavigation } from \"../../hooks/useVimTableNavigation\";\n\ninterface Clock {\n  name: string; // Physical port name\n  logicalName?: string; // Standard logical name (CLK)\n  frequency?: string;\n  direction?: string;\n}\n\ninterface BusInterface {\n  name: string;\n  associatedClock?: string;\n}\n\ninterface ClocksTableProps {\n  clocks: unknown[];\n  busInterfaces?: unknown[];\n  onUpdate: YamlUpdateHandler;\n}\n\nconst createEmptyClock = (): Clock => ({\n  name: \"\",\n  logicalName: \"CLK\",\n  frequency: \"\",\n  direction: \"input\",\n});\n\n// Normalize direction from in/out to input/output\nconst normalizeClock = (clock: Clock): Clock => {\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    input: \"input\",\n    output: \"output\",\n  };\n  return { ...clock, direction: dirMap[clock.direction || \"input\"] || \"input\" };\n};\n\n// Helper to display normalized direction\nconst displayDirection = (dir?: string): string => {\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    input: \"input\",\n    output: \"output\",\n  };\n  return dirMap[dir || \"input\"] || \"input\";\n};\n\nconst COLUMN_KEYS = [\"name\", \"logicalName\", \"frequency\", \"direction\", \"usedBy\"];\nconst TABLE_COLUMNS = [\n  { key: \"name\", header: \"Physical Name\" },\n  { key: \"logicalName\", header: \"Logical Name\" },\n  { key: \"frequency\", header: \"Frequency\" },\n  { key: \"direction\", header: \"Direction\" },\n  { key: \"usedBy\", header: \"Used By\" },\n  { key: \"actions\", header: \"Actions\", align: \"right\" as const },\n];\nconst KEYBOARD_HINT = \"• h/j/k/l: navigate • e: edit • d: delete • o: add\";\n\n// Helper to find which interfaces use a clock\nconst getUsedByInterfaces = (\n  clockName: string,\n  busInterfaces: BusInterface[],\n): string[] => {\n  return busInterfaces\n    .filter((bus) => bus.associatedClock === clockName)\n    .map((bus) => bus.name);\n};\n\n/**\n * Editable table for IP Core clocks\n * Supports vim-style keyboard navigation:\n * - j/k or Arrow Up/Down: Navigate rows\n * - h/l or Arrow Left/Right: Navigate columns\n * - Enter or 'e': Edit selected cell\n * - 'd' or Delete: Delete selected row\n * - 'o': Add new row\n * - Escape: Cancel editing\n */\nexport const ClocksTable: React.FC<ClocksTableProps> = ({\n  clocks: rawClocks,\n  busInterfaces: rawBusInterfaces = [],\n  onUpdate,\n}) => {\n  const clocks = rawClocks as Clock[];\n  const busInterfaces = rawBusInterfaces as BusInterface[];\n  const {\n    selectedIndex,\n    activeColumn,\n    editingIndex,\n    isAdding,\n    draft,\n    setDraft,\n    handleEdit,\n    handleAdd,\n    handleSave,\n    handleCancel,\n    handleDelete,\n    containerRef,\n    getRowProps,\n    getCellProps,\n  } = useVimTableNavigation<Clock>({\n    items: clocks,\n    onUpdate,\n    dataKey: \"clocks\",\n    createEmptyItem: createEmptyClock,\n    normalizeItem: normalizeClock,\n    columnKeys: COLUMN_KEYS,\n  });\n\n  const existingNames = clocks\n    .map((c) => c.name)\n    .filter((_, i) => i !== editingIndex);\n  const nameError =\n    validateVhdlIdentifier(draft.name) ||\n    validateUniqueName(draft.name, existingNames);\n  const canSave = !nameError;\n\n  const renderEditRow = (isNew: boolean) => (\n    <tr\n      style={{\n        background: \"var(--vscode-list-activeSelectionBackground)\",\n        borderBottom: \"1px solid var(--vscode-panel-border)\",\n      }}\n      data-row-idx={editingIndex ?? clocks.length}\n    >\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.name}\n          onChange={(v: string) => setDraft({ ...draft, name: v })}\n          error={nameError || undefined}\n          placeholder=\"i_clk_sys\"\n          required\n          data-edit-key=\"name\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.logicalName || \"CLK\"}\n          onChange={(v: string) => setDraft({ ...draft, logicalName: v })}\n          placeholder=\"CLK\"\n          data-edit-key=\"logicalName\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.frequency || \"\"}\n          onChange={(v: string) => setDraft({ ...draft, frequency: v })}\n          placeholder=\"100 MHz\"\n          data-edit-key=\"frequency\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={draft.direction || \"input\"}\n          options={[\n            { value: \"input\", label: \"input\" },\n            { value: \"output\", label: \"output\" },\n          ]}\n          onChange={(v: string) => setDraft({ ...draft, direction: v })}\n          data-edit-key=\"direction\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3 text-right\">\n        <div className=\"flex items-center justify-end gap-2\">\n          <button\n            onClick={handleSave}\n            disabled={!canSave}\n            className=\"px-3 py-1 rounded text-xs font-medium\"\n            style={{\n              background: canSave\n                ? \"var(--vscode-button-background)\"\n                : \"var(--vscode-button-secondaryBackground)\",\n              color: \"var(--vscode-button-foreground)\",\n              opacity: canSave ? 1 : 0.5,\n            }}\n          >\n            {isNew ? \"Add\" : \"Save\"}\n          </button>\n          <button\n            onClick={handleCancel}\n            className=\"px-3 py-1 rounded text-xs font-medium\"\n            style={{\n              background: \"var(--vscode-button-secondaryBackground)\",\n              color: \"var(--vscode-button-foreground)\",\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </td>\n    </tr>\n  );\n\n  return (\n    <EditableTable\n      title=\"Clocks\"\n      rows={clocks}\n      rowLabelSingular=\"clock\"\n      keyboardHint={KEYBOARD_HINT}\n      addButtonLabel=\"Add Clock\"\n      onAdd={handleAdd}\n      disableAdd={isAdding || editingIndex !== null}\n      columns={TABLE_COLUMNS}\n      editingIndex={editingIndex}\n      isAdding={isAdding}\n      renderEditRow={renderEditRow}\n      renderDisplayRow={(clock, index) => {\n        const rowProps = getRowProps(index);\n        const usedBy = getUsedByInterfaces(clock.name, busInterfaces);\n        return (\n          <tr key={index} {...rowProps} onDoubleClick={() => handleEdit(index)}>\n            <td className=\"px-4 py-3 text-sm font-mono\" {...getCellProps(index, \"name\")}>\n              {clock.name}\n            </td>\n            <td className=\"px-4 py-3 text-sm font-mono\" {...getCellProps(index, \"logicalName\")}>\n              {clock.logicalName || \"CLK\"}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"frequency\")}>\n              {clock.frequency || \"—\"}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"direction\")}>\n              {displayDirection(clock.direction)}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"usedBy\")}>\n              {usedBy.length > 0 ? (\n                <div className=\"flex flex-wrap gap-1\">\n                  {usedBy.map((name, i) => (\n                    <span\n                      key={i}\n                      className=\"px-2 py-0.5 rounded text-xs font-mono\"\n                      style={{\n                        background: \"var(--vscode-badge-background)\",\n                        color: \"var(--vscode-badge-foreground)\",\n                      }}\n                    >\n                      {name}\n                    </span>\n                  ))}\n                </div>\n              ) : (\n                <span style={{ opacity: 0.5 }}>—</span>\n              )}\n            </td>\n            <td className=\"px-4 py-3 text-right\">\n              <div className=\"flex items-center justify-end gap-2\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleEdit(index);\n                  }}\n                  disabled={isAdding || editingIndex !== null}\n                  className=\"p-1 rounded\"\n                  style={{\n                    opacity: isAdding || editingIndex !== null ? 0.3 : 1,\n                  }}\n                  title=\"Edit (e)\"\n                >\n                  <span className=\"codicon codicon-edit\"></span>\n                </button>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDelete(index);\n                  }}\n                  disabled={isAdding || editingIndex !== null}\n                  className=\"p-1 rounded\"\n                  style={{\n                    color: \"var(--vscode-errorForeground)\",\n                    opacity: isAdding || editingIndex !== null ? 0.3 : 1,\n                  }}\n                  title=\"Delete (d)\"\n                >\n                  <span className=\"codicon codicon-trash\"></span>\n                </button>\n              </div>\n            </td>\n          </tr>\n        );\n      }}\n      emptyMessage={'No clocks defined. Press \\'o\\' or click \"Add Clock\" to create one.'}\n      emptyColSpan={6}\n      containerRef={containerRef}\n    />\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/FileSetsEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":84,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":84,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":84,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":84,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":91,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":91,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":92,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .results on an `any` value.","line":92,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":92,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":93,"column":37,"nodeType":"ObjectExpression","messageId":"unsafeReturn","endLine":93,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .results on an `any` value.","line":93,"column":51,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":93,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":109,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":109,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":109,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":109,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":144,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":144,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":144,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":144,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":151,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":151,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":153,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":153,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":154,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":154,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":155,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":155,"endColumn":22},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":177,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":177,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5088,5090],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":182,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":185,"endColumn":12},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":182,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":182,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":182,"column":26,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":182,"endColumn":43},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe spread of an `any` value in an array.","line":187,"column":57,"nodeType":"SpreadElement","messageId":"unsafeArraySpread","endLine":187,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of type any[] to a variable of type FileEntry[].","line":189,"column":41,"nodeType":"Property","messageId":"unsafeAssignment","endLine":189,"endColumn":60},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":324,"column":60,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":324,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10436,10438],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-non-null-assertion","severity":1,"message":"Forbidden non-null assertion.","line":393,"column":53,"nodeType":"TSNonNullExpression","messageId":"noNonNull","endLine":393,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport {\n  FormField,\n  TextAreaField,\n  SelectField,\n} from \"../../../shared/components\";\nimport { validateRequired } from \"../../../shared/utils/validation\";\nimport { vscode } from \"../../../vscode\";\n\ninterface FileEntry {\n  path: string;\n  type: string;\n}\n\ninterface FileSet {\n  name: string;\n  description?: string;\n  files: FileEntry[];\n  import?: string;\n}\n\ninterface FileSetsEditorProps {\n  fileSets: unknown[];\n  onUpdate: YamlUpdateHandler;\n}\n\n/**\n * Editor for IP Core file sets\n * Supports adding/editing file sets and files within them\n */\nexport const FileSetsEditor: React.FC<FileSetsEditorProps> = ({\n  fileSets: rawFileSets,\n  onUpdate,\n}) => {\n  const fileSets = rawFileSets as FileSet[];\n  const [expandedSets, setExpandedSets] = useState<Set<number>>(new Set([0]));\n  const [editingSet, setEditingSet] = useState<number | null>(null);\n  const [editingFile, setEditingFile] = useState<{\n    setIdx: number;\n    fileIdx: number;\n  } | null>(null);\n  const [isAddingSet, setIsAddingSet] = useState(false);\n  const [isAddingFile, setIsAddingFile] = useState<number | null>(null);\n  const [fileExistence, setFileExistence] = useState<{\n    [key: string]: boolean;\n  }>({});\n\n  const [setDraft, setSetDraft] = useState({ name: \"\", description: \"\" });\n  const [fileDraft, setFileDraft] = useState({ path: \"\", type: \"verilog\" });\n\n  const fileTypeOptions = [\n    { value: \"verilog\", label: \"Verilog\" },\n    { value: \"vhdl\", label: \"VHDL\" },\n    { value: \"systemverilog\", label: \"SystemVerilog\" },\n    { value: \"c\", label: \"C\" },\n    { value: \"cpp\", label: \"C++\" },\n    { value: \"tcl\", label: \"TCL\" },\n    { value: \"python\", label: \"Python\" },\n    { value: \"pdf\", label: \"PDF\" },\n    { value: \"text\", label: \"Text\" },\n  ];\n\n  const toggleSet = (idx: number) => {\n    const newExpanded = new Set(expandedSets);\n    if (newExpanded.has(idx)) {\n      newExpanded.delete(idx);\n    } else {\n      newExpanded.add(idx);\n    }\n    setExpandedSets(newExpanded);\n  };\n\n  // Check file existence when fileSets change\n  useEffect(() => {\n    const allPaths = fileSets.flatMap((fs) => {\n      const paths = (fs.files || []).map((f) => f.path);\n      if (fs.import) {paths.push(fs.import);}\n      return paths;\n    });\n    if (allPaths.length === 0) {return;}\n\n    // Send message to extension to check file existence\n    vscode?.postMessage({\n      type: \"checkFilesExist\",\n      paths: allPaths,\n    });\n\n    // Listen for response\n    const handler = (event: MessageEvent) => {\n      const message = event.data;\n      if (message.type === \"filesExistResult\" && message.results) {\n        setFileExistence((prev) => ({ ...prev, ...message.results }));\n        window.removeEventListener(\"message\", handler);\n      }\n    };\n    window.addEventListener(\"message\", handler);\n\n    return () => window.removeEventListener(\"message\", handler);\n  }, [fileSets]);\n\n  // Open file in editor\n  const handleOpenFile = (filePath: string) => {\n    const exists = fileExistence[filePath];\n    if (exists === false) {\n      // File doesn't exist - don't try to open\n      return;\n    }\n    vscode?.postMessage({\n      type: \"command\",\n      command: \"openFile\",\n      path: filePath,\n    });\n  };\n\n  const handleAddSet = () => {\n    setIsAddingSet(true);\n    setSetDraft({ name: \"\", description: \"\" });\n  };\n\n  const handleSaveSet = () => {\n    if (isAddingSet) {\n      const newSet: FileSet = { ...setDraft, files: [] };\n      onUpdate([\"fileSets\"], [...fileSets, newSet]);\n    } else if (editingSet !== null) {\n      const updated = [...fileSets];\n      updated[editingSet] = { ...updated[editingSet], ...setDraft };\n      onUpdate([\"fileSets\"], updated);\n    }\n    setIsAddingSet(false);\n    setEditingSet(null);\n  };\n\n  const handleDeleteSet = (idx: number) => {\n    // Remove confirmation - webview confirm() may not work properly\n    onUpdate(\n      [\"fileSets\"],\n      fileSets.filter((_, i) => i !== idx),\n    );\n  };\n\n  const handleBrowseFile = (setIdx: number) => {\n    // Send message to extension to open file picker\n    vscode?.postMessage({\n      type: \"selectFiles\",\n      multi: true,\n    });\n\n    // Listen for response\n    const handler = (event: MessageEvent) => {\n      const message = event.data;\n      if (\n        message.type === \"filesSelected\" &&\n        message.files &&\n        message.files.length > 0\n      ) {\n        // Auto-detect file type based on extension\n        const detectFileType = (filePath: string): string => {\n          const ext = filePath.split(\".\").pop()?.toLowerCase();\n          const typeMap: { [key: string]: string } = {\n            v: \"verilog\",\n            vh: \"verilog\",\n            sv: \"systemverilog\",\n            vhd: \"vhdl\",\n            vhdl: \"vhdl\",\n            c: \"c\",\n            h: \"c\",\n            cpp: \"cpp\",\n            hpp: \"cpp\",\n            cc: \"cpp\",\n            tcl: \"tcl\",\n            py: \"python\",\n            pdf: \"pdf\",\n            txt: \"text\",\n            md: \"text\",\n          };\n          return typeMap[ext || \"\"] || \"text\";\n        };\n\n        // Add all selected files\n        const fileSet = fileSets[setIdx];\n        const newFiles = message.files.map((filePath: string) => ({\n          path: filePath,\n          type: detectFileType(filePath),\n        }));\n\n        const updatedFiles = [...(fileSet.files || []), ...newFiles];\n        const updated = [...fileSets];\n        updated[setIdx] = { ...fileSet, files: updatedFiles };\n        onUpdate([\"fileSets\"], updated);\n\n        // Close the add file form\n        setIsAddingFile(null);\n\n        window.removeEventListener(\"message\", handler);\n      }\n    };\n    window.addEventListener(\"message\", handler);\n  };\n\n  const handleAddFile = (setIdx: number) => {\n    setIsAddingFile(setIdx);\n    setFileDraft({ path: \"\", type: \"verilog\" });\n  };\n\n  const handleSaveFile = (setIdx: number) => {\n    const fileSet = fileSets[setIdx];\n    if (isAddingFile === setIdx) {\n      const updatedFiles = [...(fileSet.files || []), fileDraft];\n      const updated = [...fileSets];\n      updated[setIdx] = { ...fileSet, files: updatedFiles };\n      onUpdate([\"fileSets\"], updated);\n    } else if (editingFile && editingFile.setIdx === setIdx) {\n      const updatedFiles = [...(fileSet.files || [])];\n      updatedFiles[editingFile.fileIdx] = fileDraft;\n      const updated = [...fileSets];\n      updated[setIdx] = { ...fileSet, files: updatedFiles };\n      onUpdate([\"fileSets\"], updated);\n    }\n    setIsAddingFile(null);\n    setEditingFile(null);\n  };\n\n  const handleDeleteFile = (setIdx: number, fileIdx: number) => {\n    const fileSet = fileSets[setIdx];\n    // Remove confirmation - webview confirm() may not work properly\n    const updatedFiles = (fileSet.files || []).filter((_, i) => i !== fileIdx);\n    const updated = [...fileSets];\n    updated[setIdx] = { ...fileSet, files: updatedFiles };\n    onUpdate([\"fileSets\"], updated);\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-medium\">File Sets</h2>\n          <p className=\"text-sm mt-1\" style={{ opacity: 0.7 }}>\n            {fileSets.length} file set{fileSets.length !== 1 ? \"s\" : \"\"}\n          </p>\n        </div>\n        <button\n          onClick={handleAddSet}\n          disabled={isAddingSet || editingSet !== null}\n          className=\"px-4 py-2 rounded text-sm flex items-center gap-2\"\n          style={{\n            background:\n              isAddingSet || editingSet !== null\n                ? \"var(--vscode-button-secondaryBackground)\"\n                : \"var(--vscode-button-background)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: isAddingSet || editingSet !== null ? 0.5 : 1,\n          }}\n        >\n          <span className=\"codicon codicon-add\"></span>\n          Add File Set\n        </button>\n      </div>\n\n      <div className=\"space-y-3\">\n        {fileSets.map((fileSet, setIdx) => (\n          <div\n            key={setIdx}\n            className=\"rounded overflow-hidden\"\n            style={{\n              border: \"1px solid var(--vscode-panel-border)\",\n              background: \"var(--vscode-editor-background)\",\n            }}\n          >\n            {/* File Set Header */}\n            <div\n              className=\"px-4 py-3 flex items-center justify-between cursor-pointer\"\n              style={{\n                background: \"var(--vscode-sideBar-background)\",\n                borderBottom: expandedSets.has(setIdx)\n                  ? \"1px solid var(--vscode-panel-border)\"\n                  : \"none\",\n              }}\n              onClick={() => toggleSet(setIdx)}\n            >\n              <div className=\"flex items-center gap-3 flex-1\">\n                <span\n                  className={`codicon codicon-chevron-${expandedSets.has(setIdx) ? \"down\" : \"right\"}`}\n                ></span>\n                <div>\n                  <p className=\"font-medium text-sm\">\n                    {fileSet.name || \"(imported)\"}\n                  </p>\n                  {fileSet.description && (\n                    <p className=\"text-xs mt-1\" style={{ opacity: 0.7 }}>\n                      {fileSet.description}\n                    </p>\n                  )}\n                  {fileSet.import && (\n                    <p\n                      className=\"text-xs mt-1 font-mono\"\n                      style={{ opacity: 0.7 }}\n                    >\n                      Import: {fileSet.import}\n                    </p>\n                  )}\n                </div>\n              </div>\n              <div\n                className=\"flex items-center gap-2\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <span\n                  className=\"text-xs px-2 py-1 rounded\"\n                  style={{\n                    background: \"var(--vscode-badge-background)\",\n                    color: \"var(--vscode-badge-foreground)\",\n                  }}\n                >\n                  {fileSet.files?.length || 0} files\n                </span>\n                {!fileSet.import && (\n                  <>\n                    <button\n                      onClick={() => {\n                        setEditingSet(setIdx);\n                        setSetDraft({\n                          name: fileSet.name,\n                          description: fileSet.description || \"\",\n                        });\n                      }}\n                      className=\"p-1\"\n                      title=\"Edit\"\n                    >\n                      <span className=\"codicon codicon-edit\"></span>\n                    </button>\n                    <button\n                      onClick={() => handleDeleteSet(setIdx)}\n                      className=\"p-1\"\n                      style={{ color: \"var(--vscode-errorForeground)\" }}\n                      title=\"Delete\"\n                    >\n                      <span className=\"codicon codicon-trash\"></span>\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n\n            {/* Expanded Content */}\n            {expandedSets.has(setIdx) && (\n              <div className=\"p-4 space-y-3\">\n                {fileSet.import ? (\n                  <div\n                    className=\"p-4 rounded border-l-4\"\n                    style={{\n                      background:\n                        fileExistence[fileSet.import] === false\n                          ? \"rgba(255, 0, 0, 0.1)\"\n                          : \"var(--vscode-editor-background)\",\n                      border: \"1px solid var(--vscode-panel-border)\",\n                      borderLeftColor:\n                        fileExistence[fileSet.import] === false\n                          ? \"var(--vscode-errorForeground)\"\n                          : \"var(--vscode-textLink-foreground)\",\n                    }}\n                  >\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold\">External File Set</h3>\n                        {fileExistence[fileSet.import] === false && (\n                          <span\n                            className=\"text-xs px-1.5 py-0.5 rounded\"\n                            style={{\n                              background: \"var(--vscode-errorForeground)\",\n                              color: \"white\",\n                            }}\n                          >\n                            Missing\n                          </span>\n                        )}\n                      </div>\n                    </div>\n\n                    <p className=\"text-sm mb-4\" style={{ opacity: 0.8 }}>\n                      Linked file:{\" \"}\n                      <code\n                        className=\"px-1 py-0.5 rounded\"\n                        style={{\n                          background: \"var(--vscode-textBlockQuote-background)\",\n                        }}\n                      >\n                        {fileSet.import}\n                      </code>\n                    </p>\n\n                    <button\n                      onClick={() => handleOpenFile(fileSet.import!)}\n                      className=\"px-4 py-2 rounded text-sm flex items-center gap-2\"\n                      style={{\n                        background: \"var(--vscode-button-background)\",\n                        color: \"var(--vscode-button-foreground)\",\n                      }}\n                    >\n                      <span className=\"codicon codicon-go-to-file\"></span>\n                      Open File Set\n                    </button>\n\n                    {fileExistence[fileSet.import] === false && (\n                      <div\n                        className=\"mt-3 text-xs flex items-center gap-2\"\n                        style={{ color: \"var(--vscode-errorForeground)\" }}\n                      >\n                        <span className=\"codicon codicon-error\"></span>\n                        <span>File not found on disk</span>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"space-y-2\">\n                      {(fileSet.files || []).map((file, fileIdx) => {\n                        const isEditing =\n                          editingFile?.setIdx === setIdx &&\n                          editingFile?.fileIdx === fileIdx;\n\n                        if (isEditing) {\n                          return (\n                            <div\n                              key={fileIdx}\n                              className=\"flex items-center gap-2 p-2 rounded\"\n                              style={{\n                                background:\n                                  \"var(--vscode-list-activeSelectionBackground)\",\n                              }}\n                            >\n                              <FormField\n                                label=\"\"\n                                value={fileDraft.path}\n                                onChange={(v: string) =>\n                                  setFileDraft({ ...fileDraft, path: v })\n                                }\n                                placeholder=\"path/to/file.v\"\n                                required\n                                onSave={() => handleSaveFile(setIdx)}\n                                onCancel={() => setEditingFile(null)}\n                              />\n                              <SelectField\n                                label=\"\"\n                                value={fileDraft.type}\n                                options={fileTypeOptions}\n                                onChange={(v: string) =>\n                                  setFileDraft({ ...fileDraft, type: v })\n                                }\n                                onSave={() => handleSaveFile(setIdx)}\n                                onCancel={() => setEditingFile(null)}\n                              />\n                              <button\n                                onClick={() => handleSaveFile(setIdx)}\n                                className=\"px-3 py-1 rounded text-xs\"\n                                style={{\n                                  background: \"var(--vscode-button-background)\",\n                                  color: \"var(--vscode-button-foreground)\",\n                                }}\n                              >\n                                Save\n                              </button>\n                              <button\n                                onClick={() => setEditingFile(null)}\n                                className=\"px-3 py-1 rounded text-xs\"\n                                style={{\n                                  background:\n                                    \"var(--vscode-button-secondaryBackground)\",\n                                  color: \"var(--vscode-button-foreground)\",\n                                }}\n                              >\n                                Cancel\n                              </button>\n                            </div>\n                          );\n                        }\n\n                        return (\n                          <div\n                            key={fileIdx}\n                            className=\"flex items-center justify-between p-2 rounded hover:opacity-80\"\n                            style={{\n                              background:\n                                fileExistence[file.path] === false\n                                  ? \"rgba(255, 0, 0, 0.15)\"\n                                  : \"var(--vscode-input-background)\",\n                              borderLeft:\n                                fileExistence[file.path] === false\n                                  ? \"3px solid var(--vscode-errorForeground)\"\n                                  : \"none\",\n                            }}\n                          >\n                            <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                              <span\n                                className=\"codicon codicon-file\"\n                                style={{\n                                  color:\n                                    fileExistence[file.path] === false\n                                      ? \"var(--vscode-errorForeground)\"\n                                      : undefined,\n                                }}\n                              ></span>\n                              <span\n                                className=\"text-sm font-mono truncate\"\n                                style={{\n                                  cursor:\n                                    fileExistence[file.path] !== false\n                                      ? \"pointer\"\n                                      : \"not-allowed\",\n                                  color:\n                                    fileExistence[file.path] === false\n                                      ? \"var(--vscode-errorForeground)\"\n                                      : \"var(--vscode-textLink-foreground)\",\n                                  textDecoration:\n                                    fileExistence[file.path] !== false\n                                      ? \"underline\"\n                                      : \"line-through\",\n                                  opacity:\n                                    fileExistence[file.path] === false\n                                      ? 0.8\n                                      : 1,\n                                }}\n                                onClick={() => handleOpenFile(file.path)}\n                                title={\n                                  fileExistence[file.path] === false\n                                    ? `File not found: ${file.path}`\n                                    : `Click to open: ${file.path}`\n                                }\n                              >\n                                {file.path}\n                              </span>\n                              {fileExistence[file.path] === false && (\n                                <span\n                                  className=\"text-xs px-1.5 py-0.5 rounded\"\n                                  style={{\n                                    background: \"var(--vscode-errorForeground)\",\n                                    color: \"white\",\n                                  }}\n                                >\n                                  Missing\n                                </span>\n                              )}\n                              <span\n                                className=\"text-xs px-2 py-0.5 rounded\"\n                                style={{\n                                  background: \"var(--vscode-badge-background)\",\n                                  color: \"var(--vscode-badge-foreground)\",\n                                }}\n                              >\n                                {file.type}\n                              </span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <button\n                                onClick={() => {\n                                  setEditingFile({ setIdx, fileIdx });\n                                  setFileDraft(file);\n                                }}\n                                className=\"p-1\"\n                                title=\"Edit\"\n                              >\n                                <span className=\"codicon codicon-edit\"></span>\n                              </button>\n                              <button\n                                onClick={() =>\n                                  handleDeleteFile(setIdx, fileIdx)\n                                }\n                                className=\"p-1\"\n                                style={{\n                                  color: \"var(--vscode-errorForeground)\",\n                                }}\n                                title=\"Delete\"\n                              >\n                                <span className=\"codicon codicon-trash\"></span>\n                              </button>\n                            </div>\n                          </div>\n                        );\n                      })}\n\n                      {/* Add File Row - Just browse button since it handles multiple files */}\n                      {isAddingFile === setIdx && (\n                        <div\n                          className=\"flex items-center gap-2 p-3 rounded\"\n                          style={{\n                            background:\n                              \"var(--vscode-list-activeSelectionBackground)\",\n                          }}\n                        >\n                          <button\n                            onClick={() => handleBrowseFile(setIdx)}\n                            className=\"flex-1 px-4 py-2 rounded text-sm flex items-center justify-center gap-2\"\n                            style={{\n                              background: \"var(--vscode-button-background)\",\n                              color: \"var(--vscode-button-foreground)\",\n                            }}\n                          >\n                            <span className=\"codicon codicon-folder-opened\"></span>\n                            Browse and Add Files...\n                          </button>\n                          <button\n                            onClick={() => setIsAddingFile(null)}\n                            className=\"px-3 py-2 rounded text-sm\"\n                            style={{\n                              background:\n                                \"var(--vscode-button-secondaryBackground)\",\n                              color: \"var(--vscode-button-foreground)\",\n                            }}\n                          >\n                            Cancel\n                          </button>\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Add File Button */}\n                    {isAddingFile !== setIdx && (\n                      <button\n                        onClick={() => handleAddFile(setIdx)}\n                        disabled={editingFile !== null || isAddingFile !== null}\n                        className=\"px-3 py-1.5 rounded text-sm flex items-center gap-2\"\n                        style={{\n                          background:\n                            editingFile !== null || isAddingFile !== null\n                              ? \"var(--vscode-button-secondaryBackground)\"\n                              : \"var(--vscode-button-background)\",\n                          color: \"var(--vscode-button-foreground)\",\n                          opacity:\n                            editingFile !== null || isAddingFile !== null\n                              ? 0.5\n                              : 1,\n                        }}\n                      >\n                        <span className=\"codicon codicon-add\"></span>\n                        Add File\n                      </button>\n                    )}\n                  </>\n                )}\n              </div>\n            )}\n          </div>\n        ))}\n\n        {/* Add New File Set */}\n        {isAddingSet && (\n          <div\n            className=\"p-4 rounded space-y-3\"\n            style={{\n              border: \"1px solid var(--vscode-panel-border)\",\n              background: \"var(--vscode-list-activeSelectionBackground)\",\n            }}\n          >\n            <FormField\n              label=\"Name\"\n              value={setDraft.name}\n              onChange={(v: string) => setSetDraft({ ...setDraft, name: v })}\n              placeholder=\"RTL_Sources\"\n              required\n              validator={validateRequired}\n              onSave={setDraft.name ? handleSaveSet : undefined}\n              onCancel={() => setIsAddingSet(false)}\n            />\n            <TextAreaField\n              label=\"Description\"\n              value={setDraft.description || \"\"}\n              onChange={(v: string) =>\n                setSetDraft({ ...setDraft, description: v })\n              }\n              placeholder=\"Optional description\"\n              rows={2}\n              onSave={setDraft.name ? handleSaveSet : undefined}\n              onCancel={() => setIsAddingSet(false)}\n            />\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handleSaveSet}\n                disabled={!setDraft.name}\n                className=\"px-4 py-2 rounded text-sm\"\n                style={{\n                  background: setDraft.name\n                    ? \"var(--vscode-button-background)\"\n                    : \"var(--vscode-button-secondaryBackground)\",\n                  color: \"var(--vscode-button-foreground)\",\n                  opacity: setDraft.name ? 1 : 0.5,\n                }}\n              >\n                Create File Set\n              </button>\n              <button\n                onClick={() => setIsAddingSet(false)}\n                className=\"px-4 py-2 rounded text-sm\"\n                style={{\n                  background: \"var(--vscode-button-secondaryBackground)\",\n                  color: \"var(--vscode-button-foreground)\",\n                }}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Edit File Set */}\n        {editingSet !== null && !isAddingSet && (\n          <div\n            className=\"p-4 rounded space-y-3\"\n            style={{\n              border: \"1px solid var(--vscode-panel-border)\",\n              background: \"var(--vscode-list-activeSelectionBackground)\",\n            }}\n          >\n            <h3 className=\"font-semibold\">Edit File Set</h3>\n            <FormField\n              label=\"Name\"\n              value={setDraft.name}\n              onChange={(v: string) => setSetDraft({ ...setDraft, name: v })}\n              placeholder=\"RTL_Sources\"\n              required\n              validator={validateRequired}\n              onSave={setDraft.name ? handleSaveSet : undefined}\n              onCancel={() => setEditingSet(null)}\n            />\n            <TextAreaField\n              label=\"Description\"\n              value={setDraft.description || \"\"}\n              onChange={(v: string) =>\n                setSetDraft({ ...setDraft, description: v })\n              }\n              placeholder=\"Optional description\"\n              rows={2}\n              onSave={setDraft.name ? handleSaveSet : undefined}\n              onCancel={() => setEditingSet(null)}\n            />\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handleSaveSet}\n                disabled={!setDraft.name}\n                className=\"px-4 py-2 rounded text-sm\"\n                style={{\n                  background: setDraft.name\n                    ? \"var(--vscode-button-background)\"\n                    : \"var(--vscode-button-secondaryBackground)\",\n                  color: \"var(--vscode-button-foreground)\",\n                  opacity: setDraft.name ? 1 : 0.5,\n                }}\n              >\n                Save Changes\n              </button>\n              <button\n                onClick={() => setEditingSet(null)}\n                className=\"px-4 py-2 rounded text-sm\"\n                style={{\n                  background: \"var(--vscode-button-secondaryBackground)\",\n                  color: \"var(--vscode-button-foreground)\",\n                }}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n\n        {fileSets.length === 0 && !isAddingSet && (\n          <div className=\"p-8 text-center text-sm\" style={{ opacity: 0.6 }}>\n            No file sets defined. Click \"Add File Set\" to create one.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/GeneratorPanel.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":75,"column":46,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":75,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1598,1600],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":79,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":79,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1746,1748],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":103,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":103,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .getState on an `any` value.","line":103,"column":24,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":103,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":103,"column":24,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":103,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":104,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":112,"endColumn":9},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":104,"column":12,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":104,"endColumn":54,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2429,2471],"text":"savedState?.generationOptions"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .generationOptions on an `any` value.","line":104,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":104,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .generationOptions on an `any` value.","line":105,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":105,"endColumn":37},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":107,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":107,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2557,2559],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":117,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":117,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .getState on an `any` value.","line":117,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":117,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":117,"column":26,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":117,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .setState on an `any` value.","line":118,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":118,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":118,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":118,"endColumn":20},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":145,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":145,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":145,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":145,"endColumn":23},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":148,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":148,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3795,3797],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":160,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":160,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":161,"column":11,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .success on an `any` value.","line":162,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":162,"endColumn":28},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":165,"column":35,"nodeType":"LogicalExpression","messageId":"invalidType","endLine":165,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":165,"column":35,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":165,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":166,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":166,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":166,"column":20,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":166,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":171,"column":13,"nodeType":"Property","messageId":"anyAssignment","endLine":171,"endColumn":58},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .error on an `any` value.","line":171,"column":22,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":171,"endColumn":35},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":371,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":371,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11290,11292],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * GeneratorPanel - VHDL Code Generation UI\n *\n * Provides interface for generating VHDL files, vendor integration files,\n * and testbenches from IP Core definitions.\n */\n\nimport React, {\n  useState,\n  useCallback,\n  useMemo,\n  useRef,\n  useEffect,\n} from \"react\";\nimport { IpCore, BusInterface } from \"../../../types/ipCore\";\nimport { vscode } from \"../../../vscode\";\n\ninterface GeneratorPanelProps {\n  ipCore: IpCore;\n}\n\ntype BusType = \"axil\" | \"avmm\";\ntype VendorType = \"none\" | \"intel\" | \"xilinx\" | \"both\";\n\ninterface GenerationOptions {\n  busType: BusType;\n  includeVhdl: boolean;\n  includeRegfile: boolean;\n  vendorFiles: VendorType;\n  includeTestbench: boolean;\n}\n\ninterface GenerationStatus {\n  status: \"idle\" | \"generating\" | \"success\" | \"error\";\n  message?: string;\n  files?: string[];\n}\n\ninterface DetectedBusInfo {\n  busInterface: BusInterface;\n  busType: BusType;\n  memoryMapRef: string;\n}\n\n/**\n * Map bus interface type to generator bus type\n */\nfunction mapBusType(interfaceType: string): BusType | null {\n  if (!interfaceType) {\n    return null;\n  }\n  const type = interfaceType.toLowerCase();\n\n  // Check Avalon first (prioritize specific matches)\n  if (\n    type.includes(\"avalon\") ||\n    type === \"avmm\" ||\n    type.includes(\"avalon-mm\")\n  ) {\n    return \"avmm\";\n  }\n\n  // Check AXI\n  if (type.includes(\"axi\") || type === \"axi4l\" || type === \"axi4lite\") {\n    return \"axil\";\n  }\n\n  return null;\n}\n\n/**\n * Detect bus interface with memory map reference\n */\nfunction detectBusWithMemoryMap(ipCore: IpCore): DetectedBusInfo | null {\n  const busInterfaces = ipCore.busInterfaces || [];\n\n  for (const bus of busInterfaces) {\n    // Check both camelCase (runtime) and snake_case (type def)\n    const memMapRef = bus.memoryMapRef || bus.memory_map_ref;\n    if (memMapRef) {\n      const busType = mapBusType(bus.type);\n      if (busType) {\n        return {\n          busInterface: bus,\n          busType,\n          memoryMapRef: memMapRef,\n        };\n      }\n    }\n  }\n\n  return null;\n}\n\nexport const GeneratorPanel: React.FC<GeneratorPanelProps> = ({ ipCore }) => {\n  // Auto-detect bus type from memory map reference\n  const detectedBus = useMemo(() => detectBusWithMemoryMap(ipCore), [ipCore]);\n\n  // Get IP name for preview\n  const ipName = ipCore.vlnv?.name?.toLowerCase() || \"ip_core\";\n\n  const [options, setOptions] = useState<GenerationOptions>(() => {\n    const savedState = vscode.getState();\n    return savedState && savedState.generationOptions\n      ? savedState.generationOptions\n      : {\n        busType: detectedBus?.busType || \"axil\",\n        includeVhdl: true,\n        includeRegfile: true,\n        vendorFiles: \"none\",\n        includeTestbench: false,\n      };\n  });\n\n  // Persist options state\n  useEffect(() => {\n    const currentState = vscode.getState() || {};\n    vscode.setState({ ...currentState, generationOptions: options });\n  }, [options]);\n\n  const [status, setStatus] = useState<GenerationStatus>({ status: \"idle\" });\n\n  // Responsive layout - detect container width\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isWideLayout, setIsWideLayout] = useState(false);\n\n  useEffect(() => {\n    const checkWidth = () => {\n      if (containerRef.current) {\n        setIsWideLayout(containerRef.current.offsetWidth > 700);\n      }\n    };\n    checkWidth();\n    const resizeObserver = new ResizeObserver(checkWidth);\n    if (containerRef.current) {\n      resizeObserver.observe(containerRef.current);\n    }\n    return () => resizeObserver.disconnect();\n  }, []);\n\n  const handleGenerate = useCallback(() => {\n    setStatus({ status: \"generating\", message: \"Generating files...\" });\n\n    // Send message to extension to trigger generation\n    vscode.postMessage({\n      type: \"generate\",\n      options: {\n        busType: detectedBus?.busType || options.busType,\n        includeVhdl: options.includeVhdl,\n        includeRegfile: options.includeRegfile,\n        vendorFiles: options.vendorFiles,\n        includeTestbench: options.includeTestbench,\n      },\n    });\n  }, [options, detectedBus]);\n\n  // Listen for generation result messages\n  React.useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      const message = event.data;\n      if (message.type === \"generateResult\") {\n        if (message.success) {\n          setStatus({\n            status: \"success\",\n            message: `Generated ${message.files?.length || 0} files`,\n            files: message.files,\n          });\n        } else {\n          setStatus({\n            status: \"error\",\n            message: message.error || \"Generation failed\",\n          });\n        }\n      }\n    };\n\n    window.addEventListener(\"message\", handleMessage);\n    return () => window.removeEventListener(\"message\", handleMessage);\n  }, []);\n\n  const labelStyle: React.CSSProperties = {\n    fontSize: \"12px\",\n    fontWeight: 500,\n    marginBottom: \"4px\",\n    display: \"block\",\n  };\n\n  const sectionStyle: React.CSSProperties = {\n    marginBottom: \"20px\",\n    padding: \"12px\",\n    background: \"var(--vscode-input-background)\",\n    borderRadius: \"4px\",\n    border: \"1px solid var(--vscode-input-border)\",\n  };\n\n  const checkboxRowStyle: React.CSSProperties = {\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"8px\",\n    marginBottom: \"8px\",\n    fontSize: \"12px\",\n  };\n\n  const infoStyle: React.CSSProperties = {\n    fontSize: \"11px\",\n    opacity: 0.8,\n    marginTop: \"4px\",\n  };\n\n  return (\n    <div ref={containerRef} style={{ padding: \"16px\" }}>\n      <h2 style={{ fontSize: \"16px\", fontWeight: 600, marginBottom: \"16px\" }}>\n        Project Scaffold\n      </h2>\n\n      <p style={{ fontSize: \"12px\", opacity: 0.8, marginBottom: \"16px\" }}>\n        Generate VHDL files, vendor integration files, and testbenches for{\" \"}\n        <strong>{ipCore.vlnv?.name}</strong>.\n      </p>\n\n      {/* Responsive layout wrapper */}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: isWideLayout ? \"row\" : \"column\",\n          gap: \"16px\",\n        }}\n      >\n        {/* Left column: Options */}\n        <div\n          style={{ flex: isWideLayout ? \"1 1 50%\" : \"1 1 auto\", minWidth: 0 }}\n        >\n          {/* Detected Bus Interface Section */}\n          <div style={sectionStyle}>\n            <label style={labelStyle}>Bus Interface</label>\n            {detectedBus ? (\n              <div>\n                <div\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    padding: \"8px 12px\",\n                    background: \"var(--vscode-inputValidation-infoBackground)\",\n                    borderRadius: \"4px\",\n                    fontSize: \"12px\",\n                  }}\n                >\n                  <span style={{ fontWeight: 500 }}>\n                    {detectedBus.busType === \"axil\"\n                      ? \"🔵 AXI-Lite\"\n                      : \"🟢 Avalon-MM\"}\n                  </span>\n                  <span style={{ opacity: 0.7 }}>\n                    (detected from {detectedBus.busInterface.name})\n                  </span>\n                </div>\n                <p style={infoStyle}>\n                  Memory Map: <code>{detectedBus.memoryMapRef}</code>\n                </p>\n              </div>\n            ) : (\n              <div\n                style={{\n                  padding: \"8px 12px\",\n                  background: \"var(--vscode-inputValidation-warningBackground)\",\n                  borderRadius: \"4px\",\n                  fontSize: \"12px\",\n                }}\n              >\n                ⚠️ No bus interface with memory map detected. Using default:\n                AXI-Lite\n              </div>\n            )}\n          </div>\n\n          {/* VHDL Files Section */}\n          <div style={sectionStyle}>\n            <label style={labelStyle}>VHDL Files</label>\n            <label style={checkboxRowStyle}>\n              <input\n                type=\"checkbox\"\n                checked={options.includeVhdl}\n                onChange={(e) =>\n                  setOptions({\n                    ...options,\n                    includeVhdl: e.target.checked,\n                    includeRegfile: e.target.checked,\n                  })\n                }\n              />\n              Package, Top, Core, Bus Wrapper, Register Bank\n            </label>\n          </div>\n\n          {/* Vendor Integration Section */}\n          <div style={sectionStyle}>\n            <label style={labelStyle}>Vendor Integration</label>\n            <select\n              value={options.vendorFiles}\n              onChange={(e) =>\n                setOptions({\n                  ...options,\n                  vendorFiles: e.target.value as VendorType,\n                })\n              }\n              style={{\n                width: \"100%\",\n                padding: \"6px 8px\",\n                fontSize: \"12px\",\n                background: \"var(--vscode-dropdown-background)\",\n                color: \"var(--vscode-dropdown-foreground)\",\n                border: \"1px solid var(--vscode-dropdown-border)\",\n                borderRadius: \"2px\",\n              }}\n            >\n              <option value=\"none\">None</option>\n              <option value=\"intel\">Intel Platform Designer (_hw.tcl)</option>\n              <option value=\"xilinx\">Xilinx Vivado (component.xml)</option>\n              <option value=\"both\">Both Intel and Xilinx</option>\n            </select>\n          </div>\n\n          {/* Testbench Section */}\n          <div style={sectionStyle}>\n            <label style={labelStyle}>Testbench</label>\n            <label style={checkboxRowStyle}>\n              <input\n                type=\"checkbox\"\n                checked={options.includeTestbench}\n                onChange={(e) =>\n                  setOptions({ ...options, includeTestbench: e.target.checked })\n                }\n              />\n              cocotb Python tests + Makefile (GHDL)\n            </label>\n          </div>\n        </div>\n\n        {/* Right column: Preview */}\n        <div\n          style={{ flex: isWideLayout ? \"1 1 50%\" : \"1 1 auto\", minWidth: 0 }}\n        >\n          {/* Preview Section */}\n          <div\n            style={{\n              ...sectionStyle,\n              background: \"var(--vscode-textBlockQuote-background)\",\n              fontFamily: \"monospace\",\n              fontSize: \"11px\",\n            }}\n          >\n            <label style={labelStyle}>📁 Preview: Output Structure</label>\n            <div style={{ marginTop: \"8px\", lineHeight: \"1.6\" }}>\n              <div style={{ color: \"var(--vscode-textPreformat-foreground)\" }}>\n                {ipName}/\n              </div>\n              {options.includeVhdl && (\n                <div style={{ paddingLeft: \"16px\" }}>\n                  <div>├── rtl/</div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    ├── {ipName}_pkg.vhd\n                  </div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    ├── {ipName}.vhd\n                  </div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    ├── {ipName}_core.vhd\n                  </div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    ├── {ipName}_{detectedBus?.busType || \"axil\"}.vhd\n                  </div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    └── {ipName}_regs.vhd\n                  </div>\n                </div>\n              )}\n              {options.includeTestbench && (\n                <div style={{ paddingLeft: \"16px\" }}>\n                  <div>├── tb/</div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    ├── {ipName}_test.py\n                  </div>\n                  <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                    └── Makefile\n                  </div>\n                </div>\n              )}\n              {(options.vendorFiles === \"intel\" ||\n                options.vendorFiles === \"both\") && (\n                  <div style={{ paddingLeft: \"16px\" }}>\n                    <div>├── intel/</div>\n                    <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                      └── {ipName}_hw.tcl\n                    </div>\n                  </div>\n                )}\n              {(options.vendorFiles === \"xilinx\" ||\n                options.vendorFiles === \"both\") && (\n                  <div style={{ paddingLeft: \"16px\" }}>\n                    <div>└── xilinx/</div>\n                    <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                      ├── component.xml\n                    </div>\n                    <div style={{ paddingLeft: \"24px\", opacity: 0.8 }}>\n                      └── xgui/{ipName}_v*.tcl\n                    </div>\n                  </div>\n                )}\n            </div>\n            <div style={{ marginTop: \"8px\", fontSize: \"10px\", opacity: 0.7 }}>\n              {(() => {\n                let count = 0;\n                if (options.includeVhdl) {count += 5;} // pkg, top, core, bus, regs\n                if (options.vendorFiles === \"intel\") {count += 1;}\n                if (options.vendorFiles === \"xilinx\") {count += 2;} // component.xml + xgui\n                if (options.vendorFiles === \"both\") {count += 3;} // intel hw.tcl + xilinx 2 files\n                if (options.includeTestbench) {count += 2;}\n                return `${count} file(s) will be generated`;\n              })()}\n            </div>\n          </div>\n\n          {/* Generate Button */}\n          <button\n            onClick={handleGenerate}\n            disabled={status.status === \"generating\"}\n            style={{\n              width: \"100%\",\n              padding: \"10px 16px\",\n              fontSize: \"13px\",\n              fontWeight: 500,\n              background: \"var(--vscode-button-background)\",\n              color: \"var(--vscode-button-foreground)\",\n              border: \"none\",\n              borderRadius: \"4px\",\n              cursor: status.status === \"generating\" ? \"wait\" : \"pointer\",\n              opacity: status.status === \"generating\" ? 0.7 : 1,\n            }}\n          >\n            {status.status === \"generating\"\n              ? \"⏳ Generating...\"\n              : \"🔧 Generate Files\"}\n          </button>\n\n          {/* Status Display */}\n          {status.status === \"success\" && (\n            <div\n              style={{\n                marginTop: \"16px\",\n                padding: \"12px\",\n                background: \"var(--vscode-inputValidation-infoBackground)\",\n                borderRadius: \"4px\",\n                fontSize: \"12px\",\n              }}\n            >\n              <p style={{ fontWeight: 500, marginBottom: \"8px\" }}>\n                ✅ {status.message}\n              </p>\n              {status.files && (\n                <ul style={{ margin: 0, paddingLeft: \"16px\" }}>\n                  {status.files.map((file, idx) => (\n                    <li key={idx}>{file}</li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          )}\n\n          {status.status === \"error\" && (\n            <div\n              style={{\n                marginTop: \"16px\",\n                padding: \"12px\",\n                background: \"var(--vscode-inputValidation-errorBackground)\",\n                border: \"1px solid var(--vscode-inputValidation-errorBorder)\",\n                borderRadius: \"4px\",\n                fontSize: \"12px\",\n                color: \"var(--vscode-errorForeground)\",\n              }}\n            >\n              ❌ {status.message}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/MemoryMapsEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":39},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":23,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":23,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[791,793],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":27,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":27,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":27,"column":5,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":27,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":35,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":35,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .type on an `any` value.","line":37,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":37,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":38,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":38,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":39,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":39,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":44,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":44,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .files on an `any` value.","line":44,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":44,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":45,"column":36,"nodeType":"Property","messageId":"anyAssignment","endLine":45,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":107,"column":17,"nodeType":"CallExpression","messageId":"unsafeReturn","endLine":111,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":107,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":107,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":107,"column":17,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":107,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useEffect } from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport { vscode } from \"../../../vscode\";\n\ninterface MemoryMapsEditorProps {\n  memoryMaps: unknown;\n  imports?: { memoryMaps?: unknown[] };\n  onUpdate: YamlUpdateHandler;\n}\n\nexport const MemoryMapsEditor: React.FC<MemoryMapsEditorProps> = ({\n  memoryMaps,\n  imports,\n  onUpdate,\n}) => {\n  // Cast to a typed record for internal use\n  const memMaps = memoryMaps as Record<string, unknown> | null;\n  // Check if it's an import object (as per schema using 'import' keyword)\n  // The memoryMaps field in the yaml is usually:\n  // memoryMaps:\n  //   import: \"path/to/file\"\n  const importFile = memMaps?.import as string | undefined;\n  const detectedMaps = (imports?.memoryMaps || []) as Record<string, unknown>[];\n\n  const handleLinkFile = useCallback(() => {\n    // Send message to extension to open file picker with filter\n    vscode?.postMessage({\n      type: \"selectFiles\",\n      multi: false, // Single file selection\n      filters: { \"Memory Map\": [\"memmap.yml\", \"yml\"] },\n    });\n\n    // Listen for response\n    const handler = (event: MessageEvent) => {\n      const message = event.data;\n      if (\n        message.type === \"filesSelected\" &&\n        message.files &&\n        message.files.length > 0\n      ) {\n        // Update the memory map import\n        // We update the whole memoryMaps object to be { import: \"path\" }\n        // Use onUpdate(['memoryMaps'], { import: filePath })\n        const filePath = message.files[0];\n        onUpdate([\"memoryMaps\"], { import: filePath });\n\n        window.removeEventListener(\"message\", handler);\n      }\n    };\n    window.addEventListener(\"message\", handler);\n  }, [onUpdate]);\n\n  const handleUnlink = useCallback(() => {\n    // Clear the memoryMaps object or set it to undefined/empty\n    onUpdate([\"memoryMaps\"], undefined);\n  }, [onUpdate]);\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <h2 className=\"text-xl font-medium\">Memory Maps</h2>\n\n      {importFile ? (\n        <div className=\"space-y-4\">\n          <div\n            className=\"p-4 rounded border-l-4\"\n            style={{\n              background: \"var(--vscode-editor-background)\",\n              border: \"1px solid var(--vscode-panel-border)\",\n              borderLeftColor: \"var(--vscode-textLink-foreground)\",\n            }}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"font-semibold\">External Memory Map</h3>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handleLinkFile}\n                  className=\"p-1.5 rounded opacity-70 hover:opacity-100\"\n                  title=\"Change Linked File\"\n                >\n                  <span className=\"codicon codicon-edit\"></span>\n                </button>\n                <button\n                  onClick={handleUnlink}\n                  className=\"p-1.5 rounded opacity-70 hover:opacity-100\"\n                  style={{ color: \"var(--vscode-errorForeground)\" }}\n                  title=\"Unlink File\"\n                >\n                  <span className=\"codicon codicon-close\"></span>\n                </button>\n              </div>\n            </div>\n\n            <p className=\"text-sm mb-4\" style={{ opacity: 0.8 }}>\n              Linked file:{\" \"}\n              <code\n                className=\"px-1 py-0.5 rounded\"\n                style={{\n                  background: \"var(--vscode-textBlockQuote-background)\",\n                }}\n              >\n                {importFile}\n              </code>\n            </p>\n\n            <button\n              onClick={() =>\n                vscode.postMessage({\n                  type: \"command\",\n                  command: \"openFile\",\n                  path: importFile,\n                })\n              }\n              className=\"px-4 py-2 rounded text-sm flex items-center gap-2\"\n              style={{\n                background: \"var(--vscode-button-background)\",\n                color: \"var(--vscode-button-foreground)\",\n              }}\n            >\n              <span className=\"codicon codicon-go-to-file\"></span>\n              Open Memory Map Editor\n            </button>\n          </div>\n\n          {/* Detected Memory Maps List */}\n          <div>\n            <h3 className=\"text-sm font-semibold mb-3\">Detected Memory Maps</h3>\n            {detectedMaps.length > 0 ? (\n              <div className=\"space-y-3\">\n                {detectedMaps.map((map, idx: number) => (\n                  <div\n                    key={idx}\n                    className=\"p-4 rounded border\"\n                    style={{\n                      background: \"var(--vscode-editor-background)\",\n                      borderColor: \"var(--vscode-panel-border)\",\n                    }}\n                  >\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-medium text-sm\">\n                            {map.name as string}\n                          </span>\n                          <span\n                            className=\"text-xs px-2 py-0.5 rounded\"\n                            style={{\n                              background: \"var(--vscode-badge-background)\",\n                              color: \"var(--vscode-badge-foreground)\",\n                            }}\n                          >\n                            {(map.addressBlocks as unknown[])?.length || 0} Block\n                            {(map.addressBlocks as unknown[])?.length !== 1 ? \"s\" : \"\"}\n                          </span>\n                        </div>\n                        {!!map.description && (\n                          <p className=\"text-sm mt-1\" style={{ opacity: 0.8 }}>\n                            {map.description as string}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Address Blocks Preview */}\n                    {(map.addressBlocks as unknown[]) && (map.addressBlocks as unknown[]).length > 0 && (\n                      <div\n                        className=\"mt-3 pl-4 border-l-2\"\n                        style={{ borderColor: \"var(--vscode-panel-border)\" }}\n                      >\n                        <p\n                          className=\"text-xs font-semibold mb-1\"\n                          style={{ opacity: 0.6 }}\n                        >\n                          ADDRESS BLOCKS\n                        </p>\n                        <div className=\"grid gap-1\">\n                          {(map.addressBlocks as Record<string, unknown>[]).map((block, bIdx: number) => (\n                            <div\n                              key={bIdx}\n                              className=\"text-sm font-mono flex items-center gap-3\"\n                              style={{ opacity: 0.8 }}\n                            >\n                              <span>{String(block.name ?? '')}</span>\n                              <span style={{ opacity: 0.5 }}>\n                                Offset: {String(block.offset ?? block.baseAddress ?? 0)}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div\n                className=\"p-8 text-center text-sm\"\n                style={{\n                  opacity: 0.6,\n                  border: \"1px dashed var(--vscode-panel-border)\",\n                  borderRadius: \"4px\",\n                }}\n              >\n                No memory maps found in the linked file.\n              </div>\n            )}\n          </div>\n        </div>\n      ) : (\n        <div\n          className=\"p-8 text-center\"\n          style={{\n            opacity: 0.6,\n            border: \"1px dashed var(--vscode-panel-border)\",\n            borderRadius: \"4px\",\n          }}\n        >\n          <p className=\"text-sm mb-4\">No external memory map linked.</p>\n          <button\n            onClick={handleLinkFile}\n            className=\"px-4 py-2 rounded text-sm flex items-center justify-center gap-2 mx-auto\"\n            style={{\n              background: \"var(--vscode-button-secondaryBackground)\",\n              color: \"var(--vscode-button-secondaryForeground)\",\n            }}\n          >\n            <span className=\"codicon codicon-link\"></span>\n            Link .mm.yml\n          </button>\n          <p className=\"text-xs mt-2 opacity-80\">\n            Link an existing memory map file to include its address blocks and\n            registers.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/MetadataEditor.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"never\" of template literal expression.","line":43,"column":43,"nodeType":"Identifier","messageId":"invalidType","endLine":43,"endColumn":46},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":91,"column":39,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":91,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2286,2288],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":224,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":224,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6116,6118],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":298,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":298,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8209,8211],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport type { IpCore } from \"../../../types/ipCore\";\nimport {\n  FormField,\n  SelectField,\n  TextAreaField,\n} from \"../../../shared/components\";\nimport {\n  validateRequired,\n  validateVersion,\n} from \"../../../shared/utils/validation\";\n\ninterface MetadataEditorProps {\n  ipCore: IpCore;\n  onUpdate: YamlUpdateHandler;\n}\n\ninterface MetadataRow {\n  key: string;\n  label: string;\n  path: (string | number)[];\n  getValue: (ipCore: IpCore) => string;\n  type?: \"text\" | \"select\" | \"textarea\";\n  options?: { value: string; label: string }[];\n  validator?: (value: string) => string | null;\n  required?: boolean;\n  placeholder?: string;\n}\n\nconst METADATA_ROWS: MetadataRow[] = [\n  {\n    key: \"apiVersion\",\n    label: \"API Version\",\n    path: [\"apiVersion\"],\n    getValue: (ip) => {\n      const val = ip?.apiVersion;\n      if (val === undefined || val === null) {\n        return \"1.0\";\n      }\n      // Convert number to string, ensuring 1 becomes \"1.0\"\n      if (typeof val === \"number\") {\n        return Number.isInteger(val) ? `${val}.0` : String(val);\n      }\n      return String(val);\n    },\n    type: \"select\",\n    options: [{ value: \"1.0\", label: \"1.0\" }],\n    required: true,\n  },\n  {\n    key: \"vendor\",\n    label: \"Vendor\",\n    path: [\"vlnv\", \"vendor\"],\n    getValue: (ip) => ip?.vlnv?.vendor || \"\",\n    validator: validateRequired,\n    required: true,\n    placeholder: \"e.g., my-company.com\",\n  },\n  {\n    key: \"library\",\n    label: \"Library\",\n    path: [\"vlnv\", \"library\"],\n    getValue: (ip) => ip?.vlnv?.library || \"\",\n    validator: validateRequired,\n    required: true,\n    placeholder: \"e.g., my_lib\",\n  },\n  {\n    key: \"name\",\n    label: \"Name\",\n    path: [\"vlnv\", \"name\"],\n    getValue: (ip) => ip?.vlnv?.name || \"\",\n    validator: validateRequired,\n    required: true,\n    placeholder: \"e.g., my_core\",\n  },\n  {\n    key: \"version\",\n    label: \"Version\",\n    path: [\"vlnv\", \"version\"],\n    getValue: (ip) => ip?.vlnv?.version || \"\",\n    validator: validateVersion,\n    required: true,\n    placeholder: \"e.g., 1.0.0\",\n  },\n  {\n    key: \"description\",\n    label: \"Description\",\n    path: [\"description\"],\n    getValue: (ip) => ip?.description || \"\",\n    type: \"textarea\",\n    placeholder: \"Describe the IP core...\",\n  },\n];\n\n/**\n * Metadata editor for IP Core VLNV and description\n * Uses table format matching other section editors\n * Supports vim-style navigation: j/k for rows, e to edit, Escape to cancel\n */\nexport const MetadataEditor: React.FC<MetadataEditorProps> = ({\n  ipCore,\n  onUpdate,\n}) => {\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [editingKey, setEditingKey] = useState<string | null>(null);\n  const [draft, setDraft] = useState(\"\");\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleEdit = useCallback(\n    (key: string) => {\n      const row = METADATA_ROWS.find((r) => r.key === key);\n      if (row) {\n        setDraft(row.getValue(ipCore));\n        setEditingKey(key);\n      }\n    },\n    [ipCore],\n  );\n\n  const handleSave = useCallback(() => {\n    const row = METADATA_ROWS.find((r) => r.key === editingKey);\n    if (row) {\n      onUpdate(row.path, draft);\n    }\n    setEditingKey(null);\n    setDraft(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, [editingKey, draft, onUpdate]);\n\n  const handleCancel = useCallback(() => {\n    setEditingKey(null);\n    setDraft(\"\");\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, []);\n\n  // Auto-focus input when editing starts\n  useEffect(() => {\n    if (editingKey) {\n      const timerId = setTimeout(() => {\n        const container = containerRef.current;\n        if (!container) {\n          return;\n        }\n        const input = container.querySelector(\n          `[data-edit-key=\"${editingKey}\"]`,\n        ) as HTMLElement;\n        if (input) {\n          input.focus();\n        }\n      }, 0);\n      return () => clearTimeout(timerId);\n    }\n  }, [editingKey]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const target = e.target as HTMLElement;\n      const isTyping = target.closest(\n        'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area, vscode-dropdown',\n      );\n\n      if (isTyping || editingKey !== null) {\n        if (e.key === \"Escape\") {\n          e.preventDefault();\n          handleCancel();\n        }\n        return;\n      }\n\n      if (e.ctrlKey || e.metaKey) {\n        return;\n      }\n\n      const key = e.key.toLowerCase();\n\n      if (key === \"j\" || e.key === \"ArrowDown\") {\n        e.preventDefault();\n        setSelectedIndex((prev) =>\n          Math.min(prev + 1, METADATA_ROWS.length - 1),\n        );\n      } else if (key === \"k\" || e.key === \"ArrowUp\") {\n        e.preventDefault();\n        setSelectedIndex((prev) => Math.max(prev - 1, 0));\n      } else if (key === \"e\" || e.key === \"Enter\") {\n        e.preventDefault();\n        handleEdit(METADATA_ROWS[selectedIndex].key);\n      } else if (key === \"g\") {\n        e.preventDefault();\n        setSelectedIndex(0);\n      } else if (e.key === \"G\" && e.shiftKey) {\n        e.preventDefault();\n        setSelectedIndex(METADATA_ROWS.length - 1);\n      }\n    };\n\n    container.addEventListener(\"keydown\", handleKeyDown);\n    return () => container.removeEventListener(\"keydown\", handleKeyDown);\n  }, [selectedIndex, editingKey, handleEdit, handleCancel]);\n\n  const renderEditField = (row: MetadataRow) => {\n    const validationError = row.validator ? row.validator(draft) : null;\n    const canSave = !validationError || !row.required;\n\n    // Common props for all fields\n    const commonProps = {\n      onSave: canSave ? handleSave : undefined,\n      onCancel: handleCancel,\n    };\n\n    if (row.type === \"select\") {\n      return (\n        <div className=\"flex items-center gap-2\">\n          <SelectField\n            label=\"\"\n            value={draft}\n            options={row.options || []}\n            onChange={setDraft}\n            data-edit-key={row.key}\n            {...commonProps}\n          />\n          <button\n            onClick={handleSave}\n            className=\"px-3 py-1 rounded text-xs\"\n            style={{\n              background: \"var(--vscode-button-background)\",\n              color: \"var(--vscode-button-foreground)\",\n            }}\n          >\n            Save\n          </button>\n          <button\n            onClick={handleCancel}\n            className=\"px-3 py-1 rounded text-xs\"\n            style={{\n              background: \"var(--vscode-button-secondaryBackground)\",\n              color: \"var(--vscode-button-foreground)\",\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      );\n    }\n\n    if (row.type === \"textarea\") {\n      return (\n        <div className=\"flex flex-col gap-2\">\n          <TextAreaField\n            label=\"\"\n            value={draft}\n            onChange={setDraft}\n            placeholder={row.placeholder}\n            rows={3}\n            data-edit-key={row.key}\n            {...commonProps}\n          />\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleSave}\n              className=\"px-3 py-1 rounded text-xs\"\n              style={{\n                background: \"var(--vscode-button-background)\",\n                color: \"var(--vscode-button-foreground)\",\n              }}\n            >\n              Save\n            </button>\n            <button\n              onClick={handleCancel}\n              className=\"px-3 py-1 rounded text-xs\"\n              style={{\n                background: \"var(--vscode-button-secondaryBackground)\",\n                color: \"var(--vscode-button-foreground)\",\n              }}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"flex items-center gap-2\">\n        <FormField\n          label=\"\"\n          value={draft}\n          onChange={setDraft}\n          placeholder={row.placeholder}\n          error={validationError || undefined}\n          required={row.required}\n          data-edit-key={row.key}\n          {...commonProps}\n        />\n        <button\n          onClick={handleSave}\n          disabled={!canSave}\n          className=\"px-3 py-1 rounded text-xs\"\n          style={{\n            background: canSave\n              ? \"var(--vscode-button-background)\"\n              : \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: canSave ? 1 : 0.5,\n          }}\n        >\n          Save\n        </button>\n        <button\n          onClick={handleCancel}\n          className=\"px-3 py-1 rounded text-xs\"\n          style={{\n            background: \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n          }}\n        >\n          Cancel\n        </button>\n      </div>\n    );\n  };\n\n  return (\n    <div ref={containerRef} className=\"p-6 space-y-4 outline-none\" tabIndex={0}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-medium\">Metadata</h2>\n          <p className=\"text-sm mt-1\" style={{ opacity: 0.7 }}>\n            {METADATA_ROWS.length} fields •\n            <span className=\"ml-2 text-xs font-mono\" style={{ opacity: 0.5 }}>\n              j/k: navigate • e: edit\n            </span>\n          </p>\n        </div>\n      </div>\n\n      <div\n        className=\"rounded overflow-hidden\"\n        style={{ border: \"1px solid var(--vscode-panel-border)\" }}\n      >\n        <table className=\"w-full\">\n          <thead>\n            <tr\n              style={{\n                background: \"var(--vscode-editor-background)\",\n                borderBottom: \"1px solid var(--vscode-panel-border)\",\n              }}\n            >\n              <th\n                className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\"\n                style={{ width: \"150px\" }}\n              >\n                Field\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Value\n              </th>\n              <th\n                className=\"px-4 py-3 text-right text-xs font-semibold uppercase opacity-70\"\n                style={{ width: \"80px\" }}\n              >\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {METADATA_ROWS.map((row, index) => {\n              const isSelected = selectedIndex === index;\n              const isEditing = editingKey === row.key;\n              const value = row.getValue(ipCore);\n\n              return (\n                <tr\n                  key={row.key}\n                  data-row-idx={index}\n                  onClick={() => setSelectedIndex(index)}\n                  onDoubleClick={() => handleEdit(row.key)}\n                  style={{\n                    background: isEditing\n                      ? \"var(--vscode-list-activeSelectionBackground)\"\n                      : isSelected\n                        ? \"var(--vscode-list-inactiveSelectionBackground)\"\n                        : \"transparent\",\n                    borderBottom: \"1px solid var(--vscode-panel-border)\",\n                    cursor: \"pointer\",\n                  }}\n                >\n                  <td\n                    className=\"px-4 py-3 text-sm font-medium\"\n                    style={{ opacity: 0.8 }}\n                  >\n                    {row.label}\n                    {row.required && (\n                      <span style={{ color: \"var(--vscode-errorForeground)\" }}>\n                        {\" \"}\n                        *\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3 text-sm\">\n                    {isEditing ? (\n                      renderEditField(row)\n                    ) : (\n                      <span\n                        className=\"font-mono\"\n                        style={{\n                          whiteSpace:\n                            row.type === \"textarea\" ? \"pre-wrap\" : \"normal\",\n                        }}\n                      >\n                        {value || <span style={{ opacity: 0.5 }}>—</span>}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"px-4 py-3 text-right\">\n                    {!isEditing && (\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleEdit(row.key);\n                        }}\n                        disabled={editingKey !== null}\n                        className=\"p-1 rounded\"\n                        style={{ opacity: editingKey !== null ? 0.3 : 1 }}\n                        title=\"Edit (e)\"\n                      >\n                        <span className=\"codicon codicon-edit\"></span>\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/ParametersTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":46,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeColumn' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":47,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":84,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":84,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1994,1996],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":151,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":151,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4088,4090],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":178,"column":36,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":178,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4947,4949],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":315,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":315,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9912,9914],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport {\n  FormField,\n  SelectField,\n  NumberField,\n  CheckboxField,\n} from \"../../../shared/components\";\nimport {\n  validateVhdlIdentifier,\n  validateUniqueName,\n} from \"../../../shared/utils/validation\";\nimport { useVimTableNavigation } from \"../../hooks/useVimTableNavigation\";\n\ninterface Parameter {\n  name: string;\n  dataType: string;\n  defaultValue: unknown;\n  description?: string;\n}\n\ninterface ParametersTableProps {\n  parameters: unknown[];\n  onUpdate: YamlUpdateHandler;\n}\n\nconst createEmptyParameter = (): Parameter => ({\n  name: \"\",\n  dataType: \"integer\",\n  defaultValue: 0,\n  description: \"\",\n});\n\nconst COLUMN_KEYS = [\"name\", \"dataType\", \"defaultValue\", \"description\"];\n\n/**\n * Editable table for IP Core parameters\n * Vim-style: h/j/k/l navigate cells, e edit, d delete, o add\n */\nexport const ParametersTable: React.FC<ParametersTableProps> = ({\n  parameters: rawParameters,\n  onUpdate,\n}) => {\n  const parameters = rawParameters as Parameter[];\n  const {\n    selectedIndex,\n    activeColumn,\n    editingIndex,\n    isAdding,\n    draft,\n    setDraft,\n    handleEdit,\n    handleAdd,\n    handleSave,\n    handleCancel,\n    handleDelete,\n    containerRef,\n    getRowProps,\n    getCellProps,\n  } = useVimTableNavigation<Parameter>({\n    items: parameters,\n    onUpdate,\n    dataKey: \"parameters\",\n    createEmptyItem: createEmptyParameter,\n    columnKeys: COLUMN_KEYS,\n  });\n\n  const handleDataTypeChange = (newType: string) => {\n    let newDefault: unknown = \"\";\n    if (newType === \"integer\") {\n      newDefault = 0;\n    } else if (newType === \"boolean\") {\n      newDefault = false;\n    } else if (newType === \"string\") {\n      newDefault = \"\";\n    }\n    setDraft({ ...draft, dataType: newType, defaultValue: newDefault });\n  };\n\n  const existingNames = parameters\n    .map((p) => p.name)\n    .filter((_, i) => i !== editingIndex);\n  const nameError =\n    validateVhdlIdentifier(draft.name) ||\n    validateUniqueName(draft.name, existingNames);\n  const canSave = !nameError;\n\n  const renderDefaultValueField = () => {\n    switch (draft.dataType) {\n      case \"integer\":\n        return (\n          <NumberField\n            label=\"\"\n            value={\n              typeof draft.defaultValue === \"number\" ? draft.defaultValue : 0\n            }\n            onChange={(v: number) => setDraft({ ...draft, defaultValue: v })}\n            data-edit-key=\"defaultValue\"\n            onSave={canSave ? handleSave : undefined}\n            onCancel={handleCancel}\n          />\n        );\n      case \"boolean\":\n        return (\n          <CheckboxField\n            label=\"True\"\n            checked={!!draft.defaultValue}\n            onChange={(v: boolean) => setDraft({ ...draft, defaultValue: v })}\n            data-edit-key=\"defaultValue\"\n          />\n        );\n      default:\n        return (\n          <FormField\n            label=\"\"\n            value={String(draft.defaultValue || \"\")}\n            onChange={(v: string) => setDraft({ ...draft, defaultValue: v })}\n            placeholder=\"default value\"\n            data-edit-key=\"defaultValue\"\n            onSave={canSave ? handleSave : undefined}\n            onCancel={handleCancel}\n          />\n        );\n    }\n  };\n\n  const formatDefaultValue = (param: Parameter): string => {\n    if (param.dataType === \"boolean\") {\n      return param.defaultValue ? \"true\" : \"false\";\n    }\n    if (param.dataType === \"integer\") {\n      return String(param.defaultValue ?? 0);\n    }\n    // For string type, show the value or empty string\n    return String(param.defaultValue ?? \"\");\n  };\n\n  const renderEditRow = (isNew: boolean) => (\n    <tr\n      style={{\n        background: \"var(--vscode-list-activeSelectionBackground)\",\n        borderBottom: \"1px solid var(--vscode-panel-border)\",\n      }}\n      data-row-idx={editingIndex ?? parameters.length}\n    >\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.name}\n          onChange={(v: string) => setDraft({ ...draft, name: v })}\n          error={nameError || undefined}\n          placeholder=\"PARAM_NAME\"\n          required\n          data-edit-key=\"name\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={draft.dataType}\n          options={[\n            { value: \"integer\", label: \"integer\" },\n            { value: \"boolean\", label: \"boolean\" },\n            { value: \"string\", label: \"string\" },\n          ]}\n          onChange={handleDataTypeChange}\n          data-edit-key=\"dataType\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">{renderDefaultValueField()}</td>\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.description || \"\"}\n          onChange={(v: string) => setDraft({ ...draft, description: v })}\n          placeholder=\"Optional description\"\n          data-edit-key=\"description\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3 text-right\">\n        <button\n          onClick={handleSave}\n          disabled={!canSave}\n          className=\"px-3 py-1 rounded text-xs mr-2\"\n          style={{\n            background: canSave\n              ? \"var(--vscode-button-background)\"\n              : \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: canSave ? 1 : 0.5,\n          }}\n        >\n          {isNew ? \"Add\" : \"Save\"}\n        </button>\n        <button\n          onClick={handleCancel}\n          className=\"px-3 py-1 rounded text-xs\"\n          style={{\n            background: \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n          }}\n        >\n          Cancel\n        </button>\n      </td>\n    </tr>\n  );\n\n  return (\n    <div ref={containerRef} className=\"p-6 space-y-4 outline-none\" tabIndex={0}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-medium\">Parameters</h2>\n          <p className=\"text-sm mt-1\" style={{ opacity: 0.7 }}>\n            {parameters.length} parameter{parameters.length !== 1 ? \"s\" : \"\"} •\n            <span className=\"ml-2 text-xs font-mono\" style={{ opacity: 0.5 }}>\n              h/j/k/l: navigate • e: edit • d: delete • o: add\n            </span>\n          </p>\n        </div>\n        <button\n          onClick={handleAdd}\n          disabled={isAdding || editingIndex !== null}\n          className=\"px-4 py-2 rounded text-sm flex items-center gap-2\"\n          style={{\n            background:\n              isAdding || editingIndex !== null\n                ? \"var(--vscode-button-secondaryBackground)\"\n                : \"var(--vscode-button-background)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: isAdding || editingIndex !== null ? 0.5 : 1,\n          }}\n        >\n          <span className=\"codicon codicon-add\"></span>Add Parameter\n        </button>\n      </div>\n\n      <div\n        className=\"rounded overflow-hidden\"\n        style={{ border: \"1px solid var(--vscode-panel-border)\" }}\n      >\n        <table className=\"w-full\">\n          <thead>\n            <tr\n              style={{\n                background: \"var(--vscode-editor-background)\",\n                borderBottom: \"1px solid var(--vscode-panel-border)\",\n              }}\n            >\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Name\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Data Type\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Default Value\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Description\n              </th>\n              <th className=\"px-4 py-3 text-right text-xs font-semibold uppercase opacity-70\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {parameters.map((param, index) => {\n              if (editingIndex === index) {\n                return (\n                  <React.Fragment key={index}>\n                    {renderEditRow(false)}\n                  </React.Fragment>\n                );\n              }\n              const rowProps = getRowProps(index);\n              return (\n                <tr\n                  key={index}\n                  {...rowProps}\n                  onDoubleClick={() => handleEdit(index)}\n                >\n                  <td\n                    className=\"px-4 py-3 text-sm font-mono\"\n                    {...getCellProps(index, \"name\")}\n                  >\n                    {param.name}\n                  </td>\n                  <td\n                    className=\"px-4 py-3 text-sm\"\n                    {...getCellProps(index, \"dataType\")}\n                  >\n                    {param.dataType}\n                  </td>\n                  <td\n                    className=\"px-4 py-3 text-sm font-mono\"\n                    {...getCellProps(index, \"defaultValue\")}\n                  >\n                    {formatDefaultValue(param)}\n                  </td>\n                  <td\n                    className=\"px-4 py-3 text-sm\"\n                    {...getCellProps(index, \"description\")}\n                    style={{\n                      ...getCellProps(index, \"description\").style,\n                      opacity: param.description ? 1 : 0.5,\n                    }}\n                  >\n                    {param.description || \"—\"}\n                  </td>\n                  <td className=\"px-4 py-3 text-right\">\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEdit(index);\n                      }}\n                      disabled={isAdding || editingIndex !== null}\n                      className=\"p-1 mr-2\"\n                      title=\"Edit (e)\"\n                    >\n                      <span className=\"codicon codicon-edit\"></span>\n                    </button>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDelete(index);\n                      }}\n                      disabled={isAdding || editingIndex !== null}\n                      className=\"p-1\"\n                      style={{ color: \"var(--vscode-errorForeground)\" }}\n                      title=\"Delete (d)\"\n                    >\n                      <span className=\"codicon codicon-trash\"></span>\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n            {isAdding && renderEditRow(true)}\n            {parameters.length === 0 && !isAdding && (\n              <tr>\n                <td\n                  colSpan={5}\n                  className=\"px-4 py-8 text-center text-sm\"\n                  style={{ opacity: 0.6 }}\n                >\n                  No parameters defined. Press 'o' or click \"Add Parameter\".\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/PortsTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":64,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeColumn' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":65,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":91,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":91,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2078,2080],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":108,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":108,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2622,2624],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":134,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":134,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3436,3438],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":258,"column":33,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":258,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7771,7773],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport {\n  FormField,\n  SelectField,\n  NumberField,\n} from \"../../../shared/components\";\nimport {\n  validateVhdlIdentifier,\n  validateUniqueName,\n} from \"../../../shared/utils/validation\";\nimport { useVimTableNavigation } from \"../../hooks/useVimTableNavigation\";\n\ninterface Port {\n  name: string;\n  direction: string;\n  width?: number;\n}\n\ninterface PortsTableProps {\n  ports: unknown[];\n  onUpdate: YamlUpdateHandler;\n}\n\nconst createEmptyPort = (): Port => ({\n  name: \"\",\n  direction: \"input\",\n  width: 1,\n});\n\nconst normalizePort = (port: Port): Port => {\n  // Normalize direction from in/out to input/output\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    inout: \"inout\",\n    input: \"input\",\n    output: \"output\",\n  };\n  return { ...port, direction: dirMap[port.direction] || \"input\" };\n};\n\n// Helper to display normalized direction\nconst displayDirection = (dir: string): string => {\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    inout: \"inout\",\n    input: \"input\",\n    output: \"output\",\n  };\n  return dirMap[dir] || dir;\n};\n\nconst COLUMN_KEYS = [\"name\", \"direction\", \"width\"];\n\n/**\n * Editable table for IP Core ports\n * Vim-style: h/j/k/l navigate cells, e edit, d delete, o add\n */\nexport const PortsTable: React.FC<PortsTableProps> = ({ ports: rawPorts, onUpdate }) => {\n  const ports = rawPorts as Port[];\n  const {\n    selectedIndex,\n    activeColumn,\n    editingIndex,\n    isAdding,\n    draft,\n    setDraft,\n    handleEdit,\n    handleAdd,\n    handleSave,\n    handleCancel,\n    handleDelete,\n    containerRef,\n    getRowProps,\n    getCellProps,\n  } = useVimTableNavigation<Port>({\n    items: ports,\n    onUpdate,\n    dataKey: \"ports\",\n    createEmptyItem: createEmptyPort,\n    normalizeItem: normalizePort,\n    columnKeys: COLUMN_KEYS,\n  });\n\n  const existingNames = ports\n    .map((p) => p.name)\n    .filter((_, i) => i !== editingIndex);\n  const nameError =\n    validateVhdlIdentifier(draft.name) ||\n    validateUniqueName(draft.name, existingNames);\n  const canSave = !nameError;\n\n  const renderEditRow = (isNew: boolean) => (\n    <tr\n      style={{\n        background: \"var(--vscode-list-activeSelectionBackground)\",\n        borderBottom: \"1px solid var(--vscode-panel-border)\",\n      }}\n      data-row-idx={editingIndex ?? ports.length}\n    >\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.name}\n          onChange={(v: string) => setDraft({ ...draft, name: v })}\n          error={nameError || undefined}\n          placeholder=\"port_name\"\n          required\n          data-edit-key=\"name\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={draft.direction}\n          options={[\n            { value: \"input\", label: \"input\" },\n            { value: \"output\", label: \"output\" },\n            { value: \"inout\", label: \"inout\" },\n          ]}\n          onChange={(v: string) => setDraft({ ...draft, direction: v })}\n          data-edit-key=\"direction\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <NumberField\n          label=\"\"\n          value={draft.width || 1}\n          onChange={(v: number) => setDraft({ ...draft, width: v })}\n          min={1}\n          data-edit-key=\"width\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3 text-right\">\n        <button\n          onClick={handleSave}\n          disabled={!canSave}\n          className=\"px-3 py-1 rounded text-xs mr-2\"\n          style={{\n            background: canSave\n              ? \"var(--vscode-button-background)\"\n              : \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: canSave ? 1 : 0.5,\n          }}\n        >\n          {isNew ? \"Add\" : \"Save\"}\n        </button>\n        <button\n          onClick={handleCancel}\n          className=\"px-3 py-1 rounded text-xs\"\n          style={{\n            background: \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n          }}\n        >\n          Cancel\n        </button>\n      </td>\n    </tr>\n  );\n\n  return (\n    <div ref={containerRef} className=\"p-6 space-y-4 outline-none\" tabIndex={0}>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-medium\">Ports</h2>\n          <p className=\"text-sm mt-1\" style={{ opacity: 0.7 }}>\n            {ports.length} port{ports.length !== 1 ? \"s\" : \"\"} •\n            <span className=\"ml-2 text-xs font-mono\" style={{ opacity: 0.5 }}>\n              h/j/k/l: navigate • e: edit • d: delete • o: add\n            </span>\n          </p>\n        </div>\n        <button\n          onClick={handleAdd}\n          disabled={isAdding || editingIndex !== null}\n          className=\"px-4 py-2 rounded text-sm flex items-center gap-2\"\n          style={{\n            background:\n              isAdding || editingIndex !== null\n                ? \"var(--vscode-button-secondaryBackground)\"\n                : \"var(--vscode-button-background)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: isAdding || editingIndex !== null ? 0.5 : 1,\n          }}\n        >\n          <span className=\"codicon codicon-add\"></span>Add Port\n        </button>\n      </div>\n\n      <div\n        className=\"rounded overflow-hidden\"\n        style={{ border: \"1px solid var(--vscode-panel-border)\" }}\n      >\n        <table className=\"w-full\">\n          <thead>\n            <tr\n              style={{\n                background: \"var(--vscode-editor-background)\",\n                borderBottom: \"1px solid var(--vscode-panel-border)\",\n              }}\n            >\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Name\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Direction\n              </th>\n              <th className=\"px-4 py-3 text-left text-xs font-semibold uppercase opacity-70\">\n                Width\n              </th>\n              <th className=\"px-4 py-3 text-right text-xs font-semibold uppercase opacity-70\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {ports.map((port, index) => {\n              if (editingIndex === index) {\n                return (\n                  <React.Fragment key={index}>\n                    {renderEditRow(false)}\n                  </React.Fragment>\n                );\n              }\n              const rowProps = getRowProps(index);\n              return (\n                <tr\n                  key={index}\n                  {...rowProps}\n                  onDoubleClick={() => handleEdit(index)}\n                >\n                  <td\n                    className=\"px-4 py-3 text-sm font-mono\"\n                    {...getCellProps(index, \"name\")}\n                  >\n                    {port.name}\n                  </td>\n                  <td\n                    className=\"px-4 py-3 text-sm\"\n                    {...getCellProps(index, \"direction\")}\n                  >\n                    {displayDirection(port.direction)}\n                  </td>\n                  <td\n                    className=\"px-4 py-3 text-sm\"\n                    {...getCellProps(index, \"width\")}\n                  >\n                    {port.width || 1}\n                  </td>\n                  <td className=\"px-4 py-3 text-right\">\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEdit(index);\n                      }}\n                      disabled={isAdding || editingIndex !== null}\n                      className=\"p-1 mr-2\"\n                      title=\"Edit (e)\"\n                    >\n                      <span className=\"codicon codicon-edit\"></span>\n                    </button>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDelete(index);\n                      }}\n                      disabled={isAdding || editingIndex !== null}\n                      className=\"p-1\"\n                      style={{ color: \"var(--vscode-errorForeground)\" }}\n                      title=\"Delete (d)\"\n                    >\n                      <span className=\"codicon codicon-trash\"></span>\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n            {isAdding && renderEditRow(true)}\n            {ports.length === 0 && !isAdding && (\n              <tr>\n                <td\n                  colSpan={4}\n                  className=\"px-4 py-8 text-center text-sm\"\n                  style={{ opacity: 0.6 }}\n                >\n                  No ports defined. Press 'o' or click \"Add Port\".\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/components/sections/ResetsTable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":50,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":50,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1410,1412],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":66,"column":21,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":66,"endColumn":23,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1782,1784],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":102,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activeColumn' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":103,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":103,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":129,"column":40,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":129,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3487,3489],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":146,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":146,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4032,4034],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":158,"column":31,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":158,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4362,4364],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":200,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":200,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5642,5644],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":262,"column":34,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":262,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7729,7731],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\nimport type { YamlUpdateHandler } from \"../../../types/editor\";\nimport { EditableTable, FormField, SelectField } from \"../../../shared/components\";\nimport {\n  validateVhdlIdentifier,\n  validateUniqueName,\n} from \"../../../shared/utils/validation\";\nimport { useVimTableNavigation } from \"../../hooks/useVimTableNavigation\";\n\ninterface Reset {\n  name: string; // Physical port name\n  logicalName?: string; // Standard logical name (RESET/RESET_N)\n  polarity: string;\n  direction?: string;\n}\n\ninterface BusInterface {\n  name: string;\n  associatedReset?: string;\n}\n\ninterface ResetsTableProps {\n  resets: unknown[];\n  busInterfaces?: unknown[];\n  onUpdate: YamlUpdateHandler;\n}\n\nconst createEmptyReset = (): Reset => ({\n  name: \"\",\n  logicalName: \"RESET_N\",\n  polarity: \"activeLow\",\n  direction: \"input\",\n});\n\nconst normalizeReset = (reset: Reset): Reset => {\n  // Normalize polarity from snake_case (active_low) to camelCase (activeLow)\n  let normalizedPolarity = reset.polarity;\n  if (reset.polarity === \"active_low\") {\n    normalizedPolarity = \"activeLow\";\n  } else if (reset.polarity === \"active_high\") {\n    normalizedPolarity = \"activeHigh\";\n  }\n  // Normalize direction from in/out to input/output\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    input: \"input\",\n    output: \"output\",\n  };\n  const normalizedDirection = dirMap[reset.direction || \"input\"] || \"input\";\n  return {\n    ...reset,\n    polarity: normalizedPolarity,\n    direction: normalizedDirection,\n  };\n};\n\n// Helper to display normalized direction\nconst displayDirection = (dir?: string): string => {\n  const dirMap: { [key: string]: string } = {\n    in: \"input\",\n    out: \"output\",\n    input: \"input\",\n    output: \"output\",\n  };\n  return dirMap[dir || \"input\"] || \"input\";\n};\n\nconst COLUMN_KEYS = [\"name\", \"logicalName\", \"polarity\", \"direction\", \"usedBy\"];\nconst TABLE_COLUMNS = [\n  { key: \"name\", header: \"Physical Name\" },\n  { key: \"logicalName\", header: \"Logical Name\" },\n  { key: \"polarity\", header: \"Polarity\" },\n  { key: \"direction\", header: \"Direction\" },\n  { key: \"usedBy\", header: \"Used By\" },\n  { key: \"actions\", header: \"Actions\", align: \"right\" as const },\n];\nconst KEYBOARD_HINT = \"• h/j/k/l: navigate • e: edit • d: delete • o: add\";\n\n// Helper to find which interfaces use a reset\nconst getUsedByInterfaces = (\n  resetName: string,\n  busInterfaces: BusInterface[],\n): string[] => {\n  return busInterfaces\n    .filter((bus) => bus.associatedReset === resetName)\n    .map((bus) => bus.name);\n};\n\n/**\n * Editable table for IP Core resets\n * Vim-style: h/j/k/l navigate cells, e edit, d delete, o add\n */\nexport const ResetsTable: React.FC<ResetsTableProps> = ({\n  resets: rawResets,\n  busInterfaces: rawBusInterfaces = [],\n  onUpdate,\n}) => {\n  const resets = rawResets as Reset[];\n  const busInterfaces = rawBusInterfaces as BusInterface[];\n  const {\n    selectedIndex,\n    activeColumn,\n    editingIndex,\n    isAdding,\n    draft,\n    setDraft,\n    handleEdit,\n    handleAdd,\n    handleSave,\n    handleCancel,\n    handleDelete,\n    containerRef,\n    getRowProps,\n    getCellProps,\n  } = useVimTableNavigation<Reset>({\n    items: resets,\n    onUpdate,\n    dataKey: \"resets\",\n    createEmptyItem: createEmptyReset,\n    normalizeItem: normalizeReset,\n    columnKeys: COLUMN_KEYS,\n  });\n\n  const existingNames = resets\n    .map((r) => r.name)\n    .filter((_, i) => i !== editingIndex);\n  const nameError =\n    validateVhdlIdentifier(draft.name) ||\n    validateUniqueName(draft.name, existingNames);\n  const canSave = !nameError;\n\n  const renderEditRow = (isNew: boolean) => (\n    <tr\n      style={{\n        background: \"var(--vscode-list-activeSelectionBackground)\",\n        borderBottom: \"1px solid var(--vscode-panel-border)\",\n      }}\n      data-row-idx={editingIndex ?? resets.length}\n    >\n      <td className=\"px-4 py-3\">\n        <FormField\n          label=\"\"\n          value={draft.name}\n          onChange={(v: string) => setDraft({ ...draft, name: v })}\n          error={nameError || undefined}\n          placeholder=\"i_rst_n_sys\"\n          required\n          data-edit-key=\"name\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={\n            draft.logicalName ||\n            (draft.polarity === \"activeLow\" ? \"RESET_N\" : \"RESET\")\n          }\n          options={[\n            { value: \"RESET_N\", label: \"RESET_N\" },\n            { value: \"RESET\", label: \"RESET\" },\n          ]}\n          onChange={(v: string) =>\n            setDraft({\n              ...draft,\n              logicalName: v,\n              polarity: v === \"RESET_N\" ? \"activeLow\" : \"activeHigh\",\n            })\n          }\n          data-edit-key=\"logicalName\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={draft.polarity}\n          options={[\n            { value: \"activeLow\", label: \"activeLow\" },\n            { value: \"activeHigh\", label: \"activeHigh\" },\n          ]}\n          onChange={(v: string) =>\n            setDraft({\n              ...draft,\n              polarity: v,\n              logicalName: v === \"activeLow\" ? \"RESET_N\" : \"RESET\",\n            })\n          }\n          data-edit-key=\"polarity\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3\">\n        <SelectField\n          label=\"\"\n          value={draft.direction || \"input\"}\n          options={[\n            { value: \"input\", label: \"input\" },\n            { value: \"output\", label: \"output\" },\n          ]}\n          onChange={(v: string) => setDraft({ ...draft, direction: v })}\n          data-edit-key=\"direction\"\n          onSave={canSave ? handleSave : undefined}\n          onCancel={handleCancel}\n        />\n      </td>\n      <td className=\"px-4 py-3 text-right\">\n        <button\n          onClick={handleSave}\n          disabled={!canSave}\n          className=\"px-3 py-1 rounded text-xs mr-2\"\n          style={{\n            background: canSave\n              ? \"var(--vscode-button-background)\"\n              : \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n            opacity: canSave ? 1 : 0.5,\n          }}\n        >\n          {isNew ? \"Add\" : \"Save\"}\n        </button>\n        <button\n          onClick={handleCancel}\n          className=\"px-3 py-1 rounded text-xs\"\n          style={{\n            background: \"var(--vscode-button-secondaryBackground)\",\n            color: \"var(--vscode-button-foreground)\",\n          }}\n        >\n          Cancel\n        </button>\n      </td>\n    </tr>\n  );\n\n  return (\n    <EditableTable\n      title=\"Resets\"\n      rows={resets}\n      rowLabelSingular=\"reset\"\n      keyboardHint={KEYBOARD_HINT}\n      addButtonLabel=\"Add Reset\"\n      onAdd={handleAdd}\n      disableAdd={isAdding || editingIndex !== null}\n      columns={TABLE_COLUMNS}\n      editingIndex={editingIndex}\n      isAdding={isAdding}\n      renderEditRow={renderEditRow}\n      renderDisplayRow={(reset, index) => {\n        const rowProps = getRowProps(index);\n        const usedBy = getUsedByInterfaces(reset.name, busInterfaces);\n        return (\n          <tr key={index} {...rowProps} onDoubleClick={() => handleEdit(index)}>\n            <td className=\"px-4 py-3 text-sm font-mono\" {...getCellProps(index, \"name\")}>\n              {reset.name}\n            </td>\n            <td className=\"px-4 py-3 text-sm font-mono\" {...getCellProps(index, \"logicalName\")}>\n              {reset.logicalName ||\n                (reset.polarity === \"activeLow\" ? \"RESET_N\" : \"RESET\")}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"polarity\")}>\n              {reset.polarity}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"direction\")}>\n              {displayDirection(reset.direction)}\n            </td>\n            <td className=\"px-4 py-3 text-sm\" {...getCellProps(index, \"usedBy\")}>\n              {usedBy.length > 0 ? (\n                <div className=\"flex flex-wrap gap-1\">\n                  {usedBy.map((name, i) => (\n                    <span\n                      key={i}\n                      className=\"px-2 py-0.5 rounded text-xs font-mono\"\n                      style={{\n                        background: \"var(--vscode-badge-background)\",\n                        color: \"var(--vscode-badge-foreground)\",\n                      }}\n                    >\n                      {name}\n                    </span>\n                  ))}\n                </div>\n              ) : (\n                <span style={{ opacity: 0.5 }}>—</span>\n              )}\n            </td>\n            <td className=\"px-4 py-3 text-right\">\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleEdit(index);\n                }}\n                disabled={isAdding || editingIndex !== null}\n                className=\"p-1 mr-2\"\n                title=\"Edit (e)\"\n              >\n                <span className=\"codicon codicon-edit\"></span>\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDelete(index);\n                }}\n                disabled={isAdding || editingIndex !== null}\n                className=\"p-1\"\n                style={{ color: \"var(--vscode-errorForeground)\" }}\n                title=\"Delete (d)\"\n              >\n                <span className=\"codicon codicon-trash\"></span>\n              </button>\n            </td>\n          </tr>\n        );\n      }}\n      emptyMessage={'No resets defined. Press \\'o\\' or click \"Add Reset\".'}\n      emptyColSpan={6}\n      containerRef={containerRef}\n    />\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/hooks/useIpCoreState.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[119,122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[119,122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[229,232],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[229,232],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[251,254],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[251,254],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[275,278],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[275,278],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UpdateMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[421,424],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[421,424],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[445,448],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[445,448],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1158,1161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1158,1161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":58,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":58,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":65,"column":13,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":65,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .apiVersion on an `any` value.","line":66,"column":12,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":66,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .vlnv on an `any` value.","line":66,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":66,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":72,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":72,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":76,"column":9,"nodeType":"Property","messageId":"anyAssignment","endLine":76,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2156,2159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2156,2159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":111,"column":15,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":111,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":115,"column":11,"nodeType":"Property","messageId":"anyAssignment","endLine":115,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":137,"column":13,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":137,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .busInterfaces on an `any` value.","line":140,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":140,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .busInterfaces on an `any` value.","line":140,"column":47,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":140,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .busInterfaces on an `any` value.","line":141,"column":25,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":141,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedClock on an `any` value.","line":143,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":143,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":144,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":146,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .clocks on an `any` value.","line":145,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":145,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .clocks on an `any` value.","line":146,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":146,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":146,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":146,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":146,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3564,3567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3564,3567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":146,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":146,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedClock on an `any` value.","line":146,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":146,"endColumn":74},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":149,"column":42,"nodeType":"MemberExpression","messageId":"invalidType","endLine":149,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":149,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":149,"endColumn":50},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":149,"column":81,"nodeType":"MemberExpression","messageId":"invalidType","endLine":149,"endColumn":100},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedClock on an `any` value.","line":149,"column":81,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":149,"endColumn":100},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":151,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":151,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":151,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":151,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedReset on an `any` value.","line":158,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":158,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":159,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":161,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .resets on an `any` value.","line":160,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":160,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .resets on an `any` value.","line":161,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":161,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":161,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4098,4101],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4098,4101],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":161,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedReset on an `any` value.","line":161,"column":55,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":161,"endColumn":74},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":164,"column":42,"nodeType":"MemberExpression","messageId":"invalidType","endLine":164,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":164,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":164,"endColumn":50},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":164,"column":81,"nodeType":"MemberExpression","messageId":"invalidType","endLine":164,"endColumn":100},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .associatedReset on an `any` value.","line":164,"column":81,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":164,"endColumn":100},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":166,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":166,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":166,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":166,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":173,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":173,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":174,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":176,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .endsWith on an `any` value.","line":175,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":175,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":175,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":175,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":175,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":175,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":175,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":175,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .endsWith on an `any` value.","line":176,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":176,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":176,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":176,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":176,"column":13,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":176,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":176,"column":13,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":176,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":177,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":182,"endColumn":86},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMaps on an `any` value.","line":179,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":179,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMaps on an `any` value.","line":180,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":180,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":180,"column":15,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":180,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4825,4828],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4825,4828],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":180,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":180,"endColumn":56},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":180,"column":61,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":180,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":182,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":182,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4970,4973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4970,4973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":182,"column":57,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":182,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":182,"column":68,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":182,"endColumn":84},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":185,"column":42,"nodeType":"MemberExpression","messageId":"invalidType","endLine":185,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":185,"column":42,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":185,"endColumn":50},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"any\" of template literal expression.","line":185,"column":86,"nodeType":"MemberExpression","messageId":"invalidType","endLine":185,"endColumn":102},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .memoryMapRef on an `any` value.","line":185,"column":86,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":185,"endColumn":102},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":187,"column":15,"nodeType":"Property","messageId":"anyAssignment","endLine":187,"endColumn":35},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .name on an `any` value.","line":187,"column":27,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":187,"endColumn":35}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":69,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\nimport * as yaml from 'yaml';\n\nexport interface IpCoreState {\n  ipCore: any | null;\n  rawYaml: string;\n  parseError: string | null;\n  fileName: string;\n  imports: {\n    memoryMaps?: any[];\n    fileSets?: any[];\n    busLibrary?: any;\n  };\n}\n\ninterface UpdateMessage {\n  type: 'update';\n  text: string;\n  fileName: string;\n  imports?: {\n    memoryMaps?: any[];\n    fileSets?: any[];\n    busLibrary?: any;\n  };\n}\n\nexport interface ValidationError {\n  message: string;\n  section: 'busInterfaces' | 'clocks' | 'resets' | 'ports' | 'parameters';\n  entityName: string;\n  field: string;\n}\n\n/**\n * Hook for managing IP Core state\n *\n * Handles:\n * - YAML parsing\n * - State updates from extension\n * - Import resolution data\n * - Reference validation\n */\nexport function useIpCoreState() {\n  const [state, setState] = useState<IpCoreState>({\n    ipCore: null,\n    rawYaml: '',\n    parseError: null,\n    fileName: '',\n    imports: {},\n  });\n\n  /**\n   * Update state from YAML text\n   * Called when extension sends new document content\n   */\n  const updateFromYaml = useCallback((text: string, fileName: string, imports?: any) => {\n    try {\n      const parsed = yaml.parse(text);\n\n      if (!parsed || typeof parsed !== 'object') {\n        throw new Error('Invalid YAML: must be an object');\n      }\n\n      // Basic validation: check for IP core structure\n      const data = parsed;\n      if (!data.apiVersion || !data.vlnv) {\n        // Try to allow it temporarily if it's being edited or empty\n        // but for now stick to strict check or log warning\n      }\n\n      setState({\n        ipCore: data,\n        rawYaml: text,\n        parseError: null,\n        fileName,\n        imports: imports || {},\n      });\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        rawYaml: text,\n        parseError: (error as Error).message,\n        fileName,\n      }));\n    }\n  }, []);\n\n  /**\n   * Update IP core data at a specific path\n   *\n   * @param path Path to update (e.g., ['clocks', 0, 'name'])\n   * @param value New value\n   */\n  const updateIpCore = useCallback((path: Array<string | number>, value: any) => {\n    setState((prev) => {\n      if (!prev.ipCore) {\n        return prev;\n      }\n\n      try {\n        // Parse the existing YAML into a Document to preserve comments/structure\n        const doc = yaml.parseDocument(prev.rawYaml);\n\n        // Update the value at the specified path\n        doc.setIn(path, value);\n\n        // Convert back to string (preserves format and comments)\n        const newYaml = doc.toString({ indent: 2 });\n\n        // Get new JS object for the state\n        const newIpCore = doc.toJSON();\n\n        return {\n          ...prev,\n          ipCore: newIpCore,\n          rawYaml: newYaml,\n        };\n      } catch (error) {\n        console.error('Failed to update YAML:', error);\n        return prev;\n      }\n    });\n  }, []);\n\n  /**\n   * Get validation errors for cross-references\n   */\n  /**\n   * Get validation errors for cross-references\n   */\n  const getValidationErrors = useCallback((): ValidationError[] => {\n    if (!state.ipCore) {\n      return [];\n    }\n\n    const errors: ValidationError[] = [];\n    const { ipCore } = state;\n\n    // Validate bus interface references\n    if (ipCore.busInterfaces && Array.isArray(ipCore.busInterfaces)) {\n      for (const bus of ipCore.busInterfaces) {\n        // Check associated clock\n        if (bus.associatedClock) {\n          const clockExists =\n            Array.isArray(ipCore.clocks) &&\n            ipCore.clocks.some((c: any) => c.name === bus.associatedClock);\n          if (!clockExists) {\n            errors.push({\n              message: `Bus interface '${bus.name}' references unknown clock '${bus.associatedClock}'`,\n              section: 'busInterfaces',\n              entityName: bus.name,\n              field: 'associatedClock',\n            });\n          }\n        }\n\n        // Check associated reset\n        if (bus.associatedReset) {\n          const resetExists =\n            Array.isArray(ipCore.resets) &&\n            ipCore.resets.some((r: any) => r.name === bus.associatedReset);\n          if (!resetExists) {\n            errors.push({\n              message: `Bus interface '${bus.name}' references unknown reset '${bus.associatedReset}'`,\n              section: 'busInterfaces',\n              entityName: bus.name,\n              field: 'associatedReset',\n            });\n          }\n        }\n\n        // Check memory map reference\n        if (bus.memoryMapRef) {\n          const isFilePath =\n            bus.memoryMapRef.toLowerCase().endsWith('.yml') ||\n            bus.memoryMapRef.toLowerCase().endsWith('.yaml');\n          const memMapExists =\n            isFilePath ||\n            (Array.isArray(ipCore.memoryMaps) &&\n              ipCore.memoryMaps.some((m: any) => m.name === bus.memoryMapRef)) ||\n            (Array.isArray(state.imports.memoryMaps) &&\n              state.imports.memoryMaps.some((m: any) => m.name === bus.memoryMapRef));\n          if (!memMapExists) {\n            errors.push({\n              message: `Bus interface '${bus.name}' references unknown memory map '${bus.memoryMapRef}'`,\n              section: 'busInterfaces',\n              entityName: bus.name,\n              field: 'memoryMapRef',\n            });\n          }\n        }\n      }\n    }\n\n    return errors;\n  }, [state.ipCore, state.imports]);\n\n  return {\n    ...state,\n    updateFromYaml,\n    updateIpCore,\n    getValidationErrors,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/hooks/useIpCoreSync.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .postMessage on an `any` value.","line":13,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":13,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":13,"column":7,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":13,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect } from 'react';\nimport { vscode } from '../../vscode';\n\n/**\n * Hook for syncing IP Core data with VS Code extension\n */\nexport function useIpCoreSync(rawYaml: string) {\n  /**\n   * Send update to extension\n   */\n  const sendUpdate = (yamlText: string) => {\n    if (vscode) {\n      vscode.postMessage({\n        type: 'update',\n        text: yamlText,\n      });\n    }\n  };\n\n  /**\n   * Auto-send updates when YAML changes\n   * Debounced to avoid excessive messages\n   */\n  useEffect(() => {\n    if (!rawYaml) {\n      return;\n    }\n\n    const timeoutId = setTimeout(() => {\n      sendUpdate(rawYaml);\n    }, 500); // 500ms debounce\n\n    return () => clearTimeout(timeoutId);\n  }, [rawYaml]);\n\n  return { sendUpdate };\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/hooks/useNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/ipcore/hooks/useVimTableNavigation.ts","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":2,"message":"Invalid type \"number | null\" of template literal expression.","line":135,"column":65,"nodeType":"Identifier","messageId":"invalidType","endLine":135,"endColumn":77}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect, useRef } from 'react';\n\n/**\n * Vim-style table navigation hook for IP Core tables\n * Supports:\n * - j/k or Arrow Up/Down for row navigation\n * - h/l or Arrow Left/Right for column navigation\n * - Enter or 'e' for editing active cell\n * - Escape for cancel\n * - 'd' or Delete for deletion\n * - 'o' for insert after (add new row)\n */\nexport interface UseVimTableNavigationProps<T> {\n  items: T[];\n  onUpdate: (path: Array<string | number>, value: T[]) => void;\n  dataKey: string; // e.g., 'clocks', 'resets', 'ports'\n  createEmptyItem: () => T;\n  normalizeItem?: (item: T) => T; // For value normalization on edit\n  /** Column keys for navigation order */\n  columnKeys: string[];\n}\n\nexport interface UseVimTableNavigationReturn<T> {\n  /** Currently selected row index */\n  selectedIndex: number;\n  /** Set selected row index */\n  setSelectedIndex: (idx: number) => void;\n  /** Currently active column key */\n  activeColumn: string;\n  /** Set active column */\n  setActiveColumn: (key: string) => void;\n  /** Whether currently editing a row */\n  editingIndex: number | null;\n  /** Whether adding a new row */\n  isAdding: boolean;\n  /** Draft item being edited */\n  draft: T;\n  /** Update draft */\n  setDraft: React.Dispatch<React.SetStateAction<T>>;\n  /** Start editing a row */\n  handleEdit: (index: number) => void;\n  /** Start adding a new row */\n  handleAdd: () => void;\n  /** Save current edit */\n  handleSave: () => void;\n  /** Cancel editing */\n  handleCancel: () => void;\n  /** Delete a row */\n  handleDelete: (index: number) => void;\n  /** Container ref for key event handling */\n  containerRef: React.RefObject<HTMLDivElement>;\n  /** Get row props for keyboard navigation */\n  getRowProps: (index: number) => {\n    tabIndex: number;\n    onKeyDown: (e: React.KeyboardEvent) => void;\n    onClick: () => void;\n    style: React.CSSProperties;\n    'data-row-idx': number;\n  };\n  /** Get cell props for column-level navigation */\n  getCellProps: (\n    rowIndex: number,\n    columnKey: string\n  ) => {\n    'data-col-key': string;\n    onClick: (e: React.MouseEvent) => void;\n    style: React.CSSProperties;\n  };\n  /** Focus the editor for the active cell */\n  focusActiveCell: () => void;\n}\n\nexport function useVimTableNavigation<T>({\n  items,\n  onUpdate,\n  dataKey,\n  createEmptyItem,\n  normalizeItem,\n  columnKeys,\n}: UseVimTableNavigationProps<T>): UseVimTableNavigationReturn<T> {\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [activeColumn, setActiveColumn] = useState(columnKeys[0] || '');\n  const [editingIndex, setEditingIndex] = useState<number | null>(null);\n  const [isAdding, setIsAdding] = useState(false);\n  const [draft, setDraft] = useState<T>(createEmptyItem());\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Focus the editor element for the active cell\n  const focusActiveCell = useCallback(() => {\n    requestAnimationFrame(() => {\n      const container = containerRef.current;\n      if (!container) {\n        return;\n      }\n      const row = container.querySelector(`tr[data-row-idx=\"${selectedIndex}\"]`);\n      if (!row) {\n        return;\n      }\n      const cell = row.querySelector(`[data-edit-key=\"${activeColumn}\"]`) as HTMLElement;\n      if (cell) {\n        cell.focus();\n      }\n    });\n  }, [selectedIndex, activeColumn]);\n\n  // Scroll to visible\n  const scrollToCell = useCallback((rowIndex: number, colKey: string) => {\n    requestAnimationFrame(() => {\n      const container = containerRef.current;\n      if (!container) {\n        return;\n      }\n      const row = container.querySelector(`tr[data-row-idx=\"${rowIndex}\"]`) as HTMLElement;\n      if (row) {\n        row.scrollIntoView({ block: rowIndex === 0 ? 'center' : 'nearest' });\n      }\n      const cell = row?.querySelector(`td[data-col-key=\"${colKey}\"]`) as HTMLElement;\n      if (cell) {\n        cell.scrollIntoView({ block: 'nearest', inline: 'nearest' });\n      }\n    });\n  }, []);\n\n  // Auto-focus the active cell's editor when entering edit mode OR when adding a new item\n  useEffect(() => {\n    if (editingIndex !== null || isAdding) {\n      // Use setTimeout to ensure React has rendered the edit row\n      const timerId = setTimeout(() => {\n        const container = containerRef.current;\n        if (!container) {\n          return;\n        }\n        // For adding, the new row is at the end (items.length)\n        const targetRowIdx = isAdding ? items.length : editingIndex;\n        const row = container.querySelector(`tr[data-row-idx=\"${targetRowIdx}\"]`);\n        if (!row) {\n          return;\n        }\n        // For adding, always focus the \"name\" field (first column); for editing, focus the active column\n        const targetColumn = isAdding ? columnKeys[0] : activeColumn;\n        const cell = row.querySelector(`[data-edit-key=\"${targetColumn}\"]`) as HTMLElement;\n        if (cell) {\n          cell.focus();\n        }\n      }, 0);\n      return () => clearTimeout(timerId);\n    }\n  }, [editingIndex, isAdding, activeColumn, columnKeys, items.length]);\n\n  // Handle keyboard navigation at container level\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Don't handle if editing or in an input (except for Escape)\n      const target = e.target as HTMLElement;\n      const isTyping = target.closest(\n        'input, textarea, select, [contenteditable=\"true\"], vscode-text-field, vscode-text-area, vscode-dropdown'\n      );\n\n      if (isTyping || editingIndex !== null || isAdding) {\n        // Handle Escape to cancel editing\n        if (e.key === 'Escape') {\n          e.preventDefault();\n          handleCancel();\n        }\n        return;\n      }\n\n      // Skip if using Ctrl/Cmd modifiers\n      if (e.ctrlKey || e.metaKey) {\n        return;\n      }\n\n      const key = e.key.toLowerCase();\n\n      // Vim key mapping\n      const vimToArrow: Record<string, string> = {\n        h: 'ArrowLeft',\n        j: 'ArrowDown',\n        k: 'ArrowUp',\n        l: 'ArrowRight',\n      };\n      const normalizedKey = vimToArrow[key] ?? e.key;\n\n      // Row navigation (j/k or ArrowUp/Down)\n      if (normalizedKey === 'ArrowDown') {\n        e.preventDefault();\n        const nextRow = Math.min(selectedIndex + 1, items.length - 1);\n        setSelectedIndex(nextRow);\n        scrollToCell(nextRow, activeColumn);\n      } else if (normalizedKey === 'ArrowUp') {\n        e.preventDefault();\n        const prevRow = Math.max(selectedIndex - 1, 0);\n        setSelectedIndex(prevRow);\n        scrollToCell(prevRow, activeColumn);\n      }\n      // Column navigation (h/l or ArrowLeft/Right)\n      else if (normalizedKey === 'ArrowLeft') {\n        e.preventDefault();\n        const currentColIdx = columnKeys.indexOf(activeColumn);\n        const prevColIdx = Math.max(currentColIdx - 1, 0);\n        const newCol = columnKeys[prevColIdx];\n        setActiveColumn(newCol);\n        scrollToCell(selectedIndex, newCol);\n      } else if (normalizedKey === 'ArrowRight') {\n        e.preventDefault();\n        const currentColIdx = columnKeys.indexOf(activeColumn);\n        const nextColIdx = Math.min(currentColIdx + 1, columnKeys.length - 1);\n        const newCol = columnKeys[nextColIdx];\n        setActiveColumn(newCol);\n        scrollToCell(selectedIndex, newCol);\n      }\n      // Edit active cell\n      else if (key === 'e' || e.key === 'Enter') {\n        e.preventDefault();\n        if (items.length > 0 && selectedIndex >= 0 && selectedIndex < items.length) {\n          handleEdit(selectedIndex);\n          focusActiveCell();\n        }\n      }\n      // Delete\n      else if (key === 'd' || e.key === 'Delete') {\n        e.preventDefault();\n        if (items.length > 0 && selectedIndex >= 0 && selectedIndex < items.length) {\n          handleDelete(selectedIndex);\n        }\n      }\n      // Insert (add new row)\n      else if (key === 'o') {\n        e.preventDefault();\n        handleAdd();\n      }\n      // Go to first row (gg or G with shift)\n      else if (key === 'g') {\n        e.preventDefault();\n        if (e.shiftKey) {\n          // G: go to last\n          setSelectedIndex(items.length - 1);\n          scrollToCell(items.length - 1, activeColumn);\n        } else {\n          // g: go to first\n          setSelectedIndex(0);\n          scrollToCell(0, activeColumn);\n        }\n      }\n    };\n\n    container.addEventListener('keydown', handleKeyDown);\n    return () => container.removeEventListener('keydown', handleKeyDown);\n  }, [\n    items.length,\n    selectedIndex,\n    activeColumn,\n    editingIndex,\n    isAdding,\n    columnKeys,\n    scrollToCell,\n    focusActiveCell,\n  ]);\n\n  const handleAdd = useCallback(() => {\n    setIsAdding(true);\n    setDraft(createEmptyItem());\n  }, [createEmptyItem]);\n\n  const handleEdit = useCallback(\n    (index: number) => {\n      setEditingIndex(index);\n      const item = items[index];\n      setDraft(normalizeItem ? normalizeItem(item) : { ...item });\n    },\n    [items, normalizeItem]\n  );\n\n  const handleSave = useCallback(() => {\n    if (isAdding) {\n      onUpdate([dataKey], [...items, draft]);\n      setSelectedIndex(items.length); // Select newly added row\n    } else if (editingIndex !== null) {\n      const updated = [...items];\n      updated[editingIndex] = draft;\n      onUpdate([dataKey], updated);\n    }\n    setIsAdding(false);\n    setEditingIndex(null);\n    setDraft(createEmptyItem());\n    // Refocus the container so vim navigation continues to work\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, [isAdding, editingIndex, draft, items, onUpdate, dataKey, createEmptyItem]);\n\n  const handleCancel = useCallback(() => {\n    setIsAdding(false);\n    setEditingIndex(null);\n    setDraft(createEmptyItem());\n    // Refocus the container so vim navigation continues to work\n    setTimeout(() => containerRef.current?.focus(), 0);\n  }, [createEmptyItem]);\n\n  const handleDelete = useCallback(\n    (index: number) => {\n      const updated = items.filter((_, i) => i !== index);\n      onUpdate([dataKey], updated);\n      // Adjust selection if needed\n      if (selectedIndex >= updated.length) {\n        setSelectedIndex(Math.max(0, updated.length - 1));\n      }\n    },\n    [items, onUpdate, dataKey, selectedIndex]\n  );\n\n  const getRowProps = useCallback(\n    (index: number) => ({\n      tabIndex: 0,\n      onKeyDown: (e: React.KeyboardEvent) => {\n        // Handle Enter to edit when row is focused\n        if (e.key === 'Enter' && editingIndex === null && !isAdding) {\n          e.preventDefault();\n          handleEdit(index);\n        }\n      },\n      onClick: () => {\n        setSelectedIndex(index);\n      },\n      style: {\n        background:\n          selectedIndex === index\n            ? 'var(--vscode-list-activeSelectionBackground)'\n            : 'var(--vscode-editor-background)',\n        borderBottom: '1px solid var(--vscode-panel-border)',\n        cursor: 'pointer',\n      } as React.CSSProperties,\n      'data-row-idx': index,\n    }),\n    [selectedIndex, editingIndex, isAdding, handleEdit]\n  );\n\n  const getCellProps = useCallback(\n    (rowIndex: number, columnKey: string) => ({\n      'data-col-key': columnKey,\n      onClick: (e: React.MouseEvent) => {\n        e.stopPropagation();\n        setSelectedIndex(rowIndex);\n        setActiveColumn(columnKey);\n      },\n      style: {\n        outline:\n          selectedIndex === rowIndex && activeColumn === columnKey\n            ? '2px solid var(--vscode-focusBorder)'\n            : 'none',\n        outlineOffset: '-2px',\n      } as React.CSSProperties,\n    }),\n    [selectedIndex, activeColumn]\n  );\n\n  return {\n    selectedIndex,\n    setSelectedIndex,\n    activeColumn,\n    setActiveColumn,\n    editingIndex,\n    isAdding,\n    draft,\n    setDraft,\n    handleEdit,\n    handleAdd,\n    handleSave,\n    handleCancel,\n    handleDelete,\n    containerRef,\n    getRowProps,\n    getCellProps,\n    focusActiveCell,\n  };\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/services/DataNormalizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/services/SpatialInsertionService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/services/YamlPathResolver.ts","messages":[{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":29,"column":18,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":29,"endColumn":20},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":35,"column":16,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":35,"endColumn":18},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":47,"column":18,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":47,"endColumn":20},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":65,"column":18,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":65,"endColumn":20},{"ruleId":"eqeqeq","severity":2,"message":"Expected '===' and instead saw '=='.","line":71,"column":16,"nodeType":"BinaryExpression","messageId":"unexpected","endLine":71,"endColumn":18}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Type representing a YAML path as an array of keys/indices\n */\nexport type YamlPath = Array<string | number>;\n\n/**\n * Information about the memory map root in the YAML structure\n */\nexport interface MapRootInfo {\n  root: unknown;\n  selectionRootPath: YamlPath;\n  map: unknown;\n}\n\n/**\n * Service for navigating and manipulating YAML data structures\n */\nexport class YamlPathResolver {\n  /**\n   * Set a value at a specific path in the YAML structure\n   */\n  static setAtPath(root: unknown, path: YamlPath, value: unknown): void {\n    if (!path.length) {\n      throw new Error('Cannot set empty path');\n    }\n    let cursor: unknown = root;\n    for (let i = 0; i < path.length - 1; i++) {\n      const key = path[i];\n      if (cursor == null) {\n        throw new Error(`Path not found at ${String(key)}`);\n      }\n      cursor = (cursor as Record<string | number, unknown>)[key];\n    }\n    const last = path[path.length - 1];\n    if (cursor == null) {\n      throw new Error(`Path not found at ${String(last)}`);\n    }\n    (cursor as Record<string | number, unknown>)[last] = value;\n  }\n\n  /**\n   * Get a value at a specific path in the YAML structure\n   */\n  static getAtPath(root: unknown, path: YamlPath): unknown {\n    let cursor: unknown = root;\n    for (const key of path) {\n      if (cursor == null) {\n        return undefined;\n      }\n      cursor = (cursor as Record<string | number, unknown>)[key];\n    }\n    return cursor;\n  }\n\n  /**\n   * Delete a value at a specific path in the YAML structure\n   */\n  static deleteAtPath(root: unknown, path: YamlPath): void {\n    if (!path.length) {\n      return;\n    }\n    let cursor: unknown = root;\n    for (let i = 0; i < path.length - 1; i++) {\n      const key = path[i];\n      if (cursor == null) {\n        return;\n      }\n      cursor = (cursor as Record<string | number, unknown>)[key];\n    }\n    const last = path[path.length - 1];\n    if (cursor == null) {\n      return;\n    }\n    if (Array.isArray(cursor) && typeof last === 'number') {\n      cursor.splice(last, 1);\n      return;\n    }\n    delete (cursor as Record<string | number, unknown>)[last];\n  }\n\n  /**\n   * Determine the root structure of the memory map YAML\n   * Handles both standalone maps and maps nested in arrays or objects\n   */\n  static getMapRootInfo(data: unknown): MapRootInfo {\n    if (Array.isArray(data)) {\n      return { root: data, selectionRootPath: [0], map: data[0] };\n    }\n    if (data && typeof data === 'object' && Array.isArray((data as Record<string, unknown>).memory_maps)) {\n      return { root: data, selectionRootPath: ['memory_maps', 0], map: ((data as Record<string, unknown>).memory_maps as unknown[])[0] };\n    }\n    return { root: data, selectionRootPath: [], map: data };\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/services/YamlService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/CheckboxField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[725,728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[725,728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `boolean`.","line":29,"column":38,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":29,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":29,"column":38,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":29,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { VSCodeCheckbox } from '@vscode/webview-ui-toolkit/react';\n\nexport interface CheckboxFieldProps {\n  label: string;\n  checked: boolean;\n  onChange: (checked: boolean) => void;\n  disabled?: boolean;\n  /** Additional data attribute for edit key (vim navigation) */\n  'data-edit-key'?: string;\n}\n\n/**\n * Checkbox field for boolean values\n * Uses VSCode Web UI Toolkit for native VS Code look and feel\n */\nexport const CheckboxField: React.FC<CheckboxFieldProps> = ({\n  label,\n  checked,\n  onChange,\n  disabled = false,\n  'data-edit-key': dataEditKey,\n}) => {\n  return (\n    <VSCodeCheckbox\n      data-edit-key={dataEditKey}\n      checked={checked}\n      disabled={disabled}\n      onChange={(e: any) => onChange(e.target.checked)}\n    >\n      {label}\n    </VSCodeCheckbox>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/EditableTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/FormField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1242,1245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1242,1245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":65,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":65,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":68,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":68,"endColumn":21},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":73,"column":30,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":73,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2353,2355],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2842,2845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2842,2845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":90,"column":17,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":90,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":90,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":90,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":91,"column":20,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":91,"endColumn":28},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":93,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":93,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { VSCodeTextField } from '@vscode/webview-ui-toolkit/react';\n\nexport interface FormFieldProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  error?: string;\n  placeholder?: string;\n  required?: boolean;\n  disabled?: boolean;\n  validator?: (value: string) => string | null;\n  onBlur?: () => void;\n  /** Additional data attribute for edit key (vim navigation) */\n  'data-edit-key'?: string;\n  /** Additional className for the text field */\n  className?: string;\n  /** Callback for specific key actions */\n  onSave?: () => void;\n  onCancel?: () => void;\n}\n\n/**\n * Text input form field with validation\n * Uses VSCode Web UI Toolkit for native VS Code look and feel\n */\nexport const FormField: React.FC<FormFieldProps> = ({\n  label,\n  value,\n  onChange,\n  error,\n  placeholder,\n  required = false,\n  disabled = false,\n  validator,\n  onBlur,\n  'data-edit-key': dataEditKey,\n  className,\n  onSave,\n  onCancel,\n}) => {\n  const [localError, setLocalError] = React.useState<string | null>(null);\n\n  const handleBlur = () => {\n    if (validator) {\n      const validationError = validator(value);\n      setLocalError(validationError);\n    }\n    onBlur?.();\n  };\n\n  const handleKeyDown = (e: any) => {\n    // VSCodeTextField uses CustomEvent-like synthetic events but we can access original event\n    // Note: The VS Code Webview UI Toolkit components wrap native inputs.\n    // The event passed to onKeyDown might be the native keyboard event directly if attached to the web component?\n    // Actually for React wrapper, let's try standard React KeyboardEvent but typing might be tricky.\n    // It seems VSCodeTextField doesn't expose onKeyDown directly in standard React props interface efficiently\n    // unless we cast it or it just bubbles. Let's assume standard bubbling works on the wrapper div or we attach to component.\n    // However, the toolkit components often stop propagation?\n    // Let's attach to the div wrapper or try to pass it to the component.\n\n    // Wait, looking at the previous code, we didn't have onKeyDown on VSCodeTextField.\n    // We will attach it to the VSCodeTextField.\n\n    if (e.key === 'Enter') {\n      // For text fields, Enter usually means save.\n      onSave?.();\n    } else if (e.key === 'Escape') {\n      onCancel?.();\n    }\n  };\n\n  const displayError = error || localError;\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {label && (\n        <label className=\"text-sm font-semibold flex items-center gap-1\">\n          {label}\n          {required && <span style={{ color: 'var(--vscode-errorForeground)' }}>*</span>}\n        </label>\n      )}\n      <VSCodeTextField\n        data-edit-key={dataEditKey}\n        className={className}\n        value={value}\n        placeholder={placeholder}\n        disabled={disabled}\n        onInput={(e: any) => {\n          const newValue = e.target.value ?? '';\n          onChange(newValue);\n          if (localError && validator) {\n            const validationError = validator(newValue);\n            setLocalError(validationError);\n          }\n        }}\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        style={\n          {\n            '--input-border-color': displayError\n              ? 'var(--vscode-inputValidation-errorBorder)'\n              : undefined,\n          } as React.CSSProperties\n        }\n      />\n      {displayError && (\n        <span className=\"text-xs\" style={{ color: 'var(--vscode-errorForeground)' }}>\n          {displayError}\n        </span>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/KeyboardShortcutsButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/NumberField.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'min' is defined but never used. Allowed unused args must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'max' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'step' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1085,1088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1085,1088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":51,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":51,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":53,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":53,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1658,1661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1658,1661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":71,"column":43,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":71,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":71,"column":43,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":71,"endColumn":51}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { VSCodeTextField } from '@vscode/webview-ui-toolkit/react';\n\nexport interface NumberFieldProps {\n  label: string;\n  value: number;\n  onChange: (value: number) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n  error?: string;\n  required?: boolean;\n  disabled?: boolean;\n  /** Additional data attribute for edit key (vim navigation) */\n  'data-edit-key'?: string;\n  /** Additional className for the text field */\n  className?: string;\n  onSave?: () => void;\n  onCancel?: () => void;\n}\n\n/**\n * Numeric input field\n * Uses VSCode Web UI Toolkit for native VS Code look and feel\n */\nexport const NumberField: React.FC<NumberFieldProps> = ({\n  label,\n  value,\n  onChange,\n  min,\n  max,\n  step = 1,\n  error,\n  required = false,\n  disabled = false,\n  'data-edit-key': dataEditKey,\n  className,\n  onSave,\n  onCancel,\n}) => {\n  const handleChange = (newValue: string) => {\n    const num = parseInt(newValue, 10);\n    if (!isNaN(num)) {\n      onChange(num);\n    } else if (newValue === '') {\n      onChange(0);\n    }\n  };\n\n  const handleKeyDown = (e: any) => {\n    if (e.key === 'Enter') {\n      onSave?.();\n    } else if (e.key === 'Escape') {\n      onCancel?.();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {label && (\n        <label className=\"text-sm font-semibold flex items-center gap-1\">\n          {label}\n          {required && <span style={{ color: 'var(--vscode-errorForeground)' }}>*</span>}\n        </label>\n      )}\n      <VSCodeTextField\n        data-edit-key={dataEditKey}\n        className={className}\n        value={String(value)}\n        disabled={disabled}\n        onInput={(e: any) => handleChange(e.target.value ?? '')}\n        onKeyDown={handleKeyDown}\n        style={\n          {\n            '--input-border-color': error ? 'var(--vscode-inputValidation-errorBorder)' : undefined,\n          } as React.CSSProperties\n        }\n      />\n      {error && (\n        <span className=\"text-xs\" style={{ color: 'var(--vscode-errorForeground)' }}>\n          {error}\n        </span>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/ReferenceField.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":18,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":130,"endColumn":20,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4320,4322],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\n\nexport interface ReferenceFieldProps {\n  label: string;\n  value: string;\n  options: string[];\n  onChange: (value: string) => void;\n  error?: string;\n  required?: boolean;\n  disabled?: boolean;\n  placeholder?: string;\n}\n\n/**\n * Reference field with autocomplete dropdown\n * Shows available references and validates selection\n */\nexport const ReferenceField: React.FC<ReferenceFieldProps> = ({\n  label,\n  value,\n  options,\n  onChange,\n  error,\n  required = false,\n  disabled = false,\n  placeholder = 'Select or type...',\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filteredOptions, setFilteredOptions] = useState<string[]>(options);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    setFilteredOptions(options.filter((opt) => opt.toLowerCase().includes(value.toLowerCase())));\n  }, [value, options]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (containerRef.current && !containerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const isValid = !value || options.includes(value);\n\n  return (\n    <div className=\"flex flex-col gap-1\" ref={containerRef}>\n      <label className=\"text-sm font-semibold flex items-center gap-1\">\n        {label}\n        {required && <span style={{ color: 'var(--vscode-errorForeground)' }}>*</span>}\n      </label>\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          value={value}\n          onChange={(e) => {\n            onChange(e.target.value);\n            setIsOpen(true);\n          }}\n          onFocus={() => setIsOpen(true)}\n          placeholder={placeholder}\n          disabled={disabled}\n          className=\"w-full px-3 py-2 rounded text-sm pr-8\"\n          style={{\n            background: 'var(--vscode-input-background)',\n            color: 'var(--vscode-input-foreground)',\n            border:\n              error || (!isValid && value)\n                ? '1px solid var(--vscode-inputValidation-errorBorder)'\n                : '1px solid var(--vscode-input-border)',\n            opacity: disabled ? 0.5 : 1,\n            cursor: disabled ? 'not-allowed' : 'text',\n          }}\n        />\n        <span\n          className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs\"\n          style={{ color: 'var(--vscode-descriptionForeground)' }}\n        >\n          ▼\n        </span>\n\n        {isOpen && filteredOptions.length > 0 && !disabled && (\n          <div\n            className=\"absolute z-10 w-full mt-1 rounded shadow-lg max-h-48 overflow-y-auto\"\n            style={{\n              background: 'var(--vscode-dropdown-listBackground)',\n              border: '1px solid var(--vscode-dropdown-border)',\n            }}\n          >\n            {filteredOptions.map((option) => (\n              <div\n                key={option}\n                onClick={() => {\n                  onChange(option);\n                  setIsOpen(false);\n                }}\n                className=\"px-3 py-2 cursor-pointer text-sm\"\n                style={{\n                  background:\n                    value === option\n                      ? 'var(--vscode-list-activeSelectionBackground)'\n                      : 'transparent',\n                  color:\n                    value === option\n                      ? 'var(--vscode-list-activeSelectionForeground)'\n                      : 'var(--vscode-dropdown-foreground)',\n                }}\n                onMouseEnter={(e) => {\n                  if (value !== option) {\n                    e.currentTarget.style.background = 'var(--vscode-list-hoverBackground)';\n                  }\n                }}\n                onMouseLeave={(e) => {\n                  if (value !== option) {\n                    e.currentTarget.style.background = 'transparent';\n                  }\n                }}\n              >\n                {option}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      {(error || (!isValid && value)) && (\n        <span className=\"text-xs\" style={{ color: 'var(--vscode-errorForeground)' }}>\n          {error || `\"${value}\" is not a valid reference`}\n        </span>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/SelectField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[890,893],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[890,893],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":38,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":38,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":40,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1455,1458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1455,1458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":58,"column":40,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":58,"endColumn":54},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":58,"column":40,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":58,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { VSCodeDropdown, VSCodeOption } from '@vscode/webview-ui-toolkit/react';\n\nexport interface SelectFieldProps {\n  label: string;\n  value: string;\n  options: Array<{ value: string; label: string }>;\n  onChange: (value: string) => void;\n  error?: string;\n  required?: boolean;\n  disabled?: boolean;\n  /** Additional data attribute for edit key (vim navigation) */\n  'data-edit-key'?: string;\n  /** Additional className for the dropdown */\n  className?: string;\n  onSave?: () => void;\n  onCancel?: () => void;\n}\n\n/**\n * Dropdown select field\n * Uses VSCode Web UI Toolkit for native VS Code look and feel\n */\nexport const SelectField: React.FC<SelectFieldProps> = ({\n  label,\n  value,\n  options,\n  onChange,\n  error,\n  required = false,\n  disabled = false,\n  'data-edit-key': dataEditKey,\n  className,\n  onSave,\n  onCancel,\n}) => {\n  const handleKeyDown = (e: any) => {\n    if (e.key === 'Enter') {\n      onSave?.();\n    } else if (e.key === 'Escape') {\n      onCancel?.();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {label && (\n        <label className=\"text-sm font-semibold flex items-center gap-1\">\n          {label}\n          {required && <span style={{ color: 'var(--vscode-errorForeground)' }}>*</span>}\n        </label>\n      )}\n      <VSCodeDropdown\n        data-edit-key={dataEditKey}\n        className={className}\n        value={value}\n        disabled={disabled}\n        onChange={(e: any) => onChange(e.target.value)}\n        onKeyDown={handleKeyDown}\n        style={\n          {\n            '--dropdown-border': error\n              ? '1px solid var(--vscode-inputValidation-errorBorder)'\n              : undefined,\n          } as React.CSSProperties\n        }\n      >\n        {options.map((option) => (\n          <VSCodeOption key={option.value} value={option.value}>\n            {option.label}\n          </VSCodeOption>\n        ))}\n      </VSCodeDropdown>\n      {error && (\n        <span className=\"text-xs\" style={{ color: 'var(--vscode-errorForeground)' }}>\n          {error}\n        </span>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/TextAreaField.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[893,896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[893,896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":40,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .ctrlKey on an `any` value.","line":40,"column":31,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":40},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .metaKey on an `any` value.","line":40,"column":44,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":40,"endColumn":53},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .key on an `any` value.","line":42,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":42,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1539,1542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1539,1542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":62,"column":39,"nodeType":"LogicalExpression","messageId":"unsafeArgument","endLine":62,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .target on an `any` value.","line":62,"column":39,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":62,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { VSCodeTextArea } from '@vscode/webview-ui-toolkit/react';\n\nexport interface TextAreaFieldProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  rows?: number;\n  placeholder?: string;\n  error?: string;\n  required?: boolean;\n  disabled?: boolean;\n  /** Additional data attribute for edit key (vim navigation) */\n  'data-edit-key'?: string;\n  /** Additional className for the text area */\n  className?: string;\n  onSave?: () => void;\n  onCancel?: () => void;\n}\n\n/**\n * Multi-line text area field\n * Uses VSCode Web UI Toolkit for native VS Code look and feel\n */\nexport const TextAreaField: React.FC<TextAreaFieldProps> = ({\n  label,\n  value,\n  onChange,\n  rows = 4,\n  placeholder,\n  error,\n  required = false,\n  disabled = false,\n  'data-edit-key': dataEditKey,\n  className,\n  onSave,\n  onCancel,\n}) => {\n  const handleKeyDown = (e: any) => {\n    if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {\n      onSave?.();\n    } else if (e.key === 'Escape') {\n      onCancel?.();\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      {label && (\n        <label className=\"text-sm font-semibold flex items-center gap-1\">\n          {label}\n          {required && <span style={{ color: 'var(--vscode-errorForeground)' }}>*</span>}\n        </label>\n      )}\n      <VSCodeTextArea\n        data-edit-key={dataEditKey}\n        className={className}\n        value={value}\n        rows={rows}\n        placeholder={placeholder}\n        disabled={disabled}\n        onInput={(e: any) => onChange(e.target.value ?? '')}\n        onKeyDown={handleKeyDown}\n        style={\n          {\n            '--input-border-color': error ? 'var(--vscode-inputValidation-errorBorder)' : undefined,\n          } as React.CSSProperties\n        }\n      />\n      {error && (\n        <span className=\"text-xs\" style={{ color: 'var(--vscode-errorForeground)' }}>\n          {error}\n        </span>\n      )}\n    </div>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/utils/validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/shared/utils/yamlKeyMapper.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":26,"column":50,"nodeType":"CallExpression","messageId":"unsafeReturn","endLine":26,"endColumn":70},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .toUpperCase on an `any` value.","line":26,"column":50,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":26,"endColumn":68},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":26,"column":50,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":26,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1023,1026],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1023,1026],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1029,1032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1029,1032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":39,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":39,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1223,1226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1223,1226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ArrayLike<unknown> | { [s: string]: unknown; }`.","line":44,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":44,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":46,"column":7,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":46,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [camelKey] on an `any` value.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":46,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1607,1610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1607,1610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1613,1616],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1613,1616],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":64,"column":5,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":64,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1807,1810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1807,1810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ArrayLike<unknown> | { [s: string]: unknown; }`.","line":69,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":69,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":71,"column":7,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":71,"endColumn":51},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access [snakeKey] on an `any` value.","line":71,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":71,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Utility functions for converting between camelCase and snake_case.\n *\n * Critical for IP Core YAML handling:\n * - YAML uses camelCase (physicalPort, busInterfaces, etc.)\n * - Pydantic models use snake_case (physical_port, bus_interfaces, etc.)\n */\n\n/**\n * Convert camelCase string to snake_case\n *\n * @example toSnakeCase('physicalPort') => 'physical_port'\n * @example toSnakeCase('memoryMapRef') => 'memory_map_ref'\n */\nexport function toSnakeCase(str: string): string {\n  return str.replace(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`);\n}\n\n/**\n * Convert snake_case string to camelCase\n *\n * @example toCamelCase('physical_port') => 'physicalPort'\n * @example toCamelCase('memory_map_ref') => 'memoryMapRef'\n */\nexport function toCamelCase(str: string): string {\n  return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * Recursively convert object keys from snake_case to camelCase\n * Used when converting pydantic model data to YAML format\n */\nexport function mapKeysToCamelCase(obj: any): any {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(mapKeysToCamelCase);\n  }\n\n  if (typeof obj === 'object') {\n    const result: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      const camelKey = toCamelCase(key);\n      result[camelKey] = mapKeysToCamelCase(value);\n    }\n    return result;\n  }\n\n  return obj;\n}\n\n/**\n * Recursively convert object keys from camelCase to snake_case\n * Used when converting YAML data to match pydantic model structure\n */\nexport function mapKeysToSnakeCase(obj: any): any {\n  if (obj === null || obj === undefined) {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(mapKeysToSnakeCase);\n  }\n\n  if (typeof obj === 'object') {\n    const result: any = {};\n    for (const [key, value] of Object.entries(obj)) {\n      const snakeKey = toSnakeCase(key);\n      result[snakeKey] = mapKeysToSnakeCase(value);\n    }\n    return result;\n  }\n\n  return obj;\n}\n\n/**\n * Known camelCase -> snake_case mappings for IP Core YAML\n * Used for validation and autocomplete\n */\nexport const KNOWN_MAPPINGS = {\n  // Top level\n  apiVersion: 'api_version',\n  useBusLibrary: 'use_bus_library',\n  busInterfaces: 'bus_interfaces',\n  memoryMaps: 'memory_maps',\n  fileSets: 'file_sets',\n\n  // Clock/Reset/Port\n  logicalName: 'logical_name',\n\n  // Bus Interface\n  physicalPrefix: 'physical_prefix',\n  associatedClock: 'associated_clock',\n  associatedReset: 'associated_reset',\n  memoryMapRef: 'memory_map_ref',\n  useOptionalPorts: 'use_optional_ports',\n  portWidthOverrides: 'port_width_overrides',\n  indexStart: 'index_start',\n  namingPattern: 'naming_pattern',\n  physicalPrefixPattern: 'physical_prefix_pattern',\n\n  // Parameter\n  dataType: 'data_type',\n\n  // Memory Map\n  addressBlocks: 'address_blocks',\n  baseAddress: 'base_address',\n\n  // Register\n  addressOffset: 'address_offset',\n  resetValue: 'reset_value',\n\n  // Bit Field\n  bitOffset: 'bit_offset',\n  bitWidth: 'bit_width',\n  bitRange: 'bit_range',\n} as const;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/types/editor.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/types/ipCore.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/types/memoryMap.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/types/selection.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/utils/BitFieldUtils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3770,3773],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3770,3773],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":126,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":126,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":127,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":127,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4365,4368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4365,4368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":144,"column":29,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":144,"endColumn":42},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":145,"column":28,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":145,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4986,4989],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4986,4989],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4994,4997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4994,4997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":165,"column":26,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":165,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":167,"column":52,"nodeType":"ChainExpression","messageId":"unsafeArgument","endLine":167,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bits on an `any` value.","line":167,"column":52,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":167,"endColumn":59},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_offset on an `any` value.","line":172,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":172,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bit_width on an `any` value.","line":173,"column":7,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":173,"endColumn":18},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bits on an `any` value.","line":175,"column":18,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":175,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .bits on an `any` value.","line":176,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":176,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Result of parsing a bits-like string\n */\nexport interface BitsRange {\n  bit_offset: number;\n  bit_width: number;\n}\n\n// ---------------------------------------------------------------------------\n// Standalone functional exports (preferred API for new code)\n// ---------------------------------------------------------------------------\n\n/**\n * Parses a bits string '[hi:lo]' or '[n]' into [hi, lo].\n * Returns null if the format is unrecognised.\n */\nexport function parseBitsRange(bits: string): [number, number] | null {\n  if (!bits) {\n    return null;\n  }\n  const rangeMatch = bits.match(/^\\[(\\d+):(\\d+)\\]$/);\n  if (rangeMatch) {\n    return [parseInt(rangeMatch[1], 10), parseInt(rangeMatch[2], 10)];\n  }\n  const singleMatch = bits.match(/^\\[(\\d+)\\]$/);\n  if (singleMatch) {\n    return [parseInt(singleMatch[1], 10), parseInt(singleMatch[1], 10)];\n  }\n  return null;\n}\n\n/**\n * Formats a bit range as '[hi:lo]' or '[hi]' for single bits.\n *\n * @param hi Most-significant bit index.\n * @param lo Least-significant bit index.\n */\nexport function formatBitsRange(hi: number, lo: number): string {\n  return hi === lo ? `[${hi}]` : `[${hi}:${lo}]`;\n}\n\n/**\n * Converts a field definition to its canonical bits string.\n * Computes from `bit_offset`/`bit_width` when available; falls back to the\n * `bits` property; returns `'[?:?]'` when neither can be determined.\n */\nexport function fieldToBitsString(field: {\n  bit_offset?: number | null;\n  bit_width?: number | null;\n  bits?: string | null;\n}): string {\n  const offset = Number(field?.bit_offset ?? NaN);\n  const width = Number(field?.bit_width ?? NaN);\n  if (Number.isFinite(offset) && Number.isFinite(width) && width >= 1) {\n    return formatBitsRange(offset + width - 1, offset);\n  }\n  if (typeof field?.bits === 'string' && field.bits) {\n    return field.bits;\n  }\n  return '[?:?]';\n}\n\n// ---------------------------------------------------------------------------\n// Class-based API (legacy — kept for backward compatibility)\n// ---------------------------------------------------------------------------\n\n/**\n * Utility functions for bit field formatting and parsing\n */\nexport class BitFieldUtils {\n  /**\n   * Parse a bits-like string (e.g., \"[31:0]\", \"[5:5]\") to bit offset and width\n   * @param text Bits string like \"[31:0]\"\n   * @returns Parsed bits range or null if invalid\n   */\n  static parseBitsLike(text: string): BitsRange | null {\n    const trimmed = String(text ?? '')\n      .trim()\n      .replace(/\\[|\\]/g, '');\n    if (!trimmed) {\n      return null;\n    }\n    const parts = trimmed.split(':').map((p) => Number(String(p).trim()));\n    if (parts.some((p) => Number.isNaN(p))) {\n      return null;\n    }\n    let msb: number;\n    let lsb: number;\n    if (parts.length === 1) {\n      msb = parts[0];\n      lsb = parts[0];\n    } else {\n      msb = parts[0];\n      lsb = parts[1];\n    }\n    if (!Number.isFinite(msb) || !Number.isFinite(lsb)) {\n      return null;\n    }\n    if (msb < lsb) {\n      [msb, lsb] = [lsb, msb];\n    }\n    return { bit_offset: lsb, bit_width: msb - lsb + 1 };\n  }\n\n  /**\n   * Format bit offset and width as a bits-like string (e.g., \"[31:0]\")\n   * @param bit_offset Least significant bit position\n   * @param bit_width Width of the field in bits\n   * @returns Formatted bits string\n   */\n  static formatBitsLike(bit_offset: number, bit_width: number): string {\n    const lsb = Number(bit_offset);\n    const width = Math.max(1, Number(bit_width));\n    const msb = lsb + width - 1;\n    return `[${msb}:${lsb}]`;\n  }\n\n  /**\n   * Check if a specific bit is used in any of the given fields\n   * @param fields Array of field objects with bit_offset and bit_width\n   * @param bitPosition Bit position to check\n   * @returns True if the bit is used\n   */\n  static isBitUsed(fields: any[], bitPosition: number): boolean {\n    for (const f of fields) {\n      const offset = Number(f?.bit_offset ?? 0);\n      const width = Number(f?.bit_width ?? 1);\n      if (bitPosition >= offset && bitPosition < offset + width) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Find the first free bit position in the range [0, maxBits)\n   * @param fields Array of field objects with bit_offset and bit_width\n   * @param maxBits Maximum bit position to check (default 32)\n   * @returns First free bit position or maxBits if all are used\n   */\n  static findFreeBit(fields: any[], maxBits = 32): number {\n    const used = new Set<number>();\n    for (const f of fields) {\n      const offset = Number(f?.bit_offset ?? 0);\n      const width = Number(f?.bit_width ?? 1);\n      for (let b = offset; b < offset + width; b++) {\n        used.add(b);\n      }\n    }\n    let lsb = 0;\n    while (used.has(lsb) && lsb < maxBits) {\n      lsb++;\n    }\n    return lsb;\n  }\n\n  /**\n   * Repack field bit offsets sequentially based on their widths\n   * @param fields Array of field objects to repack\n   * @returns Updated array of fields with sequential bit offsets\n   */\n  static repackFieldsSequentially(fields: any[]): any[] {\n    let offset = 0;\n    for (const f of fields) {\n      let width = Number(f?.bit_width);\n      if (!Number.isFinite(width)) {\n        const parsed = BitFieldUtils.parseBitsLike(f?.bits);\n        width = parsed?.bit_width ?? 1;\n      }\n      width = Math.max(1, Math.min(32, Math.trunc(width)));\n\n      f.bit_offset = offset;\n      f.bit_width = width;\n      // Keep legacy \"bits\" in sync if it exists\n      if (typeof f?.bits === 'string') {\n        f.bits = BitFieldUtils.formatBitsLike(offset, width);\n      }\n      offset += width;\n    }\n    return fields;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/balevision/workspace/bleviet/ipcraft-vscode/src/webview/vscode.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":4,"column":7,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":4,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__vscodeApi on an `any` value.","line":7,"column":6,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":7,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .acquireVsCodeApi on an `any` value.","line":7,"column":34,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":7,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":9,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":9,"endColumn":63},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__vscodeApi on an `any` value.","line":9,"column":5,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":9,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .acquireVsCodeApi on an `any` value.","line":9,"column":32,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":9,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":9,"column":32,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":9,"endColumn":61},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":16,"column":14,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":16,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":1,"message":"Unsafe member access .__vscodeApi on an `any` value.","line":16,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":16,"endColumn":47}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[221,224],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[221,224],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Minimal VS Code API wrapper for the webview.\n// Safe to import from multiple bundles - caches the API instance globally\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst globalWindow = globalThis as any;\n\n// Check if API is already acquired (cached on window object)\nif (!globalWindow.__vscodeApi && globalWindow.acquireVsCodeApi) {\n  try {\n    globalWindow.__vscodeApi = globalWindow.acquireVsCodeApi();\n  } catch (e) {\n    // API already acquired by another bundle, use the existing instance\n    console.warn('VS Code API already acquired, using existing instance');\n  }\n}\n\nexport const vscode = globalWindow.__vscodeApi;\n","usedDeprecatedRules":[{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
